import{a as L,b as Ee,c as C}from"./chunk-POLL2CVR.js";function W(t){return typeof t=="function"}function Hv(t){return t&&W(t.schedule)}function qv(t){return t[t.length-1]}function Ua(t){return W(qv(t))?t.pop():void 0}function xn(t){return Hv(qv(t))?t.pop():void 0}function Id(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Gv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function zv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(t){return this instanceof cr?(this.v=t,this):new cr(t)}function Wv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(A){return Promise.resolve(A).then(v,p)}}function a(v,A){r[v]&&(i[v]=function(x){return new Promise(function(R,O){s.push([v,x,R,O])>1||u(v,x)})},A&&(i[v]=A(i[v])))}function u(v,A){try{l(r[v](A))}catch(x){m(s[0][3],x)}}function l(v){v.value instanceof cr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,A){v(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Kv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zv=="function"?zv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var ja=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ba(t){return W(t?.then)}function ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $a=ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ur(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(s){e=s instanceof $a?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Qv(s)}catch(o){e=e??[],o instanceof $a?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $a(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Qv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ur(n,e)}remove(e){let{_finalizers:n}=this;n&&ur(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var wd=Ae.EMPTY;function Ha(t){return t instanceof Ae||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function Qv(t){W(t)?t():t.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(t,e,...n){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ti;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function qa(t){ti.setTimeout(()=>{let{onUnhandledError:e}=kt;if(e)e(t);else throw t})}function Os(){}var Yv=Ed("C",void 0,void 0);function Jv(t){return Ed("E",void 0,t)}function Zv(t){return Ed("N",t,void 0)}function Ed(t,e,n){return{kind:t,value:e,error:n}}var lr=null;function ni(t){if(kt.useDeprecatedSynchronousErrorHandling){let e=!lr;if(e&&(lr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=lr;if(lr=null,n)throw r}}else t()}function Xv(t){kt.useDeprecatedSynchronousErrorHandling&&lr&&(lr.errorThrown=!0,lr.error=t)}var dr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ha(e)&&e.add(this)):this.destination=HC}static create(e,n,r){return new ri(e,n,r)}next(e){this.isStopped?Td(Zv(e),this):this._next(e)}error(e){this.isStopped?Td(Jv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Td(Yv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BC=Function.prototype.bind;function Dd(t,e){return BC.call(t,e)}var bd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){za(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){za(r)}else za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){za(n)}}},ri=class extends dr{constructor(e,n,r){super();let i;if(W(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&kt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dd(e.next,s),error:e.error&&Dd(e.error,s),complete:e.complete&&Dd(e.complete,s)}):i=e}this.destination=new bd(i)}};function za(t){kt.useDeprecatedSynchronousErrorHandling?Xv(t):qa(t)}function $C(t){throw t}function Td(t,e){let{onStoppedNotification:n}=kt;n&&ti.setTimeout(()=>n(t,e))}var HC={closed:!0,next:Os,error:$C,complete:Os};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rt(t){return t}function Ga(...t){return Cd(t)}function Cd(t){return t.length===0?rt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=zC(n)?n:new ri(n,r,i);return ni(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=e_(r),new r((i,s)=>{let o=new ri({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ii](){return this}pipe(...n){return Cd(n)(this)}toPromise(n){return n=e_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function e_(t){var e;return(e=t??kt.Promise)!==null&&e!==void 0?e:Promise}function qC(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function zC(t){return t&&t instanceof dr||qC(t)&&Ha(t)}function Wa(t){return W(t[ii])}function Ka(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function Qa(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ya=GC();function Ja(t){return W(t?.[Ya])}function Za(t){return Wv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield cr(n.read());if(i)return yield cr(void 0);yield yield cr(r)}}finally{n.releaseLock()}})}function Xa(t){return W(t?.getReader)}function Re(t){if(t instanceof oe)return t;if(t!=null){if(Wa(t))return WC(t);if(ja(t))return KC(t);if(Ba(t))return QC(t);if(Ka(t))return t_(t);if(Ja(t))return YC(t);if(Xa(t))return JC(t)}throw Qa(t)}function WC(t){return new oe(e=>{let n=t[ii]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KC(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QC(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,qa)})}function YC(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function t_(t){return new oe(e=>{ZC(t,e).catch(n=>e.error(n))})}function JC(t){return t_(Za(t))}function ZC(t,e){var n,r,i,s;return Gv(this,void 0,void 0,function*(){try{for(n=Kv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ct(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Sd(t){return W(t?.lift)}function te(t){return e=>{if(Sd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(t,e,n,r,i){return new Ad(t,e,n,r,i)}var Ad=class extends dr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mn(t,e=0){return te((n,r)=>{n.subscribe(Z(r,i=>ct(r,t,()=>r.next(i),e),()=>ct(r,t,()=>r.complete(),e),i=>ct(r,t,()=>r.error(i),e)))})}function Pn(t,e=0){return te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function n_(t,e){return Re(t).pipe(Pn(e),Mn(e))}function r_(t,e){return Re(t).pipe(Pn(e),Mn(e))}function i_(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function s_(t,e){return new oe(n=>{let r;return ct(n,e,()=>{r=t[Ya](),ct(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function ec(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{ct(n,e,()=>{let r=t[Symbol.asyncIterator]();ct(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function o_(t,e){return ec(Za(t),e)}function a_(t,e){if(t!=null){if(Wa(t))return n_(t,e);if(ja(t))return i_(t,e);if(Ba(t))return r_(t,e);if(Ka(t))return ec(t,e);if(Ja(t))return s_(t,e);if(Xa(t))return o_(t,e)}throw Qa(t)}function Ne(t,e){return e?a_(t,e):Re(t)}function K(...t){let e=xn(t);return Ne(t,e)}function si(){return te((t,e)=>{let n=null;t._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oi=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return si()(this)}};var c_=ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new tc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new c_}next(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?wd:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,ur(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new tc(e,n),t})(),tc=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:wd}};var je=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Rd={now(){return(Rd.delegate||Date).now()},delegate:void 0};var nc=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var ks={setInterval(t,e,...n){let{delegate:r}=ks;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ks;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ai=class extends nc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ks.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ks.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ur(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ci=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ci.now=Rd.now;var ui=class extends ci{constructor(e,n=ci.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Fs=new ui(ai);var rc=class extends ai{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ic=class extends ui{};var Nd=new ic(rc);var ht=new oe(t=>t.complete());function li(t,e){let n=W(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function xd(t){return!!t&&(t instanceof oe||W(t.lift)&&W(t.subscribe))}var fn=ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return te((n,r)=>{let i=0;n.subscribe(Z(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:XC}=Array;function eS(t,e){return XC(e)?t(...e):t(e)}function sc(t){return ie(e=>eS(t,e))}var{isArray:tS}=Array,{getPrototypeOf:nS,prototype:rS,keys:iS}=Object;function oc(t){if(t.length===1){let e=t[0];if(tS(e))return{args:e,keys:null};if(sS(e)){let n=iS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function sS(t){return t&&typeof t=="object"&&nS(t)===rS}function ac(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ls(...t){let e=xn(t),n=Ua(t),{args:r,keys:i}=oc(t);if(r.length===0)return Ne([],e);let s=new oe(oS(r,e,i?o=>ac(i,o):rt));return n?s.pipe(sc(n)):s}function oS(t,e,n=rt){return r=>{u_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)u_(e,()=>{let l=Ne(t[u],e),h=!1;l.subscribe(Z(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function u_(t,e,n){t?ct(n,t,e):e()}function l_(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=x=>l<r?A(x):u.push(x),A=x=>{s&&e.next(x),l++;let R=!1;Re(n(x,h++)).subscribe(Z(e,O=>{i?.(O),s?v(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?ct(e,o,()=>A(O)):A(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(Z(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Oe(t,e,n=1/0){return W(e)?Oe((r,i)=>ie((s,o)=>e(r,s,i,o))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),te((r,i)=>l_(r,i,t,n)))}function Md(t=1/0){return Oe(rt,t)}function d_(){return Md(1)}function di(...t){return d_()(Ne(t,xn(t)))}function cc(t){return new oe(e=>{Re(t()).subscribe(e)})}function aS(...t){let e=Ua(t),{args:n,keys:r}=oc(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Re(n[h]).subscribe(Z(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?ac(r,a):a),s.complete())}))}});return e?i.pipe(sc(e)):i}function It(t,e){return te((n,r)=>{let i=0;n.subscribe(Z(r,s=>t.call(e,s,i++)&&r.next(s)))})}function On(t){return te((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Z(n,void 0,void 0,o=>{s=Re(t(o,On(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function h_(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(Z(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function hi(t,e){return W(e)?Oe(t,e,1):Oe(t,1)}function cS(t,e=Fs){return te((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function u(){let l=o+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(Z(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function kn(t){return te((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function pn(t){return t<=0?()=>ht:te((e,n)=>{let r=0;e.subscribe(Z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Pd(t){return ie(()=>t)}function f_(t,e=rt){return t=t??uS,te((n,r)=>{let i,s=!0;n.subscribe(Z(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function uS(t,e){return t===e}function uc(t=lS){return te((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lS(){return new fn}function Vs(t){return te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Wt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):rt,pn(1),n?kn(e):uc(()=>new fn))}function fi(t){return t<=0?()=>ht:te((e,n)=>{let r=[];e.subscribe(Z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Od(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):rt,fi(1),n?kn(e):uc(()=>new fn))}function lc(t,e){return te(h_(t,e,arguments.length>=2,!0))}function dc(...t){let e=xn(t);return te((n,r)=>{(e?di(t,n,e):di(t,n)).subscribe(r)})}function wt(t,e){return te((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Z(r,u=>{i?.unsubscribe();let l=0,h=s++;Re(t(u,h)).subscribe(i=Z(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function kd(t){return te((e,n)=>{Re(t).subscribe(Z(n,()=>n.complete(),Os)),!n.closed&&e.subscribe(n)})}function ke(t,e,n){let r=W(t)||e||n?{next:t,error:e,complete:n}:t;return r?te((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Z(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):rt}function p_(t,e){return Object.is(t,e)}var Fe=null,Us=!1,hc=1,gn=Symbol("SIGNAL");function se(t){let e=Fe;return Fe=t,e}function dS(){return Us}var Bs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ud(t){if(Us)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(t);let e=Fe.nextProducerIndex++;if(pi(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==t&&js(Fe)){let n=Fe.producerNode[e];yc(n,Fe.producerIndexOfThis[e])}Fe.producerNode[e]!==t&&(Fe.producerNode[e]=t,Fe.producerIndexOfThis[e]=js(Fe)?__(t,Fe,e):0),Fe.producerLastReadVersion[e]=t.version}function hS(){hc++}function g_(t){if(!(js(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hc)){if(!t.producerMustRecompute(t)&&!mc(t)){t.dirty=!1,t.lastCleanEpoch=hc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=hc}}function m_(t){if(t.liveConsumerNode===void 0)return;let e=Us;Us=!0;try{for(let n of t.liveConsumerNode)n.dirty||v_(n)}finally{Us=e}}function y_(){return Fe?.consumerAllowSignalWrites!==!1}function v_(t){t.dirty=!0,m_(t),t.consumerMarkedDirty?.(t)}function pc(t){return t&&(t.nextProducerIndex=0),se(t)}function gc(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(js(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)yc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function mc(t){pi(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(g_(n),r!==n.version))return!0}return!1}function jd(t){if(pi(t),js(t))for(let e=0;e<t.producerNode.length;e++)yc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function __(t,e,n){if(I_(t),pi(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=__(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function yc(t,e){if(I_(t),pi(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)yc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];pi(i),i.producerIndexOfThis[r]=e}}function js(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function pi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function I_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function w_(t){let e=Object.create(fS);e.computation=t;let n=()=>{if(g_(e),Ud(e),e.value===fc)throw e.error;return e.value};return n[gn]=e,n}var Fd=Symbol("UNSET"),Ld=Symbol("COMPUTING"),fc=Symbol("ERRORED"),fS=Ee(L({},Bs),{value:Fd,dirty:!0,error:null,equal:p_,producerMustRecompute(t){return t.value===Fd||t.value===Ld},producerRecomputeValue(t){if(t.value===Ld)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ld;let n=pc(t),r;try{r=t.computation()}catch(i){r=fc,t.error=i}finally{gc(t,n)}if(e!==Fd&&e!==fc&&r!==fc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function pS(){throw new Error}var E_=pS;function D_(){E_()}function T_(t){E_=t}var gS=null;function b_(t){let e=Object.create(S_);e.value=t;let n=()=>(Ud(e),e.value);return n[gn]=e,n}function Bd(t,e){y_()||D_(),t.equal(t.value,e)||(t.value=e,mS(t))}function C_(t,e){y_()||D_(),Bd(t,e(t.value))}var S_=Ee(L({},Bs),{equal:p_,value:void 0});function mS(t){t.version++,hS(),m_(t),gS?.()}function A_(t,e,n){let r=Object.create(yS);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=u=>{r.cleanupFn=u};function s(u){return u.fn===null&&u.schedule===null}function o(u){s(u)||(jd(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=Vd)}let a=()=>{if(r.fn===null)return;if(dS())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!mc(r))return;r.hasRun=!0;let u=pc(r);try{r.cleanupFn(),r.cleanupFn=Vd,r.fn(i)}finally{gc(r,u)}};return r.ref={notify:()=>v_(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[gn]:r},r.ref}var Vd=()=>{},yS=Ee(L({},Bs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Vd});var lI="https://g.co/ng/security#xss",B=class extends Error{constructor(e,n){super(Qh(e,n)),this.code=e}};function Qh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ro(t){return{toString:t}.toString()}var vc="__parameters__";function vS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function _S(t,e,n){return ro(()=>{let r=vS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(vc)?u[vc]:Object.defineProperty(u,vc,{value:[]})[vc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var hr=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function IS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function lt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(lt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function R_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var wS=ve({__forward_ref__:ve});function dI(t){return t.__forward_ref__=dI,t.toString=function(){return lt(this())},t}function it(t){return hI(t)?t():t}function hI(t){return typeof t=="function"&&t.hasOwnProperty(wS)&&t.__forward_ref__===dI}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yh(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qc(t){return N_(t,pI)||N_(t,gI)}function fI(t){return Qc(t)!==null}function N_(t,e){return t.hasOwnProperty(e)?t[e]:null}function ES(t){let e=t&&(t[pI]||t[gI]);return e||null}function x_(t){return t&&(t.hasOwnProperty(M_)||t.hasOwnProperty(DS))?t[M_]:null}var pI=ve({\u0275prov:ve}),M_=ve({\u0275inj:ve}),gI=ve({ngInjectableDef:ve}),DS=ve({ngInjectorDef:ve}),ee=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mI(t){return t&&!!t.\u0275providers}var TS=ve({\u0275cmp:ve}),bS=ve({\u0275dir:ve}),CS=ve({\u0275pipe:ve}),SS=ve({\u0275mod:ve}),Ac=ve({\u0275fac:ve}),$s=ve({__NG_ELEMENT_ID__:ve}),P_=ve({__NG_ENV_ID__:ve});function Yc(t){return typeof t=="string"?t:t==null?"":String(t)}function AS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yc(t)}function RS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function Jh(t,e){throw new B(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),rh;function yI(){return rh}function ut(t){let e=rh;return rh=t,e}function vI(t,e,n){let r=Qc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;Jh(t,"Injector")}var NS={},Hs=NS,ih="__NG_DI_FLAG__",Rc="ngTempTokenPath",xS="ngTokenPath",MS=/\n/gm,PS="\u0275",O_="__source",_i;function OS(){return _i}function Fn(t){let e=_i;return _i=t,e}function kS(t,e=ne.Default){if(_i===void 0)throw new B(-203,!1);return _i===null?vI(t,void 0,e):_i.get(t,e&ne.Optional?null:void 0,e)}function ae(t,e=ne.Default){return(yI()||kS)(it(t),e)}function k(t,e=ne.Default){return ae(t,Jc(e))}function Jc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sh(t){let e=[];for(let n=0;n<t.length;n++){let r=it(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=ne.Default;for(let o=0;o<r.length;o++){let a=r[o],u=LS(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function FS(t,e){return t[ih]=e,t.prototype[ih]=e,t}function LS(t){return t[ih]}function VS(t,e,n,r){let i=t[Rc];throw e[O_]&&i.unshift(e[O_]),t.message=US(`
`+t.message,i,n,r),t[xS]=i,t[Rc]=null,t}function US(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==PS?t.slice(2):t;let i=lt(e);if(Array.isArray(e))i=e.map(lt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(MS,`
  `)}`}var Zt=FS(_S("Optional"),8);function gr(t,e){let n=t.hasOwnProperty(Ac);return n?t[Ac]:null}function Zh(t,e){t.forEach(n=>Array.isArray(n)?Zh(n,e):e(n))}function _I(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function BS(t,e,n){let r=io(t,e);return r>=0?t[r|1]=n:(r=~r,jS(t,r,e,n)),r}function $d(t,e){let n=io(t,e);if(n>=0)return t[n|1]}function io(t,e){return $S(t,e,1)}function $S(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var wi={},Et=[],Ei=new ee(""),II=new ee("",-1),wI=new ee(""),xc=class{get(e,n=Hs){if(n===Hs){let r=new Error(`NullInjectorError: No provider for ${lt(e)}!`);throw r.name="NullInjectorError",r}return n}},EI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(EI||{}),Yt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Yt||{}),Ut=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ut||{});function HS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function oh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];qS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function DI(t){return t===3||t===4||t===6}function qS(t){return t.charCodeAt(0)===64}function qs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?k_(t,n,i,null,e[++r]):k_(t,n,i,null,null))}}return t}function k_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var TI="ng-template";function zS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&HS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Xh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Xh(t){return t.type===4&&t.value!==TI}function GS(t,e,n){let r=t.type===4&&!n?TI:t.value;return e===r}function WS(t,e,n){let r=4,i=t.attrs,s=i!==null?YS(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ft(r)&&!Ft(u))return!1;if(o&&Ft(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!GS(t,u,n)||u===""&&e.length===1){if(Ft(r))return!1;o=!0}}else if(r&8){if(i===null||!zS(t,i,u,n)){if(Ft(r))return!1;o=!0}}else{let l=e[++a],h=KS(u,i,Xh(t),n);if(h===-1){if(Ft(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ft(r))return!1;o=!0}}}}return Ft(r)||o}function Ft(t){return(t&1)===0}function KS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return JS(e,t)}function QS(t,e,n=!1){for(let r=0;r<e.length;r++)if(WS(t,e[r],n))return!0;return!1}function YS(t){for(let e=0;e<t.length;e++){let n=t[e];if(DI(n))return e}return t.length}function JS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function F_(t,e){return t?":not("+e.trim()+")":e}function ZS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ft(o)&&(e+=F_(s,i),i=""),r=o,s=s||!Ft(r);n++}return i!==""&&(e+=F_(s,i)),e}function XS(t){return t.map(ZS).join(",")}function e0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ft(i))break;i=s}r++}return{attrs:e,classes:n}}function bI(t){return ro(()=>{let e=xI(t),n=Ee(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===EI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Yt.Emulated,styles:t.styles||Et,_:null,schemas:t.schemas||null,tView:null,id:""});MI(n);let r=t.dependencies;return n.directiveDefs=V_(r,!1),n.pipeDefs=V_(r,!0),n.id=r0(n),n})}function t0(t){return Vn(t)||SI(t)}function n0(t){return t!==null}function ef(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||Et,declarations:t.declarations||Et,imports:t.imports||Et,exports:t.exports||Et,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function L_(t,e){if(t==null)return wi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ut.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ut.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Zc(t){return ro(()=>{let e=xI(t);return MI(e),e})}function CI(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Vn(t){return t[TS]||null}function SI(t){return t[bS]||null}function AI(t){return t[CS]||null}function RI(t){let e=Vn(t)||SI(t)||AI(t);return e!==null?e.standalone:!1}function NI(t,e){let n=t[SS]||null;if(!n&&e===!0)throw new Error(`Type ${lt(t)} does not have '\u0275mod' property.`);return n}function xI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||wi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Et,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:L_(t.inputs,e),outputs:L_(t.outputs),debugInfo:null}}function MI(t){t.features?.forEach(e=>e(t))}function V_(t,e){if(!t)return null;let n=e?AI:t0;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(n0)}function r0(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $n(t){return{\u0275providers:t}}function i0(...t){return{\u0275providers:PI(!0,t),\u0275fromNgModule:!0}}function PI(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Zh(e,o=>{let a=o;ah(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&OI(i,s),n}function OI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];tf(i,s=>{e(s,r)})}}function ah(t,e,n,r){if(t=it(t),!t)return!1;let i=null,s=x_(t),o=!s&&Vn(t);if(!s&&!o){let u=t.ngModule;if(s=x_(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ah(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Zh(s.imports,h=>{ah(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&OI(l,e)}if(!a){let l=gr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Et},i),e({provide:wI,useValue:i,multi:!0},i),e({provide:Ei,useValue:()=>ae(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;tf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function tf(t,e){for(let n of t)mI(n)&&(n=n.\u0275providers),Array.isArray(n)?tf(n,e):e(n)}var s0=ve({provide:String,useValue:ve});function kI(t){return t!==null&&typeof t=="object"&&s0 in t}function o0(t){return!!(t&&t.useExisting)}function a0(t){return!!(t&&t.useFactory)}function Di(t){return typeof t=="function"}function c0(t){return!!t.useClass}var Xc=new ee(""),Ec={},u0={},Hd;function nf(){return Hd===void 0&&(Hd=new xc),Hd}var Dt=class{},zs=class extends Dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uh(e,o=>this.processProvider(o)),this.records.set(II,gi(void 0,this)),i.has("environment")&&this.records.set(Dt,gi(void 0,this));let s=this.records.get(Xc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(wI,Et,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Fn(this),r=ut(void 0),i;try{return e()}finally{Fn(n),ut(r)}}get(e,n=Hs,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(P_))return e[P_](this);r=Jc(r);let i,s=Fn(this),o=ut(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=p0(e)&&Qc(e);l&&this.injectableDefInScope(l)?u=gi(ch(e),Ec):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ne.Self?nf():this.parent;return n=r&ne.Optional&&n===Hs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rc]=a[Rc]||[]).unshift(lt(e)),s)throw a;return VS(a,e,"R3InjectorError",this.source)}else throw a}finally{ut(o),Fn(s)}}resolveInjectorInitializers(){let e=se(null),n=Fn(this),r=ut(void 0),i;try{let s=this.get(Ei,Et,ne.Self);for(let o of s)o()}finally{Fn(n),ut(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=it(e);let n=Di(e)?e:it(e&&e.provide),r=d0(e);if(!Di(e)&&e.multi===!0){let i=this.records.get(n);i||(i=gi(void 0,Ec,!0),i.factory=()=>sh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=se(null);try{return n.value===Ec&&(n.value=u0,n.value=n.factory()),typeof n.value=="object"&&n.value&&f0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=it(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ch(t){let e=Qc(t),n=e!==null?e.factory:gr(t);if(n!==null)return n;if(t instanceof ee)throw new B(204,!1);if(t instanceof Function)return l0(t);throw new B(204,!1)}function l0(t){if(t.length>0)throw new B(204,!1);let n=ES(t);return n!==null?()=>n.factory(t):()=>new t}function d0(t){if(kI(t))return gi(void 0,t.useValue);{let e=FI(t);return gi(e,Ec)}}function FI(t,e,n){let r;if(Di(t)){let i=it(t);return gr(i)||ch(i)}else if(kI(t))r=()=>it(t.useValue);else if(a0(t))r=()=>t.useFactory(...sh(t.deps||[]));else if(o0(t))r=()=>ae(it(t.useExisting));else{let i=it(t&&(t.useClass||t.provide));if(h0(t))r=()=>new i(...sh(t.deps));else return gr(i)||ch(i)}return r}function gi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function h0(t){return!!t.deps}function f0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function p0(t){return typeof t=="function"||typeof t=="object"&&t instanceof ee}function uh(t,e){for(let n of t)Array.isArray(n)?uh(n,e):n&&mI(n)?uh(n.\u0275providers,e):e(n)}function yn(t,e){t instanceof zs&&t.assertNotDestroyed();let n,r=Fn(t),i=ut(void 0);try{return e()}finally{Fn(r),ut(i)}}function LI(){return yI()!==void 0||OS()!=null}function VI(t){if(!LI())throw new B(-203,!1)}function g0(t){return typeof t=="function"}var vn=0,X=1,$=2,Ye=3,Vt=4,Ht=5,Gs=6,Ws=7,Qe=8,Ti=9,jt=10,Be=11,Ks=12,U_=13,Ni=14,Bt=15,eu=16,mi=17,bi=18,tu=19,UI=20,Ln=21,Dc=22,mr=23,ft=25,jI=1;var yr=7,Mc=8,Pc=9,st=10,rf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(rf||{});function fr(t){return Array.isArray(t)&&typeof t[jI]=="object"}function _n(t){return Array.isArray(t)&&t[jI]===!0}function BI(t){return(t.flags&4)!==0}function nu(t){return t.componentOffset>-1}function sf(t){return(t.flags&1)===1}function Un(t){return!!t.template}function m0(t){return(t[$]&512)!==0}var lh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function $I(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function so(){return HI}function HI(t){return t.type.prototype.ngOnChanges&&(t.setInput=v0),y0}so.ngInherit=!0;function y0(){let t=zI(this),e=t?.current;if(e){let n=t.previous;if(n===wi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function v0(t,e,n,r,i){let s=this.declaredInputs[r],o=zI(t)||_0(t,{previous:wi,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new lh(l&&l.currentValue,n,u===wi),$I(t,e,i,n)}var qI="__ngSimpleChanges__";function zI(t){return t[qI]||null}function _0(t,e){return t[qI]=e}var j_=null;var Kt=function(t,e,n){j_?.(t,e,n)},GI="svg",I0="math",w0=!1;function E0(){return w0}function Jt(t){for(;Array.isArray(t);)t=t[vn];return t}function WI(t,e){return Jt(e[t])}function Tt(t,e){return Jt(e[t.index])}function of(t,e){return t.data[e]}function D0(t,e){return t[e]}function Hn(t,e){let n=e[t];return fr(n)?n:n[vn]}function af(t){return(t[$]&128)===128}function T0(t){return _n(t[Ye])}function Oc(t,e){return e==null?null:t[e]}function KI(t){t[mi]=0}function b0(t){t[$]&1024||(t[$]|=1024,af(t)&&Qs(t))}function C0(t,e){for(;t>0;)e=e[Ni],t--;return e}function cf(t){return!!(t[$]&9216||t[mr]?.dirty)}function dh(t){t[jt].changeDetectionScheduler?.notify(1),cf(t)?Qs(t):t[$]&64&&(E0()?(t[$]|=1024,Qs(t)):t[jt].changeDetectionScheduler?.notify())}function Qs(t){t[jt].changeDetectionScheduler?.notify();let e=Ys(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!af(e)));)e=Ys(e)}function QI(t,e){if((t[$]&256)===256)throw new B(911,!1);t[Ln]===null&&(t[Ln]=[]),t[Ln].push(e)}function S0(t,e){if(t[Ln]===null)return;let n=t[Ln].indexOf(e);n!==-1&&t[Ln].splice(n,1)}function Ys(t){let e=t[Ye];return _n(e)?e[Ye]:e}var re={lFrame:nw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function A0(){return re.lFrame.elementDepthCount}function R0(){re.lFrame.elementDepthCount++}function N0(){re.lFrame.elementDepthCount--}function YI(){return re.bindingsEnabled}function x0(){return re.skipHydrationRootTNode!==null}function M0(t){return re.skipHydrationRootTNode===t}function P0(){re.skipHydrationRootTNode=null}function _e(){return re.lFrame.lView}function bt(){return re.lFrame.tView}function yH(t){return re.lFrame.contextLView=t,t[Qe]}function vH(t){return re.lFrame.contextLView=null,t}function Ct(){let t=JI();for(;t!==null&&t.type===64;)t=t.parent;return t}function JI(){return re.lFrame.currentTNode}function O0(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function oo(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function ZI(){return re.lFrame.isParent}function k0(){re.lFrame.isParent=!1}function F0(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function L0(t){return re.lFrame.bindingIndex=t}function ao(){return re.lFrame.bindingIndex++}function V0(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function U0(){return re.lFrame.inI18n}function j0(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,hh(e)}function B0(){return re.lFrame.currentDirectiveIndex}function hh(t){re.lFrame.currentDirectiveIndex=t}function $0(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function XI(t){re.lFrame.currentQueryIndex=t}function H0(t){let e=t[X];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function ew(t,e,n){if(n&ne.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=H0(s),i===null||(s=s[Ni],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=re.lFrame=tw();return r.currentTNode=e,r.lView=t,!0}function uf(t){let e=tw(),n=t[X];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tw(){let t=re.lFrame,e=t===null?null:t.child;return e===null?nw(t):e}function nw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rw(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var iw=rw;function lf(){let t=rw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function q0(t){return(re.lFrame.contextLView=C0(t,re.lFrame.contextLView))[Qe]}function Er(){return re.lFrame.selectedIndex}function vr(t){re.lFrame.selectedIndex=t}function sw(){let t=re.lFrame;return of(t.tView,t.selectedIndex)}function _H(){re.lFrame.currentNamespace=GI}function z0(){return re.lFrame.currentNamespace}var ow=!0;function df(){return ow}function hf(t){ow=t}function G0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=HI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ff(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Tc(t,e,n){aw(t,e,3,n)}function bc(t,e,n,r){(t[$]&3)===n&&aw(t,e,n,r)}function qd(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function aw(t,e,n,r){let i=r!==void 0?t[mi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[mi]+=65536),(a<s||s==-1)&&(W0(t,n,e,u),t[mi]=(t[mi]&4294901760)+u+2),u++}function B_(t,e){Kt(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Kt(5,t,e)}}function W0(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[$]>>14<t[mi]>>16&&(t[$]&3)===e&&(t[$]+=16384,B_(a,s)):B_(a,s)}var Ii=-1,_r=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function K0(t){return t instanceof _r}function Q0(t){return(t.flags&8)!==0}function Y0(t){return(t.flags&16)!==0}function cw(t){return t!==Ii}function kc(t){return t&32767}function J0(t){return t>>16}function Fc(t,e){let n=J0(t),r=e;for(;n>0;)r=r[Ni],n--;return r}var fh=!0;function Lc(t){let e=fh;return fh=t,e}var Z0=256,uw=Z0-1,lw=5,X0=0,Qt={};function eA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty($s)&&(r=n[$s]),r==null&&(r=n[$s]=X0++);let i=r&uw,s=1<<i;e.data[t+(i>>lw)]|=s}function Vc(t,e){let n=dw(t,e);if(n!==-1)return n;let r=e[X];r.firstCreatePass&&(t.injectorIndex=e.length,zd(r.data,t),zd(e,null),zd(r.blueprint,null));let i=pf(t,e),s=t.injectorIndex;if(cw(i)){let o=kc(i),a=Fc(i,e),u=a[X].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function zd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function pf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=mw(i),r===null)return Ii;if(n++,i=i[Ni],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ii}function ph(t,e,n){eA(t,e,n)}function tA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(DI(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function hw(t,e,n){if(n&ne.Optional||t!==void 0)return t;Jh(e,"NodeInjector")}function fw(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[Ti],s=ut(void 0);try{return i?i.get(e,r,n&ne.Optional):vI(e,r,n&ne.Optional)}finally{ut(s)}}return hw(r,e,n)}function pw(t,e,n,r=ne.Default,i){if(t!==null){if(e[$]&2048&&!(r&ne.Self)){let o=oA(t,e,n,r,Qt);if(o!==Qt)return o}let s=gw(t,e,n,r,Qt);if(s!==Qt)return s}return fw(e,n,r,i)}function gw(t,e,n,r,i){let s=iA(n);if(typeof s=="function"){if(!ew(e,t,r))return r&ne.Host?hw(i,n,r):fw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ne.Optional))Jh(n);else return o}finally{iw()}}else if(typeof s=="number"){let o=null,a=dw(t,e),u=Ii,l=r&ne.Host?e[Bt][Ht]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?pf(t,e):e[a+8],u===Ii||!H_(r,!1)?a=-1:(o=e[X],a=kc(u),e=Fc(u,e)));a!==-1;){let h=e[X];if($_(s,a,h.data)){let p=nA(a,e,n,o,r,l);if(p!==Qt)return p}u=e[a+8],u!==Ii&&H_(r,e[X].data[a+8]===l)&&$_(s,a,e)?(o=h,a=kc(u),e=Fc(u,e)):a=-1}}return i}function nA(t,e,n,r,i,s){let o=e[X],a=o.data[t+8],u=r==null?nu(a)&&fh:r!=o&&(a.type&3)!==0,l=i&ne.Host&&s===a,h=rA(a,o,n,u,l);return h!==null?Ci(e,o,h,a):Qt}function rA(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let A=o[v];if(v<u&&n===A||v>=u&&A.type===n)return v}if(i){let v=o[u];if(v&&Un(v)&&v.type===n)return u}return null}function Ci(t,e,n,r){let i=t[n],s=e.data;if(K0(i)){let o=i;o.resolving&&RS(AS(s[n]));let a=Lc(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?ut(o.injectImpl):null,h=ew(t,r,ne.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&G0(n,s[n],e)}finally{l!==null&&ut(l),Lc(a),o.resolving=!1,iw()}}return i}function iA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty($s)?t[$s]:void 0;return typeof e=="number"?e>=0?e&uw:sA:e}function $_(t,e,n){let r=1<<t;return!!(n[e+(t>>lw)]&r)}function H_(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var pr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return pw(this._tNode,this._lView,e,Jc(r),n)}};function sA(){return new pr(Ct(),_e())}function gf(t){return ro(()=>{let e=t.prototype.constructor,n=e[Ac]||gh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ac]||gh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function gh(t){return hI(t)?()=>{let e=gh(it(t));return e&&e()}:gr(t)}function oA(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let a=gw(s,o,n,r|ne.Self,Qt);if(a!==Qt)return a;let u=s.parent;if(!u){let l=o[UI];if(l){let h=l.get(n,Qt,r);if(h!==Qt)return h}u=mw(o),o=o[Ni]}s=u}return i}function mw(t){let e=t[X],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function mf(t){return tA(Ct(),t)}function q_(t,e=null,n=null,r){let i=yw(t,e,n,r);return i.resolveInjectorInitializers(),i}function yw(t,e=null,n=null,r,i=new Set){let s=[n||Et,i0(t)];return r=r||(typeof t=="object"?void 0:lt(t)),new zs(s,e||nf(),r||null,i)}var St=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return q_({name:""},i,r,"");{let s=r.name??"";return q_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Hs,e.NULL=new xc,e.\u0275prov=z({token:e,providedIn:"any",factory:()=>ae(II)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var aA="ngOriginalError";function Gd(t){return t[aA]}var $t=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gd(e);for(;n&&Gd(n);)n=Gd(n);return n||null}},vw=new ee("",{providedIn:"root",factory:()=>k($t).handleError.bind(void 0)}),ru=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cA,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),mh=class extends ru{constructor(e){super(),this._lView=e}onDestroy(e){return QI(this._lView,e),()=>S0(this._lView,e)}};function cA(){return new mh(_e())}function uA(){return yf(Ct(),_e())}function yf(t,e){return new co(Tt(t,e))}var co=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=uA;let t=e;return t})();var yh=class extends Ke{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,LI()&&(this.destroyRef=k(ru,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Wd(s),i&&(i=Wd(i)),o&&(o=Wd(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}};function Wd(t){return e=>{setTimeout(t,void 0,e)}}var Lt=yh;function _w(t){return(t.flags&128)===128}var Iw=new Map,lA=0;function dA(){return lA++}function hA(t){Iw.set(t[tu],t)}function fA(t){Iw.delete(t[tu])}var z_="__ngContext__";function Ir(t,e){fr(e)?(t[z_]=e[tu],hA(e)):t[z_]=e}function ww(t){return Dw(t[Ks])}function Ew(t){return Dw(t[Vt])}function Dw(t){for(;t!==null&&!_n(t);)t=t[Vt];return t}var vh;function Tw(t){vh=t}function pA(){if(vh!==void 0)return vh;if(typeof document<"u")return document;throw new B(210,!1)}var vf=new ee("",{providedIn:"root",factory:()=>gA}),gA="ng",_f=new ee(""),In=new ee("",{providedIn:"platform",factory:()=>"unknown"});var If=new ee("",{providedIn:"root",factory:()=>pA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mA="h",yA="b";var vA=()=>null;function wf(t,e,n=!1){return vA(t,e,n)}var bw=!1,_A=new ee("",{providedIn:"root",factory:()=>bw});var _c;function IA(){if(_c===void 0&&(_c=null,hr.trustedTypes))try{_c=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _c}function G_(t){return IA()?.createScriptURL(t)||t}var Uc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lI})`}};function uo(t){return t instanceof Uc?t.changingThisBreaksApplicationSecurity:t}function Ef(t,e){let n=wA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lI})`)}return n===e}function wA(t){return t instanceof Uc&&t.getTypeName()||null}var EA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cw(t){return t=String(t),t.match(EA)?t:"unsafe:"+t}var iu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(iu||{});function DA(t){let e=Aw();return e?e.sanitize(iu.URL,t)||"":Ef(t,"URL")?uo(t):Cw(Yc(t))}function TA(t){let e=Aw();if(e)return G_(e.sanitize(iu.RESOURCE_URL,t)||"");if(Ef(t,"ResourceURL"))return G_(uo(t));throw new B(904,!1)}function bA(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?TA:DA}function Sw(t,e,n){return bA(e,n)(t)}function Aw(){let t=_e();return t&&t[jt].sanitizer}function Rw(t){return t instanceof Function?t():t}function CA(t){return(t??k(St)).get(In)==="browser"}var mn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(mn||{}),SA;function Df(t,e){return SA(t,e)}function yi(t,e,n,r,i){if(r!=null){let s,o=!1;_n(r)?s=r:fr(r)&&(o=!0,r=r[vn]);let a=Jt(r);t===0&&n!==null?i==null?Pw(e,n,a):jc(e,n,a,i||null,!0):t===1&&n!==null?jc(e,n,a,i||null,!0):t===2?qA(e,a,o):t===3&&e.destroyNode(a),s!=null&&GA(e,t,s,n,i)}}function AA(t,e){return t.createText(e)}function RA(t,e,n){t.setValue(e,n)}function Nw(t,e,n){return t.createElement(e,n)}function NA(t,e){xw(t,e),e[vn]=null,e[Ht]=null}function xA(t,e,n,r,i,s){r[vn]=i,r[Ht]=e,ou(t,r,n,1,i,s)}function xw(t,e){e[jt].changeDetectionScheduler?.notify(1),ou(t,e,e[Be],2,null,null)}function MA(t){let e=t[Ks];if(!e)return Kd(t[X],t);for(;e;){let n=null;if(fr(e))n=e[Ks];else{let r=e[st];r&&(n=r)}if(!n){for(;e&&!e[Vt]&&e!==t;)fr(e)&&Kd(e[X],e),e=e[Ye];e===null&&(e=t),fr(e)&&Kd(e[X],e),n=e&&e[Vt]}e=n}}function PA(t,e,n,r){let i=st+r,s=n.length;r>0&&(n[i-1][Vt]=e),r<s-st?(e[Vt]=n[i],_I(n,st+r,e)):(n.push(e),e[Vt]=null),e[Ye]=n;let o=e[eu];o!==null&&n!==o&&OA(o,e);let a=e[bi];a!==null&&a.insertView(t),dh(e),e[$]|=128}function OA(t,e){let n=t[Pc],i=e[Ye][Ye][Bt];e[Bt]!==i&&(t[$]|=rf.HasTransplantedViews),n===null?t[Pc]=[e]:n.push(e)}function Mw(t,e){let n=t[Pc],r=n.indexOf(e);n.splice(r,1)}function Js(t,e){if(t.length<=st)return;let n=st+e,r=t[n];if(r){let i=r[eu];i!==null&&i!==t&&Mw(i,r),e>0&&(t[n-1][Vt]=r[Vt]);let s=Nc(t,st+e);NA(r[X],r);let o=s[bi];o!==null&&o.detachView(s[X]),r[Ye]=null,r[Vt]=null,r[$]&=-129}return r}function su(t,e){if(!(e[$]&256)){let n=e[Be];n.destroyNode&&ou(t,e,n,3,null,null),MA(e)}}function Kd(t,e){if(e[$]&256)return;let n=se(null);try{e[$]&=-129,e[$]|=256,e[mr]&&jd(e[mr]),FA(t,e),kA(t,e),e[X].type===1&&e[Be].destroy();let r=e[eu];if(r!==null&&_n(e[Ye])){r!==e[Ye]&&Mw(r,e);let i=e[bi];i!==null&&i.detachView(t)}fA(e)}finally{se(n)}}function kA(t,e){let n=t.cleanup,r=e[Ws];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ws]=null);let i=e[Ln];if(i!==null){e[Ln]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function FA(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof _r)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Kt(4,a,u);try{u.call(a)}finally{Kt(5,a,u)}}else{Kt(4,i,s);try{s.call(i)}finally{Kt(5,i,s)}}}}}function LA(t,e,n){return VA(t,e.parent,n)}function VA(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[vn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Yt.None||s===Yt.Emulated)return null}return Tt(r,n)}}function jc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Pw(t,e,n){t.appendChild(e,n)}function W_(t,e,n,r,i){r!==null?jc(t,e,n,r,i):Pw(t,e,n)}function UA(t,e,n,r){t.removeChild(e,n,r)}function Tf(t,e){return t.parentNode(e)}function jA(t,e){return t.nextSibling(e)}function BA(t,e,n){return HA(t,e,n)}function $A(t,e,n){return t.type&40?Tt(t,n):null}var HA=$A,K_;function bf(t,e,n,r){let i=LA(t,r,e),s=e[Be],o=r.parent||e[Ht],a=BA(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)W_(s,i,n[u],a,!1);else W_(s,i,n,a,!1);K_!==void 0&&K_(s,r,e,n,i)}function Cc(t,e){if(e!==null){let n=e.type;if(n&3)return Tt(e,t);if(n&4)return _h(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cc(t,r);{let i=t[e.index];return _n(i)?_h(-1,i):Jt(i)}}else{if(n&32)return Df(e,t)()||Jt(t[e.index]);{let r=Ow(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ys(t[Bt]);return Cc(i,r)}else return Cc(t,e.next)}}}return null}function Ow(t,e){if(e!==null){let r=t[Bt][Ht],i=e.projection;return r.projection[i]}return null}function _h(t,e){let n=st+t+1;if(n<e.length){let r=e[n],i=r[X].firstChild;if(i!==null)return Cc(r,i)}return e[yr]}function qA(t,e,n){let r=Tf(t,e);r&&UA(t,r,e,n)}function Cf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Ir(Jt(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Cf(t,e,n.child,r,i,s,!1),yi(e,t,i,a,s);else if(u&32){let l=Df(n,r),h;for(;h=l();)yi(e,t,i,h,s);yi(e,t,i,a,s)}else u&16?zA(t,e,r,n,i,s):yi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ou(t,e,n,r,i,s){Cf(n,r,t.firstChild,e,i,s,!1)}function zA(t,e,n,r,i,s){let o=n[Bt],u=o[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];yi(e,t,i,h,s)}else{let l=u,h=o[Ye];_w(r)&&(l.flags|=128),Cf(t,e,l,h,i,s,!0)}}function GA(t,e,n,r,i){let s=n[yr],o=Jt(n);s!==o&&yi(e,t,r,s,i);for(let a=st;a<n.length;a++){let u=n[a];ou(u[X],u,t,e,r,s)}}function WA(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:mn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=mn.Important),t.setStyle(n,r,i,s))}}function KA(t,e,n){t.setAttribute(e,"style",n)}function kw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Fw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&oh(t,e,r),i!==null&&kw(t,e,i),s!==null&&KA(t,e,s)}var Dr={};function IH(t=1){Lw(bt(),_e(),Er()+t,!1)}function Lw(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Tc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&bc(e,s,0,n)}vr(n)}function At(t,e=ne.Default){let n=_e();if(n===null)return ae(t,e);let r=Ct();return pw(r,n,it(t),e)}function Vw(t,e,n,r,i,s){let o=se(null);try{let a=null;i&Ut.SignalBased&&(a=e[r][gn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ut.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):$I(e,a,r,s)}finally{se(o)}}function QA(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)vr(~i);else{let s=i,o=n[++r],a=n[++r];j0(o,s);let u=e[s];a(2,u)}}}finally{vr(-1)}}function au(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[vn]=i,p[$]=r|4|128|8|64,(l!==null||t&&t[$]&2048)&&(p[$]|=2048),KI(p),p[Ye]=p[Ni]=t,p[Qe]=n,p[jt]=o||t&&t[jt],p[Be]=a||t&&t[Be],p[Ti]=u||t&&t[Ti]||null,p[Ht]=s,p[tu]=dA(),p[Gs]=h,p[UI]=l,p[Bt]=e.type==2?t[Bt]:p,p}function cu(t,e,n,r,i){let s=t.data[e];if(s===null)s=YA(t,e,n,r,i),U0()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=O0();s.injectorIndex=o===null?-1:o.injectorIndex}return oo(s,!0),s}function YA(t,e,n,r,i){let s=JI(),o=ZI(),a=o?s:s&&s.parent,u=t.data[e]=tR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Uw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function jw(t,e,n,r,i){let s=Er(),o=r&2;try{vr(-1),o&&e.length>ft&&Lw(t,e,ft,!1),Kt(o?2:0,i),n(r,i)}finally{vr(s),Kt(o?3:1,i)}}function Bw(t,e,n){if(BI(e)){let r=se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{se(r)}}}function $w(t,e,n){YI()&&(cR(t,e,n,Tt(n,e)),(n.flags&64)===64&&Ww(t,e,n))}function Hw(t,e,n=Tt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function qw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sf(t,e,n,r,i,s,o,a,u,l,h){let p=ft+r,m=p+i,v=JA(p,m),A=typeof l=="function"?l():l;return v[X]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function JA(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Dr);return n}function ZA(t,e,n,r){let s=r.get(_A,bw)||n===Yt.ShadowDom,o=t.selectRootElement(e,s);return XA(o),o}function XA(t){eR(t)}var eR=()=>null;function tR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return x0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Q_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Ut.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Y_(r,n,l,a,u):Y_(r,n,l,a)}return r}function Y_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function nR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,A=m?m.outputs:null;u=Q_(0,p.inputs,h,u,v),l=Q_(1,p.outputs,h,l,A);let x=u!==null&&o!==null&&!Xh(e)?_R(u,h,o):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function rR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function iR(t,e,n,r,i,s,o,a){let u=Tt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Af(t,n,h,r,i),nu(e)&&sR(n,e.index)):e.type&3?(r=rR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function sR(t,e){let n=Hn(e,t);n[$]&16||(n[$]|=64)}function zw(t,e,n,r){if(YI()){let i=r===null?null:{"":-1},s=lR(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Gw(t,e,n,o,i,a),i&&dR(n,r,i)}n.mergedAttrs=qs(n.mergedAttrs,n.attrs)}function Gw(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ph(Vc(n,e),t,r[l].type);fR(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Uw(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=qs(n.mergedAttrs,h.hostAttrs),pR(t,n,e,u,h),hR(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}nR(t,n,s)}function oR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;aR(o)!=a&&o.push(a),o.push(n,r,s)}}function aR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function cR(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;nu(n)&&gR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Vc(n,e),Ir(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ci(e,t,a,n);if(Ir(l,e),o!==null&&vR(e,a-i,l,u,n,o),Un(u)){let h=Hn(n.index,e);h[Qe]=Ci(e,t,a,n)}}}function Ww(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=B0();try{vr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];hh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uR(u,l)}}finally{vr(-1),hh(o)}}function uR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(QS(e,o.selectors,!1))if(r||(r=[]),Un(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Ih(t,e,u)}else r.unshift(o),Ih(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ih(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function dR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function hR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Un(e)&&(n[""]=t)}}function fR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function pR(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=gr(i.type,!0)),o=new _r(s,Un(i),At);t.blueprint[r]=o,n[r]=o,oR(t,e,r,Uw(t,n,i.hostVars,Dr),i)}function gR(t,e,n){let r=Tt(e,t),i=qw(n),s=t[jt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=uu(t,au(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function mR(t,e,n,r,i,s){let o=Tt(t,e);yR(e[Be],o,s,t.value,n,r,i)}function yR(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Yc(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function vR(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Vw(r,n,u,l,h,p)}}function _R(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Kw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qw(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];XI(s),a.contentQueries(2,e[o],o)}}}finally{se(r)}}}function uu(t,e){return t[Ks]?t[U_][Vt]=e:t[Ks]=e,t[U_]=e,e}function wh(t,e,n){XI(0);let r=se(null);try{e(t,n)}finally{se(r)}}function IR(t){return t[Ws]||(t[Ws]=[])}function wR(t){return t.cleanup||(t.cleanup=[])}function Yw(t,e){let n=t[Ti],r=n?n.get($t,null):null;r&&r.handleError(e)}function Af(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Vw(h,l,r,a,u,i)}}function ER(t,e,n){let r=WI(e,t);RA(t[Be],r,n)}function DR(t,e){let n=Hn(e,t),r=n[X];TR(r,n);let i=n[vn];i!==null&&n[Gs]===null&&(n[Gs]=wf(i,n[Ti])),Rf(r,n,n[Qe])}function TR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rf(t,e,n){uf(e);try{let r=t.viewQuery;r!==null&&wh(1,r,n);let i=t.template;i!==null&&jw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[bi]?.finishViewCreation(t),t.staticContentQueries&&Qw(t,e),t.staticViewQueries&&wh(2,t.viewQuery,n);let s=t.components;s!==null&&bR(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,lf()}}function bR(t,e){for(let n=0;n<e.length;n++)DR(t,e[n])}function Nf(t,e,n,r){let i=se(null);try{let s=e.tView,a=t[$]&4096?4096:16,u=au(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[eu]=l;let h=t[bi];return h!==null&&(u[bi]=h.createEmbeddedView(s)),Rf(s,u,n),u}finally{se(i)}}function Jw(t,e){let n=st+e;if(n<t.length)return t[n]}function Zs(t,e){return!e||e.firstChild===null||_w(t)}function lu(t,e,n,r=!0){let i=e[X];if(PA(i,e,t,n),r){let o=_h(n,t),a=e[Be],u=Tf(a,t[yr]);u!==null&&xA(i,t[Ht],a,e,u,o)}let s=e[Gs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zw(t,e){let n=Js(t,e);return n!==void 0&&su(n[X],n),n}function Bc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Jt(s)),_n(s)&&CR(s,r);let o=n.type;if(o&8)Bc(t,e,n.child,r);else if(o&32){let a=Df(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Ow(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ys(e[Bt]);Bc(u[X],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function CR(t,e){for(let n=st;n<t.length;n++){let r=t[n],i=r[X].firstChild;i!==null&&Bc(r[X],r,i,e)}t[yr]!==t[vn]&&e.push(t[yr])}var Xw=[];function SR(t){return t[mr]??AR(t)}function AR(t){let e=Xw.pop()??Object.create(NR);return e.lView=t,e}function RR(t){t.lView[mr]!==t&&(t.lView=null,Xw.push(t))}var NR=Ee(L({},Bs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Qs(t.lView)},consumerOnSignalRead(){this.lView[mr]=this}}),eE=100;function tE(t,e=!0,n=0){let r=t[jt],i=r.rendererFactory,s=!1;s||i.begin?.();try{xR(t,n)}catch(o){throw e&&Yw(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function xR(t,e){Eh(t,e);let n=0;for(;cf(t);){if(n===eE)throw new B(103,!1);n++,Eh(t,1)}}function MR(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1;!s&&e[jt].inlineEffectRunner?.flush(),uf(e);let o=null,a=null;!s&&PR(t)&&(a=SR(e),o=pc(a));try{KI(e),L0(t.bindingStartIndex),n!==null&&jw(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Tc(e,p,null)}else{let p=t.preOrderHooks;p!==null&&bc(e,p,0,null),qd(e,0)}if(OR(e),nE(e,0),t.contentQueries!==null&&Qw(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Tc(e,p)}else{let p=t.contentHooks;p!==null&&bc(e,p,1),qd(e,1)}QA(t,e);let l=t.components;l!==null&&iE(e,l,0);let h=t.viewQuery;if(h!==null&&wh(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Tc(e,p)}else{let p=t.viewHooks;p!==null&&bc(e,p,2),qd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Dc]){for(let p of e[Dc])p();e[Dc]=null}s||(e[$]&=-73)}catch(u){throw Qs(e),u}finally{a!==null&&(gc(a,o),RR(a)),lf()}}function PR(t){return t.type!==2}function nE(t,e){for(let n=ww(t);n!==null;n=Ew(n))for(let r=st;r<n.length;r++){let i=n[r];rE(i,e)}}function OR(t){for(let e=ww(t);e!==null;e=Ew(e)){if(!(e[$]&rf.HasTransplantedViews))continue;let n=e[Pc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Ye];b0(i)}}}function kR(t,e,n){let r=Hn(e,t);rE(r,n)}function rE(t,e){af(t)&&Eh(t,e)}function Eh(t,e){let r=t[X],i=t[$],s=t[mr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&mc(s)),s&&(s.dirty=!1),t[$]&=-9217,o)MR(r,t,r.template,t[Qe]);else if(i&8192){nE(t,1);let a=r.components;a!==null&&iE(t,a,1)}}function iE(t,e,n){for(let r=0;r<e.length;r++)kR(t,e[r],n)}function xf(t){for(t[jt].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=Ys(t);if(m0(t)&&!e)return t;t=e}return null}var Si=class{get rootNodes(){let e=this._lView,n=e[X];return Bc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qe]}set context(e){this._lView[Qe]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(_n(e)){let n=e[Mc],r=n?n.indexOf(this):-1;r>-1&&(Js(e,r),Nc(n,r))}this._attachedToViewContainer=!1}su(this._lView[X],this._lView)}onDestroy(e){QI(this._lView,e)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){dh(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,tE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,xw(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,dh(this._lView)}};var wH=new RegExp(`^(\\d+)*(${yA}|${mA})*(.*)`);var FR=()=>null;function Xs(t,e){return FR(t,e)}var $c=class{},Dh=class{},Hc=class{};function LR(t){let e=Error(`No component factory found for ${lt(t)}.`);return e[VR]=t,e}var VR="ngComponent";var Th=class{resolveComponentFactory(e){throw LR(e)}},du=(()=>{let e=class e{};e.NULL=new Th;let t=e;return t})(),eo=class{},hu=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>UR();let t=e;return t})();function UR(){let t=_e(),e=Ct(),n=Hn(e.index,t);return(fr(n)?n:t)[Be]}var jR=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Qd={};var J_=new Set;function qn(t){J_.has(t)||(J_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Z_(...t){}function BR(){let t=typeof hr.requestAnimationFrame=="function",e=hr[t?"requestAnimationFrame":"setTimeout"],n=hr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var me=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lt(!1),this.onMicrotaskEmpty=new Lt(!1),this.onStable=new Lt(!1),this.onError=new Lt(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BR().nativeRequestAnimationFrame,qR(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,$R,Z_,Z_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},$R={};function Mf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function HR(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(hr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bh(t),t.isCheckStableRunning=!0,Mf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bh(t))}function qR(t){let e=()=>{HR(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(zR(a))return n.invokeTask(i,s,o,a);try{return X_(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),eI(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return X_(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),eI(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,bh(t),Mf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function bh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function X_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function eI(t){t._nesting--,Mf(t)}function zR(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var vi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(vi||{}),GR={destroy(){}};function Pf(t,e){!e&&VI(Pf);let n=e?.injector??k(St);if(!CA(n))return GR;qn("NgAfterNextRender");let r=n.get(Of),i=r.handler??=new Sh,s=e?.phase??vi.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(ru).onDestroy(o),u=yn(n,()=>new Ch(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var Ch=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=k(me),this.errorHandler=k($t,{optional:!0}),k($c,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Sh=class{constructor(){this.executingCallbacks=!1,this.buckets={[vi.EarlyRead]:new Set,[vi.Write]:new Set,[vi.MixedReadWrite]:new Set,[vi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Of=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Ah(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=R_(i,a);else if(s==2){let u=a,l=e[++o];r=R_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qc=class extends du{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Vn(e);return new Ai(n,this.ngModule)}};function tI(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function WR(t){let e=t.toLowerCase();return e==="svg"?GI:e==="math"?I0:null}var Rh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Jc(r);let i=this.injector.get(e,Qd,r);return i!==Qd||n===Qd?i:this.parentInjector.get(e,n,r)}},Ai=class extends Hc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=tI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return tI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=XS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=se(null);try{i=i||this.ngModule;let o=i instanceof Dt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Rh(e,o):e,u=a.get(eo,null);if(u===null)throw new B(407,!1);let l=a.get(jR,null),h=a.get(Of,null),p=a.get($c,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},v=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=r?ZA(v,r,this.componentDef.encapsulation,a):Nw(v,A,WR(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let O=null;x!==null&&(O=wf(x,a,!0));let q=Sf(0,null,null,1,0,null,null,null,null,null,null),j=au(null,q,null,R,null,null,m,v,a,null,O);uf(j);let le,Te;try{let Y=this.componentDef,E,y=null;Y.findHostDirectiveDefs?(E=[],y=new Map,Y.findHostDirectiveDefs(Y,E,y),E.push(Y)):E=[Y];let _=KR(j,x),w=QR(_,x,Y,E,j,m,v);Te=of(q,ft),x&&ZR(v,Y,x,r),n!==void 0&&XR(Te,this.ngContentSelectors,n),le=JR(w,Y,E,y,j,[eN]),Rf(q,j,null)}finally{lf()}return new Nh(this.componentType,le,yf(Te,j),j,Te)}finally{se(s)}}},Nh=class extends Dh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Si(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Af(s[X],s,i,e,n),this.previousInputValues.set(e,n);let o=Hn(this._tNode.index,s);xf(o)}}get injector(){return new pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KR(t,e){let n=t[X],r=ft;return t[r]=e,cu(n,r,2,"#host",null)}function QR(t,e,n,r,i,s,o){let a=i[X];YR(r,t,e,o);let u=null;e!==null&&(u=wf(e,i[Ti]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=au(i,qw(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Ih(a,t,r.length-1),uu(i,p),i[t.index]=p}function YR(t,e,n,r){for(let i of t)e.mergedAttrs=qs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ah(e,e.mergedAttrs,!0),n!==null&&Fw(r,n,e))}function JR(t,e,n,r,i,s){let o=Ct(),a=i[X],u=Tt(o,i);Gw(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ci(i,a,p,o);Ir(m,i)}Ww(a,i,o),u&&Ir(u,i);let l=Ci(i,a,o.directiveStart+o.componentOffset,o);if(t[Qe]=i[Qe]=l,s!==null)for(let h of s)h(l,e);return Bw(a,o,i),l}function ZR(t,e,n,r){if(r)oh(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=e0(e.selectors[0]);i&&oh(t,n,i),s&&s.length>0&&kw(t,n,s.join(" "))}}function XR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function eN(){let t=Ct();ff(_e()[X],t)}var fu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tN;let t=e;return t})();function tN(){let t=Ct();return rN(t,_e())}var nN=fu,sE=class extends nN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return yf(this._hostTNode,this._hostLView)}get injector(){return new pr(this._hostTNode,this._hostLView)}get parentInjector(){let e=pf(this._hostTNode,this._hostLView);if(cw(e)){let n=Fc(e,this._hostLView),r=kc(e),i=n[X].data[r+8];return new pr(i,n)}else return new pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-st}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Xs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Zs(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!g0(e),a;if(o)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Ai(Vn(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?l:this.parentInjector).get(Dt,null);x&&(s=x)}let h=Vn(u.componentType??{}),p=Xs(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,Zs(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(T0(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ye],l=new sE(u,u[Ht],u[Ye]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return lu(o,i,s,r),e.attachToViewContainerRef(),_I(Yd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Js(this._lContainer,n);r&&(Nc(Yd(this._lContainer),n),su(r[X],r))}detach(e){let n=this._adjustIndex(e,-1),r=Js(this._lContainer,n);return r&&Nc(Yd(this._lContainer),n)!=null?new Si(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nI(t){return t[Mc]}function Yd(t){return t[Mc]||(t[Mc]=[])}function rN(t,e){let n,r=e[t.index];return _n(r)?n=r:(n=Kw(r,e,null,t),e[t.index]=n,uu(e,n)),sN(n,e,t,r),new sE(n,t,e)}function iN(t,e){let n=t[Be],r=n.createComment(""),i=Tt(e,t),s=Tf(n,i);return jc(n,s,r,jA(n,i),!1),r}var sN=cN,oN=()=>!1;function aN(t,e,n){return oN(t,e,n)}function cN(t,e,n,r){if(t[yr])return;let i;n.type&8?i=Jt(r):i=iN(e,n),t[yr]=i}function DH(t,e){qn("NgSignals");let n=b_(t),r=n[gn];return e?.equal&&(r.equal=e.equal),n.set=i=>Bd(r,i),n.update=i=>C_(r,i),n.asReadonly=uN.bind(n),n}function uN(){let t=this[gn];if(t.readonlyFn===void 0){let e=()=>this();e[gn]=t,t.readonlyFn=e}return t.readonlyFn}function lN(t){return Object.getPrototypeOf(t.prototype).constructor}function dN(t){let e=lN(t.type),n=!0,r=[t];for(;e;){let i;if(Un(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ic(t.inputs),o.inputTransforms=Ic(t.inputTransforms),o.declaredInputs=Ic(t.declaredInputs),o.outputs=Ic(t.outputs);let a=i.hostBindings;a&&mN(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&pN(t,u),l&&gN(t,l),hN(t,i),IS(t.outputs,i.outputs),Un(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===dN&&(n=!1)}}e=Object.getPrototypeOf(e)}fN(r)}function hN(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function fN(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qs(i.hostAttrs,n=qs(n,i.hostAttrs))}}function Ic(t){return t===wi?{}:t===Et?[]:t}function pN(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function gN(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function mN(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function kf(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var jn=class{},to=class{};var xh=class extends jn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qc(this);let i=NI(e);this._bootstrapComponents=Rw(i.bootstrap),this._r3Injector=yw(e,n,[{provide:jn,useValue:this},{provide:du,useValue:this.componentFactoryResolver},...r],lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mh=class extends to{constructor(e){super(),this.moduleType=e}create(e){return new xh(this.moduleType,e,[])}};var zc=class extends jn{constructor(e){super(),this.componentFactoryResolver=new qc(this),this.instance=null;let n=new zs([...e.providers,{provide:jn,useValue:this},{provide:du,useValue:this.componentFactoryResolver}],e.parent||nf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ff(t,e,n=null){return new zc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var lo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yN(t,e,n){return t[e]=n}function Tr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function vN(t){return(t.flags&32)===32}function _N(t,e,n,r,i,s,o,a,u){let l=e.consts,h=cu(e,t,4,o||null,Oc(l,a));zw(e,n,h,Oc(l,u)),ff(e,h);let p=h.tView=Sf(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Ph(t,e,n,r,i,s,o,a){let u=_e(),l=bt(),h=t+ft,p=l.firstCreatePass?_N(h,l,u,e,n,r,i,s,o):l.data[h];oo(p,!1);let m=IN(l,u,p,t);df()&&bf(l,u,m,p),Ir(m,u);let v=Kw(m,u,m,p);return u[h]=v,uu(u,v),aN(v,p,u),sf(p)&&$w(l,u,p),o!=null&&Hw(u,p,a),Ph}var IN=wN;function wN(t,e,n,r){return hf(!0),e[Be].createComment("")}function Lf(t,e,n,r){let i=_e(),s=ao();if(Tr(i,s,e)){let o=bt(),a=sw();mR(a,i,t,e,n,r)}return Lf}function EN(t,e,n,r){return Tr(t,ao(),n)?e+Yc(n)+r:Dr}function wc(t,e){return t<<17|e<<2}function wr(t){return t>>17&32767}function DN(t){return(t&2)==2}function TN(t,e){return t&131071|e<<17}function Oh(t){return t|2}function Ri(t){return(t&131068)>>2}function Jd(t,e){return t&-131069|e<<2}function bN(t){return(t&1)===1}function kh(t){return t|1}function CN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wr(o),u=Ri(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||io(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=wr(t[a+1]);t[r+1]=wc(m,a),m!==0&&(t[m+1]=Jd(t[m+1],r)),t[a+1]=TN(t[a+1],r)}else t[r+1]=wc(a,0),a!==0&&(t[a+1]=Jd(t[a+1],r)),a=r;else t[r+1]=wc(u,0),a===0?a=r:t[u+1]=Jd(t[u+1],r),u=r;l&&(t[r+1]=Oh(t[r+1])),rI(t,h,r,!0),rI(t,h,r,!1),SN(e,h,t,r,s),o=wc(a,u),s?e.classBindings=o:e.styleBindings=o}function SN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&io(s,e)>=0&&(n[r+1]=kh(n[r+1]))}function rI(t,e,n,r){let i=t[n+1],s=e===null,o=r?wr(i):Ri(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];AN(u,e)&&(a=!0,t[o+1]=r?kh(l):Oh(l)),o=r?wr(l):Ri(l)}a&&(t[n+1]=r?Oh(i):kh(i))}function AN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?io(t,e)>=0:!1}function RN(t,e,n){let r=_e(),i=ao();if(Tr(r,i,e)){let s=bt(),o=sw();iR(s,o,r,t,e,r[Be],n,!1)}return RN}function iI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Af(t,n,s[o],o,r)}function NN(t,e){return xN(t,e,null,!0),NN}function xN(t,e,n,r){let i=_e(),s=bt(),o=V0(2);if(s.firstUpdatePass&&PN(s,t,o,r),e!==Dr&&Tr(i,o,e)){let a=s.data[Er()];VN(s,a,i,i[Be],t,i[o+1]=UN(e,n),r,o)}}function MN(t,e){return e>=t.expandoStartIndex}function PN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Er()],o=MN(t,n);jN(s,r)&&e===null&&!o&&(e=!1),e=ON(i,s,e,r),CN(i,s,e,n,o,r)}}function ON(t,e,n,r){let i=$0(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Zd(null,t,e,n,r),n=no(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Zd(i,t,e,n,r),s===null){let u=kN(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Zd(null,t,e,u[1],r),u=no(u,e.attrs,r),FN(t,e,r,u))}else s=LN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function kN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ri(r)!==0)return t[wr(r)]}function FN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[wr(i)]=r}function LN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=no(r,o,n)}return no(r,e.attrs,n)}function Zd(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=no(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function no(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),BS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function VN(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=bN(l)?sI(u,e,n,i,Ri(l),o):void 0;if(!Gc(h)){Gc(s)||DN(l)&&(s=sI(u,null,n,i,a,o));let p=WI(Er(),n);WA(r,o,p,i,s)}}function sI(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Dr&&(m=p?Et:void 0);let v=p?$d(m,r):h===r?m:void 0;if(l&&!Gc(v)&&(v=$d(u,r)),Gc(v)&&(a=v,o))return a;let A=t[i+1];i=o?wr(A):Ri(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$d(u,r))}return a}function Gc(t){return t!==void 0}function UN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=lt(uo(t)))),t}function jN(t,e){return(t.flags&(e?8:16))!==0}var Fh=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Xd(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function BN(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let u=t.at(s),l=e[s],h=Xd(s,u,s,l,n);if(h!==0){h<0&&t.updateValue(s,l),s++;continue}let p=t.at(o),m=e[a],v=Xd(o,p,a,m,n);if(v!==0){v<0&&t.updateValue(o,m),o--,a--;continue}let A=n(s,u),x=n(o,p),R=n(s,l);if(Object.is(R,x)){let O=n(a,m);Object.is(O,A)?(t.swap(s,o),t.updateValue(o,m),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new Wc,i??=aI(t,s,o,n),Lh(t,r,s,R))t.updateValue(s,l),s++,o++;else if(i.has(R))r.set(A,t.detach(s)),o--;else{let O=t.create(s,e[s]);t.attach(s,O),s++,o++}}for(;s<=a;)oI(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&s<=o;){let l=t.at(s),h=u.value,p=Xd(s,l,s,h,n);if(p!==0)p<0&&t.updateValue(s,h),s++,u=a.next();else{r??=new Wc,i??=aI(t,s,o,n);let m=n(s,h);if(Lh(t,r,s,m))t.updateValue(s,h),s++,o++,u=a.next();else if(!i.has(m))t.attach(s,t.create(s,h)),s++,o++,u=a.next();else{let v=n(s,l);r.set(v,t.detach(s)),o--}}}for(;!u.done;)oI(t,r,n,t.length,u.value),u=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function Lh(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function oI(t,e,n,r,i){if(Lh(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function aI(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var Wc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function TH(t,e,n){qn("NgControlFlow");let r=_e(),i=ao(),s=Bh(r,ft+t),o=0;if(Tr(r,i,e)){let a=se(null);try{if(Zw(s,o),e!==-1){let u=$h(r[X],ft+e),l=Xs(s,u.tView.ssrId),h=Nf(r,u,n,{dehydratedView:l});lu(s,h,o,Zs(u,l))}}finally{se(a)}}else{let a=Jw(s,o);a!==void 0&&(a[Qe]=n)}}var Vh=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-st}};var Uh=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function bH(t,e,n,r,i,s,o,a,u,l,h,p,m){qn("NgControlFlow");let v=u!==void 0,A=_e(),x=a?o.bind(A[Bt][Qe]):o,R=new Uh(v,x);A[ft+t]=R,Ph(t+1,e,n,r,i,s),v&&Ph(t+2,u,l,h,p,m)}var jh=class extends Fh{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-st}at(e){return this.getLView(e)[Qe].$implicit}attach(e,n){let r=n[Gs];this.needsIndexUpdate||=e!==this.length,lu(this.lContainer,n,e,Zs(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$N(this.lContainer,e)}create(e,n){let r=Xs(this.lContainer,this.templateTNode.tView.ssrId);return Nf(this.hostLView,this.templateTNode,new Vh(this.lContainer,n,e),{dehydratedView:r})}destroy(e){su(e[X],e)}updateValue(e,n){this.getLView(e)[Qe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Qe].$index=e}getLView(e){return HN(this.lContainer,e)}};function CH(t){let e=se(null),n=Er();try{let r=_e(),i=r[X],s=r[n];if(s.liveCollection===void 0){let a=n+1,u=Bh(r,a),l=$h(i,a);s.liveCollection=new jh(u,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(BN(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=ao(),u=o.length===0;if(Tr(r,a,u)){let l=n+2,h=Bh(r,l);if(u){let p=$h(i,l),m=Xs(h,p.tView.ssrId),v=Nf(r,p,void 0,{dehydratedView:m});lu(h,v,0,Zs(p,m))}else Zw(h,0)}}}finally{se(e)}}function Bh(t,e){return t[e]}function $N(t,e){return Js(t,e)}function HN(t,e){return Jw(t,e)}function $h(t,e){return of(t,e)}function qN(t,e,n,r,i,s){let o=e.consts,a=Oc(o,i),u=cu(e,t,2,r,a);return zw(e,n,u,Oc(o,s)),u.attrs!==null&&Ah(u,u.attrs,!1),u.mergedAttrs!==null&&Ah(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function oE(t,e,n,r){let i=_e(),s=bt(),o=ft+t,a=i[Be],u=s.firstCreatePass?qN(o,s,i,e,n,r):s.data[o],l=zN(s,i,u,a,e,t);i[o]=l;let h=sf(u);return oo(u,!0),Fw(a,l,u),!vN(u)&&df()&&bf(s,i,l,u),A0()===0&&Ir(l,i),R0(),h&&($w(s,i,u),Bw(s,u,i)),r!==null&&Hw(i,u),oE}function aE(){let t=Ct();ZI()?k0():(t=t.parent,oo(t,!1));let e=t;M0(e)&&P0(),N0();let n=bt();return n.firstCreatePass&&(ff(n,t),BI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Q0(e)&&iI(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Y0(e)&&iI(n,e,_e(),e.stylesWithoutHost,!1),aE}function Vf(t,e,n,r){return oE(t,e,n,r),aE(),Vf}var zN=(t,e,n,r,i,s)=>(hf(!0),Nw(r,i,z0()));function SH(){return _e()}var Kc="en-US";var GN=Kc;function WN(t){typeof t=="string"&&(GN=t.toLowerCase().replace(/_/g,"-"))}function Uf(t,e,n,r){let i=_e(),s=bt(),o=Ct();return QN(s,i,i[Be],o,t,e,r),Uf}function KN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ws],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function QN(t,e,n,r,i,s,o){let a=sf(r),l=t.firstCreatePass&&wR(t),h=e[Qe],p=IR(e),m=!0;if(r.type&3||o){let x=Tt(r,e),R=o?o(x):x,O=p.length,q=o?le=>o(Jt(le[r.index])):r.index,j=null;if(!o&&a&&(j=KN(t,e,i,r.index)),j!==null){let le=j.__ngLastListenerFn__||j;le.__ngNextListenerFn__=s,j.__ngLastListenerFn__=s,m=!1}else{s=uI(r,e,h,s,!1);let le=n.listen(R,i,s);p.push(s,le),l&&l.push(i,q,O,O+1)}}else s=uI(r,e,h,s,!1);let v=r.outputs,A;if(m&&v!==null&&(A=v[i])){let x=A.length;if(x)for(let R=0;R<x;R+=2){let O=A[R],q=A[R+1],Te=e[O][q].subscribe(s),Y=p.length;p.push(s,Te),l&&l.push(i,r.index,Y,-(Y+1))}}}function cI(t,e,n,r){let i=se(null);try{return Kt(6,e,n),n(r)!==!1}catch(s){return Yw(t,s),!1}finally{Kt(7,e,n),se(i)}}function uI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Hn(t.index,e):e;xf(a);let u=cI(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=cI(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function AH(t=1){return q0(t)}function YN(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function RH(t,e=""){let n=_e(),r=bt(),i=t+ft,s=r.firstCreatePass?cu(r,i,1,e,null):r.data[i],o=JN(r,n,s,e,t);n[i]=o,df()&&bf(r,n,o,s),oo(s,!1)}var JN=(t,e,n,r,i)=>(hf(!0),AA(e[Be],r));function ZN(t){return cE("",t,""),ZN}function cE(t,e,n){let r=_e(),i=EN(r,t,e,n);return i!==Dr&&ER(r,Er(),i),cE}function XN(t,e,n){let r=bt();if(r.firstCreatePass){let i=Un(t);Hh(n,r.data,r.blueprint,i,!0),Hh(e,r.data,r.blueprint,i,!1)}}function Hh(t,e,n,r,i){if(t=it(t),Array.isArray(t))for(let s=0;s<t.length;s++)Hh(t[s],e,n,r,i);else{let s=bt(),o=_e(),a=Ct(),u=Di(t)?t:it(t.provide),l=FI(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Di(t)||!t.multi){let v=new _r(l,i,At),A=th(u,e,i?h:h+m,p);A===-1?(ph(Vc(a,o),s,u),eh(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[A]=v,o[A]=v)}else{let v=th(u,e,h+m,p),A=th(u,e,h,h+m),x=v>=0&&n[v],R=A>=0&&n[A];if(i&&!R||!i&&!x){ph(Vc(a,o),s,u);let O=nx(i?tx:ex,n.length,i,r,l);!i&&R&&(n[A].providerFactory=O),eh(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=uE(n[i?A:v],l,!i&&r);eh(s,t,v>-1?v:A,O)}!i&&r&&R&&n[A].componentProviders++}}}function eh(t,e,n,r){let i=Di(e),s=c0(e);if(i||s){let u=(s?it(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function uE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function th(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ex(t,e,n,r){return qh(this.multi,[])}function tx(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ci(n,n[X],this.providerFactory.index,r);s=a.slice(0,o),qh(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],qh(i,s);return s}function qh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function nx(t,e,n,r,i){let s=new _r(t,n,At);return s.multi=[],s.index=e,s.componentProviders=0,uE(s,i,r&&!n),s}function NH(t,e=[]){return n=>{n.providersResolver=(r,i)=>XN(r,i?i(t):t,e)}}var rx=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=PI(!1,r.type),s=i.length>0?Ff([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=z({token:e,providedIn:"environment",factory:()=>new e(ae(Dt))});let t=e;return t})();function lE(t){qn("NgStandalone"),t.getStandaloneInjector=e=>e.get(rx).getOrCreateStandaloneInjector(t)}function ix(t,e){let n=t[e];return n===Dr?void 0:n}function sx(t,e,n,r,i,s){let o=e+n;return Tr(t,o,i)?yN(t,o+1,s?r.call(s,i):r(i)):ix(t,o+1)}function xH(t,e){let n=bt(),r,i=t+ft;n.firstCreatePass?(r=ox(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=gr(r.type,!0)),o,a=ut(At);try{let u=Lc(!1),l=s();return Lc(u),YN(n,_e(),i,l),l}finally{ut(a)}}function ox(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function MH(t,e,n){let r=t+ft,i=_e(),s=D0(i,r);return ax(i,r)?sx(i,F0(),e,s.transform,n,s):s.transform(n)}function ax(t,e){return t[X].data[e].pure}var Bn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},dE=new Bn("17.3.12"),pu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var hE=new ee("");function xi(t){return!!t&&typeof t.then=="function"}function jf(t){return!!t&&typeof t.subscribe=="function"}var fE=new ee(""),pE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(fE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(xi(o))r.push(o);else if(jf(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bf=new ee("");function cx(){T_(()=>{throw new B(600,!1)})}function ux(t){return t.isBoundToModule}function lx(t,e,n){try{let r=n();return xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ho=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(vw),this.afterRenderEffectManager=k(Of),this.externalTestViews=new Set,this.beforeRender=new Ke,this.afterTick=new Ke,this.componentTypes=[],this.components=[],this.isStable=k(lo).hasPendingTasks.pipe(ie(r=>!r)),this._injector=k(Dt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Hc;if(!this._injector.get(pE).done){let v=!s&&RI(r),A=!1;throw new B(405,A)}let a;s?a=r:a=this._injector.get(du).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=ux(a)?void 0:this._injector.get(jn),l=i||a.selector,h=a.create(St.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(hE,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),nh(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new B(101,!1);let i=se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,se(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===eE)throw new B(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)dx(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>zh(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>zh(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;nh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Bf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>nh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new B(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function dx(t,e,n){!e&&!zh(t)||hx(t,n,e)}function zh(t){return cf(t)}function hx(t,e,n){let r;n?(r=0,t[$]|=1024):t[$]&64?r=0:r=1,tE(t,e,r)}var Gh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$f=(()=>{let e=class e{compileModuleSync(r){return new Mh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=NI(r),o=Rw(s.declarations).reduce((a,u)=>{let l=Vn(u);return l&&a.push(new Ai(l)),a},[]);return new Gh(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fx=(()=>{let e=class e{constructor(){this.zone=k(me),this.applicationRef=k(ho)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function px(t){return[{provide:me,useFactory:t},{provide:Ei,multi:!0,useFactory:()=>{let e=k(fx,{optional:!0});return()=>e.initialize()}},{provide:Ei,multi:!0,useFactory:()=>{let e=k(vx);return()=>{e.initialize()}}},{provide:vw,useFactory:gx}]}function gx(){let t=k(me),e=k($t);return n=>t.runOutsideAngular(()=>e.handleError(n))}function mx(t){let e=px(()=>new me(yx(t)));return $n([[],e])}function yx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var vx=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=k(me),this.pendingTasks=k(lo)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _x(){return typeof $localize<"u"&&$localize.locale||Kc}var Hf=new ee("",{providedIn:"root",factory:()=>k(Hf,ne.Optional|ne.SkipSelf)||_x()});var gE=new ee("");var Sc=null;function Ix(t=[],e){return St.create({name:e,providers:[{provide:Xc,useValue:"platform"},{provide:gE,useValue:new Set([()=>Sc=null])},...t]})}function wx(t=[]){if(Sc)return Sc;let e=Ix(t);return Sc=e,cx(),Ex(e),e}function Ex(t){t.get(_f,null)?.forEach(n=>n())}var br=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Dx;let t=e;return t})();function Dx(t){return Tx(Ct(),_e(),(t&16)===16)}function Tx(t,e,n){if(nu(t)&&!n){let r=Hn(t.index,e);return new Si(r,r)}else if(t.type&47){let r=e[Bt];return new Si(r,e)}return null}function mE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=wx(r),s=[mx(),...n||[]],a=new zc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(me);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get($t,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:v=>{l.handleError(v)}})});let p=()=>a.destroy(),m=i.get(gE);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),lx(l,u,()=>{let v=a.get(pE);return v.runInitializers(),v.donePromise.then(()=>{let A=a.get(Hf,Kc);WN(A||Kc);let x=a.get(ho);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function fo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function PH(t,e){qn("NgSignals");let n=w_(t);return e?.equal&&(n[gn].equal=e.equal),n}function qf(t){let e=se(null);try{return t()}finally{se(e)}}var bx=new ee("",{providedIn:"root",factory:()=>k(Cx)}),Cx=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>new Wh});let t=e;return t})(),Wh=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=k(lo),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Kh=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=A_(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get($t,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Sx(t,e){qn("NgSignals"),!e?.injector&&VI(Sx);let n=e?.injector??k(St),r=e?.manualCleanup!==!0?n.get(ru):null,i=new Kh(n.get(bx),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(br,null,{optional:!0});return!s||!(s._lView[$]&8)?i.watcher.notify():(s._lView[Dc]??=[]).push(i.watcher.notify),i}function yE(t){let e=Vn(t);if(!e)return null;let n=new Ai(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var IE=null;function Mi(){return IE}function wE(t){IE??=t}var mu=class{};var pt=new ee(""),EE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(Ax),providedIn:"platform"});let t=e;return t})();var Ax=(()=>{let e=class e extends EE{constructor(){super(),this._doc=k(pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mi().getBaseHref(this._doc)}onPopState(r){let i=Mi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Mi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function DE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function vE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Cr(t){return t&&t[0]!=="?"?"?"+t:t}var Pi=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(TE),providedIn:"root"});let t=e;return t})(),Rx=new ee(""),TE=(()=>{let e=class e extends Pi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return DE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Cr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Cr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(ae(EE),ae(Rx,8))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var po=(()=>{let e=class e{constructor(r){this._subject=new Lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Mx(vE(_E(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Cr(i))}normalize(r){return e.stripTrailingSlash(xx(this._basePath,_E(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Cr,e.joinWithSlash=DE,e.stripTrailingSlash=vE,e.\u0275fac=function(i){return new(i||e)(ae(Pi))},e.\u0275prov=z({token:e,factory:()=>Nx(),providedIn:"root"});let t=e;return t})();function Nx(){return new po(ae(Pi))}function xx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function _E(t){return t.replace(/\/index.html$/,"")}function Mx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function Px(t,e){return new B(2100,!1)}var zf=class{createSubscription(e,n){return qf(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){qf(()=>e.unsubscribe())}},Gf=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},Ox=new Gf,kx=new zf,sq=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(xi(r))return Ox;if(jf(r))return kx;throw Px(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(At(br,16))},e.\u0275pipe=CI({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var CE="browser",Fx="server";function Wf(t){return t===Fx}var yu=class{};var Yf=class extends mu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Jf=class t extends Yf{static makeCurrent(){wE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Vx();return n==null?null:Ux(n)}resetBaseElement(){go=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bE(document.cookie,e)}},go=null;function Vx(){return go=go||document.querySelector("base"),go?go.getAttribute("href"):null}function Ux(t){return new URL(t,document.baseURI).pathname}var jx=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Zf=new ee(""),NE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(ae(Zf),ae(me))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),vu=class{constructor(e){this._doc=e}},Kf="ng-app-id",xE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Kf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Kf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Kf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(ae(pt),ae(vf),ae(If,8),ae(In))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ep=/%COMP%/g,ME="%COMP%",Bx=`_nghost-${ME}`,$x=`_ngcontent-${ME}`,Hx=!0,qx=new ee("",{providedIn:"root",factory:()=>Hx});function zx(t){return $x.replace(ep,t)}function Gx(t){return Bx.replace(ep,t)}function PE(t,e){return e.map(n=>n.replace(ep,t))}var SE=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Wf(u),this.defaultRenderer=new mo(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Yt.ShadowDom&&(i=Ee(L({},i),{encapsulation:Yt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof _u?s.applyToHost(r):s instanceof yo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Yt.Emulated:o=new _u(l,h,i,this.appId,p,a,u,m);break;case Yt.ShadowDom:return new Xf(l,h,r,i,a,u,this.nonce,m);default:o=new yo(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(ae(NE),ae(xE),ae(vf),ae(qx),ae(pt),ae(In),ae(me),ae(If))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),mo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Qf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(AE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(AE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Qf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Qf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(mn.DashCase|mn.Important)?e.style.setProperty(n,r,i&mn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&mn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Mi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function AE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Xf=class extends mo{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=PE(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yo=class extends mo{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?PE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_u=class extends yo{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=zx(l),this.hostAttr=Gx(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Wx=(()=>{let e=class e extends vu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(ae(pt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),RE=["alt","control","meta","shift"],Kx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qx={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Yx=(()=>{let e=class e extends vu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),RE.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Kx[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),RE.forEach(a=>{if(a!==s){let u=Qx[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(ae(pt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function xq(t,e){return mE(L({rootComponent:t},Jx(e)))}function Jx(t){return{appProviders:[...nM,...t?.providers??[]],platformProviders:tM}}function Zx(){Jf.makeCurrent()}function Xx(){return new $t}function eM(){return Tw(document),document}var tM=[{provide:In,useValue:CE},{provide:_f,useValue:Zx,multi:!0},{provide:pt,useFactory:eM,deps:[]}];var nM=[{provide:Xc,useValue:"root"},{provide:$t,useFactory:Xx,deps:[]},{provide:Zf,useClass:Wx,multi:!0,deps:[pt,me,In]},{provide:Zf,useClass:Yx,multi:!0,deps:[pt]},SE,xE,NE,{provide:eo,useExisting:SE},{provide:yu,useClass:jx,deps:[]},[]];var OE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(ae(pt))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J="primary",Mo=Symbol("RouteTitle"),sp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vi(t){return new sp(t)}function iM(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function sM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xt(t[n],e[n]))return!1;return!0}function Xt(t,e){let n=t?op(t):void 0,r=e?op(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!BE(t[i],e[i]))return!1;return!0}function op(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function BE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function $E(t){return t.length>0?t[t.length-1]:null}function Kn(t){return xd(t)?t:xi(t)?Ne(Promise.resolve(t)):K(t)}var oM={exact:qE,subset:zE},HE={exact:aM,subset:cM,ignored:()=>!0};function kE(t,e,n){return oM[n.paths](t.root,e.root,n.matrixParams)&&HE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function aM(t,e){return Xt(t,e)}function qE(t,e,n){if(!Ar(t.segments,e.segments)||!Eu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!qE(t.children[r],e.children[r],n))return!1;return!0}function cM(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>BE(t[n],e[n]))}function zE(t,e,n){return GE(t,e,e.segments,n)}function GE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ar(i,n)||e.hasChildren()||!Eu(i,n,r))}else if(t.segments.length===n.length){if(!Ar(t.segments,n)||!Eu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!zE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ar(t.segments,i)||!Eu(t.segments,i,r)||!t.children[J]?!1:GE(t.children[J],e,s,r)}}function Eu(t,e,n){return e.every((r,i)=>HE[n](t[i].parameters,r.parameters))}var zn=class{constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vi(this.queryParams),this._queryParamMap}toString(){return dM.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Du(this)}},Sr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Vi(this.parameters),this._parameterMap}toString(){return KE(this)}};function uM(t,e){return Ar(t,e)&&t.every((n,r)=>Xt(n.parameters,e[r].parameters))}function Ar(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function lM(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===J&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==J&&(n=n.concat(e(i,r)))}),n}var Mp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new bu,providedIn:"root"});let t=e;return t})(),bu=class{parse(e){let n=new cp(e);return new zn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${vo(e.root,!0)}`,r=pM(e.queryParams),i=typeof e.fragment=="string"?`#${hM(e.fragment)}`:"";return`${n}${r}${i}`}},dM=new bu;function Du(t){return t.segments.map(e=>KE(e)).join("/")}function vo(t,e){if(!t.hasChildren())return Du(t);if(e){let n=t.children[J]?vo(t.children[J],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==J&&r.push(`${i}:${vo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=lM(t,(r,i)=>i===J?[vo(t.children[J],!1)]:[`${i}:${vo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[J]!=null?`${Du(t)}/${n[0]}`:`${Du(t)}/(${n.join("//")})`}}function WE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iu(t){return WE(t).replace(/%3B/gi,";")}function hM(t){return encodeURI(t)}function ap(t){return WE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tu(t){return decodeURIComponent(t)}function FE(t){return Tu(t.replace(/\+/g,"%20"))}function KE(t){return`${ap(t.path)}${fM(t.parameters)}`}function fM(t){return Object.entries(t).map(([e,n])=>`;${ap(e)}=${ap(n)}`).join("")}function pM(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Iu(n)}=${Iu(i)}`).join("&"):`${Iu(n)}=${Iu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var gM=/^[^\/()?;#]+/;function tp(t){let e=t.match(gM);return e?e[0]:""}var mM=/^[^\/()?;=#]+/;function yM(t){let e=t.match(mM);return e?e[0]:""}var vM=/^[^=?&#]+/;function _M(t){let e=t.match(vM);return e?e[0]:""}var IM=/^[^&#]+/;function wM(t){let e=t.match(IM);return e?e[0]:""}var cp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new ge(e,n)),r}parseSegment(){let e=tp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new Sr(Tu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=yM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=tp(this.remaining);i&&(r=i,this.capture(r))}e[Tu(n)]=Tu(r)}parseQueryParam(e){let n=_M(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=wM(this.remaining);o&&(r=o,this.capture(r))}let i=FE(n),s=FE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[J]:new ge([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function QE(t){return t.segments.length>0?new ge([],{[J]:t}):t}function YE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=YE(i);if(r===J&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ge(t.segments,e);return EM(n)}function EM(t){if(t.numberOfChildren===1&&t.children[J]){let e=t.children[J];return new ge(t.segments.concat(e.segments),e.children)}return t}function Ui(t){return t instanceof zn}function DM(t,e,n=null,r=null){let i=JE(t);return ZE(i,e,n,r)}function JE(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ge(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=QE(r);return e??i}function ZE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return np(i,i,i,n,r);let s=TM(e);if(s.toRoot())return np(i,i,new ge([],{}),n,r);let o=bM(s,i,t),a=o.processChildren?wo(o.segmentGroup,o.index,s.commands):eD(o.segmentGroup,o.index,s.commands);return np(i,o.segmentGroup,a,n,r)}function Cu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function To(t){return typeof t=="object"&&t!=null&&t.outlets}function np(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=XE(t,e,n);let a=QE(YE(o));return new zn(a,s,i)}function XE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=XE(s,e,n)}),new ge(t.segments,r)}var Su=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Cu(r[0]))throw new B(4003,!1);let i=r.find(To);if(i&&i!==$E(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TM(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Su(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Su(n,e,r)}var Fi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function bM(t,e,n){if(t.isAbsolute)return new Fi(e,!0,0);if(!n)return new Fi(e,!1,NaN);if(n.parent===null)return new Fi(n,!0,0);let r=Cu(t.commands[0])?0:1,i=n.segments.length-1+r;return CM(n,i,t.numberOfDoubleDots)}function CM(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Fi(r,!1,i-s)}function SM(t){return To(t[0])?t[0].outlets:{[J]:t}}function eD(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return wo(t,e,n);let r=AM(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ge(t.segments.slice(0,r.pathIndex),{});return s.children[J]=new ge(t.segments.slice(r.pathIndex),t.children),wo(s,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?up(t,e,n):r.match?wo(t,0,i):up(t,e,n)}function wo(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=SM(n),i={};if(Object.keys(r).some(s=>s!==J)&&t.children[J]&&t.numberOfChildren===1&&t.children[J].segments.length===0){let s=wo(t.children[J],e,n);return new ge(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=eD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ge(t.segments,i)}}function AM(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(To(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!VE(u,l,o))return s;r+=2}else{if(!VE(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function up(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(To(s)){let u=RM(s.outlets);return new ge(r,u)}if(i===0&&Cu(n[0])){let u=t.segments[e];r.push(new Sr(u.path,LE(n[0]))),i++;continue}let o=To(s)?s.outlets[J]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Cu(a)?(r.push(new Sr(o,LE(a))),i+=2):(r.push(new Sr(o,{})),i++)}return new ge(r,{})}function RM(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=up(new ge([],{}),0,r))}),e}function LE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function VE(t,e,n){return t==n.path&&Xt(e,n.parameters)}var Eo="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),Rt=class{constructor(e,n){this.id=e,this.url=n}},bo=class extends Rt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gn=class extends Rt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(mt||{}),lp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(lp||{}),Wn=class extends Rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends Rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},Co=class extends Rt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Au=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends Rt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fp=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pp=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mp=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yp=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ip=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var So=class{},Ao=class{constructor(e){this.url=e}};var wp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ou,this.attachRef=null}},Ou=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new wp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ru=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ep(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ep(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Dp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Dp(e,this._root).map(n=>n.value)}};function Ep(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ep(t,n);if(r)return r}return null}function Dp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Dp(t,n);if(r.length)return r.unshift(e),r}return[]}var gt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ki(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nu=class extends Ru{constructor(e,n){super(e),this.snapshot=n,Op(this,e)}toString(){return this.snapshot.toString()}};function tD(t){let e=NM(t),n=new je([new Sr("",{})]),r=new je({}),i=new je({}),s=new je({}),o=new je(""),a=new Nr(n,r,s,o,i,J,t,e.root);return a.snapshot=e.root,new Nu(new gt(a,[]),e)}function NM(t){let e={},n={},r={},i="",s=new Ro([],e,r,i,n,J,t,null,{});return new xu("",new gt(s,[]))}var Nr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Mo]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Vi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Vi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&rD(i)&&(r.resolve[Mo]=i.title),r}var Ro=class{get title(){return this.data?.[Mo]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},xu=class extends Ru{constructor(e,n){super(n),this.url=e,Op(this,n)}toString(){return nD(this._root)}};function Op(t,e){e.value._routerState=t,e.children.forEach(n=>Op(t,n))}function nD(t){let e=t.children.length>0?` { ${t.children.map(nD).join(", ")} } `:"";return`${t.value}${e}`}function rp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xt(e.params,n.params)||t.paramsSubject.next(n.params),sM(e.url,n.url)||t.urlSubject.next(n.url),Xt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Tp(t,e){let n=Xt(t.params,e.params)&&uM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Tp(t.parent,e.parent))}function rD(t){return typeof t.title=="string"||t.title===null}var xM=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new Lt,this.deactivateEvents=new Lt,this.attachEvents=new Lt,this.detachEvents=new Lt,this.parentContexts=k(Ou),this.location=k(fu),this.changeDetector=k(br),this.environmentInjector=k(Dt),this.inputBinder=k(ku,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new bp(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Zc({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[so]});let t=e;return t})(),bp=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Nr?this.route:e===Ou?this.childContexts:this.parent.get(e,n)}},ku=new ee(""),UE=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ls([i.queryParams,i.params,i.data]).pipe(wt(([o,a,u],l)=>(u=L(L(L({},o),a),u),l===0?K(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=yE(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function MM(t,e,n){let r=No(t,e._root,n?n._root:void 0);return new Nu(r,e)}function No(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=PM(t,e,n);return new gt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>No(t,a)),o}}let r=OM(e.value),i=e.children.map(s=>No(t,s));return new gt(r,i)}}function PM(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return No(t,r,i);return No(t,r)})}function OM(t){return new Nr(new je(t.url),new je(t.params),new je(t.queryParams),new je(t.fragment),new je(t.data),t.outlet,t.component,t)}var iD="ngNavigationCancelingError";function sD(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ui(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oD(!1,mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function oD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[iD]=!0,n.cancellationCode=e,n}function kM(t){return aD(t)&&Ui(t.url)}function aD(t){return!!t&&t[iD]}var FM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=bI({type:e,selectors:[["ng-component"]],standalone:!0,features:[lE],decls:1,vars:0,template:function(i,s){i&1&&Vf(0,"router-outlet")},dependencies:[xM],encapsulation:2});let t=e;return t})();function LM(t,e){return t.providers&&!t._injector&&(t._injector=Ff(t.providers,e,`Route: ${t.path}`)),t._injector??e}function kp(t){let e=t.children&&t.children.map(kp),n=e?Ee(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=FM),n}function en(t){return t.outlet||J}function VM(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function Po(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var UM=(t,e,n,r)=>ie(i=>(new Cp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Cp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ki(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ki(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ki(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ip(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(rp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Po(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Mu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Li=class{constructor(e,n){this.component=e,this.route=n}};function jM(t,e,n){let r=t._root,i=e?e._root:null;return _o(r,i,n,[r.value])}function BM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Bi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fI(t)?t:e.get(t):r}function _o(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ki(e);return t.children.forEach(o=>{$M(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Do(a,n.getContext(o),i)),i}function $M(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=HM(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Mu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_o(t,e,a?a.children:null,r,i):_o(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Li(a.outlet.component,o))}else o&&Do(e,a,i),i.canActivateChecks.push(new Mu(r)),s.component?_o(t,null,a?a.children:null,r,i):_o(t,null,n,r,i);return i}function HM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ar(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ar(t.url,e.url)||!Xt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tp(t,e)||!Xt(t.queryParams,e.queryParams);case"paramsChange":default:return!Tp(t,e)}}function Do(t,e,n){let r=ki(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Do(o,e.children.getContext(s),n):Do(o,null,n):Do(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Li(e.outlet.component,i)):n.canDeactivateChecks.push(new Li(null,i)):n.canDeactivateChecks.push(new Li(null,i))}function Oo(t){return typeof t=="function"}function qM(t){return typeof t=="boolean"}function zM(t){return t&&Oo(t.canLoad)}function GM(t){return t&&Oo(t.canActivate)}function WM(t){return t&&Oo(t.canActivateChild)}function KM(t){return t&&Oo(t.canDeactivate)}function QM(t){return t&&Oo(t.canMatch)}function cD(t){return t instanceof fn||t?.name==="EmptyError"}var wu=Symbol("INITIAL_VALUE");function ji(){return wt(t=>Ls(t.map(e=>e.pipe(pn(1),dc(wu)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===wu)return wu;if(n===!1||n instanceof zn)return n}return!0}),It(e=>e!==wu),pn(1)))}function YM(t,e){return Oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(Ee(L({},n),{guardsResult:!0})):JM(o,r,i,t).pipe(Oe(a=>a&&qM(a)?ZM(r,s,t,e):K(a)),ie(a=>Ee(L({},n),{guardsResult:a})))})}function JM(t,e,n,r){return Ne(t).pipe(Oe(i=>rP(i.component,i.route,n,e,r)),Wt(i=>i!==!0,!0))}function ZM(t,e,n,r){return Ne(e).pipe(hi(i=>di(eP(i.route.parent,r),XM(i.route,r),nP(t,i.path,n),tP(t,i.route,n))),Wt(i=>i!==!0,!0))}function XM(t,e){return t!==null&&e&&e(new _p(t)),K(!0)}function eP(t,e){return t!==null&&e&&e(new yp(t)),K(!0)}function tP(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>cc(()=>{let o=Po(e)??n,a=Bi(s,o),u=GM(a)?a.canActivate(e,t):yn(o,()=>a(e,t));return Kn(u).pipe(Wt())}));return K(i).pipe(ji())}function nP(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>BM(o)).filter(o=>o!==null).map(o=>cc(()=>{let a=o.guards.map(u=>{let l=Po(o.node)??n,h=Bi(u,l),p=WM(h)?h.canActivateChild(r,t):yn(l,()=>h(r,t));return Kn(p).pipe(Wt())});return K(a).pipe(ji())}));return K(s).pipe(ji())}function rP(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let u=Po(e)??i,l=Bi(a,u),h=KM(l)?l.canDeactivate(t,e,n,r):yn(u,()=>l(t,e,n,r));return Kn(h).pipe(Wt())});return K(o).pipe(ji())}function iP(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=Bi(o,t),u=zM(a)?a.canLoad(e,n):yn(t,()=>a(e,n));return Kn(u)});return K(s).pipe(ji(),uD(r))}function uD(t){return Ga(ke(e=>{if(Ui(e))throw sD(t,e)}),ie(e=>e===!0))}function sP(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=Bi(o,t),u=QM(a)?a.canMatch(e,n):yn(t,()=>a(e,n));return Kn(u)});return K(s).pipe(ji(),uD(r))}var xo=class{constructor(e){this.segmentGroup=e||null}},Pu=class extends Error{constructor(e){super(),this.urlTree=e}};function Oi(t){return li(new xo(t))}function oP(t){return li(new B(4e3,!1))}function aP(t){return li(oD(!1,mt.GuardRejected))}var Sp=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[J])return oP(e.redirectTo);i=i.children[J]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Pu(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new zn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ge(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ap={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cP(t,e,n,r,i){let s=Fp(t,e,n);return s.matched?(r=LM(e,r),sP(r,e,n,i).pipe(ie(o=>o===!0?s:L({},Ap)))):K(s)}function Fp(t,e,n){if(e.path==="**")return uP(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Ap):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||iM)(n,t,e);if(!i)return L({},Ap);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function uP(t){return{matched:!0,parameters:t.length>0?$E(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function jE(t,e,n,r){return n.length>0&&hP(t,n,r)?{segmentGroup:new ge(e,dP(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&fP(t,n,r)?{segmentGroup:new ge(t.segments,lP(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function lP(t,e,n,r){let i={};for(let s of n)if(Fu(t,e,s)&&!r[en(s)]){let o=new ge([],{});i[en(s)]=o}return L(L({},r),i)}function dP(t,e){let n={};n[J]=e;for(let r of t)if(r.path===""&&en(r)!==J){let i=new ge([],{});n[en(r)]=i}return n}function hP(t,e,n){return n.some(r=>Fu(t,e,r)&&en(r)!==J)}function fP(t,e,n){return n.some(r=>Fu(t,e,r))}function Fu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pP(t,e,n,r){return en(t)!==r&&(r===J||!Fu(e,n,t))?!1:Fp(e,t,n).matched}function gP(t,e,n){return e.length===0&&!t.children[n]}var Rp=class{};function mP(t,e,n,r,i,s,o="emptyOnly"){return new Np(t,e,n,r,i,o,s).recognize()}var yP=31,Np=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Sp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=jE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(n=>{let r=new Ro([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,{}),i=new gt(r,n),s=new xu("",i),o=DM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,J).pipe(On(r=>{if(r instanceof Pu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Pp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ie(s=>s instanceof gt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ne(i).pipe(hi(s=>{let o=r.children[s],a=VM(n,s);return this.processSegmentGroup(e,a,o,s)}),lc((s,o)=>(s.push(...o),s)),kn(null),Od(),Oe(s=>{if(s===null)return Oi(r);let o=lD(s);return vP(o),K(o)}))}processSegment(e,n,r,i,s,o){return Ne(n).pipe(hi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(On(u=>{if(u instanceof xo)return K(null);throw u}))),Wt(a=>!!a),On(a=>{if(cD(a))return gP(r,i,s)?K(new Rp):Oi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return pP(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Oi(i):Oi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Fp(n,i,s);if(!a)return Oi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yP&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Oe(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=cP(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(wt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,v=new Ro(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,IP(r),en(r),r.component??r._loadedComponent??null,r,wP(r)),{segmentGroup:A,slicedSegments:x}=jE(n,h,p,u);if(x.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(ie(O=>O===null?null:new gt(v,O)));if(u.length===0&&x.length===0)return K(new gt(v,[]));let R=en(r)===s;return this.processSegment(l,u,A,x,R?J:s,!0).pipe(ie(O=>new gt(v,O instanceof gt?[O]:[])))}))):Oi(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):iP(e,n,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,n).pipe(ke(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):aP(n))):K({routes:[],injector:e})}};function vP(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}function _P(t){let e=t.value.routeConfig;return e&&e.path===""}function lD(t){let e=[],n=new Set;for(let r of t){if(!_P(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=lD(r.children);e.push(new gt(r.value,i))}return e.filter(r=>!n.has(r))}function IP(t){return t.data||{}}function wP(t){return t.resolve||{}}function EP(t,e,n,r,i,s){return Oe(o=>mP(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>Ee(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function DP(t,e){return Oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of dD(u))o.add(l);let a=0;return Ne(o).pipe(hi(u=>s.has(u)?TP(u,r,t,e):(u.data=Pp(u,u.parent,t).resolve,K(void 0))),ke(()=>a++),fi(1),Oe(u=>a===o.size?K(n):ht))})}function dD(t){let e=t.children.map(n=>dD(n)).flat();return[t,...e]}function TP(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!rD(i)&&(s[Mo]=i.title),bP(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=Pp(t,t.parent,n).resolve,null)))}function bP(t,e,n,r){let i=op(t);if(i.length===0)return K({});let s={};return Ne(i).pipe(Oe(o=>CP(t[o],e,n,r).pipe(Wt(),ke(a=>{s[o]=a}))),fi(1),Pd(s),On(o=>cD(o)?ht:li(o)))}function CP(t,e,n,r){let i=Po(e)??r,s=Bi(t,i),o=s.resolve?s.resolve(e,n):yn(i,()=>s(e,n));return Kn(o)}function ip(t){return wt(e=>{let n=t(e);return n?Ne(n).pipe(ie(()=>e)):K(e)})}var hD=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===J);return i}getResolvedTitleForRoute(r){return r.data[Mo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(SP),providedIn:"root"});let t=e;return t})(),SP=(()=>{let e=class e extends hD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(ae(OE))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lp=new ee("",{providedIn:"root",factory:()=>({})}),Vp=new ee(""),AP=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k($f)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Kn(r.loadComponent()).pipe(ie(fD),ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Vs(()=>{this.componentLoaders.delete(r)})),s=new oi(i,()=>new Ke).pipe(si());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return K({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=RP(i,this.compiler,r,this.onLoadEndListener).pipe(Vs(()=>{this.childrenLoaders.delete(i)})),a=new oi(o,()=>new Ke).pipe(si());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RP(t,e,n,r){return Kn(t.loadChildren()).pipe(ie(fD),Oe(i=>i instanceof to||Array.isArray(i)?K(i):Ne(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Vp,[],{optional:!0,self:!0}).flat()),{routes:o.map(kp),injector:s}}))}function NP(t){return t&&typeof t=="object"&&"default"in t}function fD(t){return NP(t)?t.default:t}var Up=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(xP),providedIn:"root"});let t=e;return t})(),xP=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pD=new ee(""),gD=new ee("");function MP(t,e,n){let r=t.get(gD),i=t.get(pt);return t.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),PP(t))),{onViewTransitionCreated:u}=r;return u&&yn(t,()=>u({transition:a,from:e,to:n})),o})}function PP(t){return new Promise(e=>{Pf(e,{injector:t})})}var OP=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ke,this.transitionAbortSubject=new Ke,this.configLoader=k(AP),this.environmentInjector=k(Dt),this.urlSerializer=k(Mp),this.rootContexts=k(Ou),this.location=k(po),this.inputBindingEnabled=k(ku,{optional:!0})!==null,this.titleStrategy=k(hD),this.options=k(Lp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(Up),this.createViewTransition=k(pD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let r=s=>this.events.next(new gp(s)),i=s=>this.events.next(new mp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Eo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(It(o=>o.id!==0),ie(o=>Ee(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),wt(o=>{let a=!1,u=!1;return K(o).pipe(wt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),ht;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Rr(l.id,this.urlSerializer.serialize(l.rawUrl),m,lp.IgnoredSameUrlNavigation)),l.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return K(l).pipe(wt(m=>{let v=this.transitions?.getValue();return this.events.next(new bo(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?ht:Promise.resolve(m)}),EP(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ke(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new Au(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:A,restoredState:x,extras:R}=l,O=new bo(m,this.urlSerializer.serialize(v),A,x);this.events.next(O);let q=tD(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(L({},l),{targetSnapshot:q,urlAfterRedirects:v,extras:Ee(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,K(o)}else{let m="";return this.events.next(new Rr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,lp.IgnoredByUrlHandlingStrategy)),l.resolve(null),ht}}),ke(l=>{let h=new dp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ie(l=>(this.currentTransition=o=Ee(L({},l),{guards:jM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),YM(this.environmentInjector,l=>this.events.next(l)),ke(l=>{if(o.guardsResult=l.guardsResult,Ui(l.guardsResult))throw sD(this.urlSerializer,l.guardsResult);let h=new hp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),It(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",mt.GuardRejected),!1)),ip(l=>{if(l.guards.canActivateChecks.length)return K(l).pipe(ke(h=>{let p=new fp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),wt(h=>{let p=!1;return K(h).pipe(DP(this.paramsInheritanceStrategy,this.environmentInjector),ke({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",mt.NoDataFromResolver)}}))}),ke(h=>{let p=new pp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),ip(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(ke(v=>{p.component=v}),ie(()=>{})));for(let v of p.children)m.push(...h(v));return m};return Ls(h(l.targetSnapshot.root)).pipe(kn(null),pn(1))}),ip(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ne(p).pipe(ie(()=>o)):K(o)}),ie(l=>{let h=MM(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ee(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),ke(()=>{this.events.next(new So)}),UM(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),pn(1),ke({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),kd(this.transitionAbortSubject.pipe(ke(l=>{throw l}))),Vs(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),On(l=>{if(u=!0,aD(l))this.events.next(new Wn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),kM(l)?this.events.next(new Ao(l.url)):o.resolve(!1);else{this.events.next(new Co(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return ht}))}))}cancelNavigationTransition(r,i,s){let o=new Wn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kP(t){return t!==Eo}var FP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(LP),providedIn:"root"});let t=e;return t})(),xp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},LP=(()=>{let e=class e extends xp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=gf(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>k(VP),providedIn:"root"});let t=e;return t})(),VP=(()=>{let e=class e extends mD{constructor(){super(...arguments),this.location=k(po),this.urlSerializer=k(Mp),this.options=k(Lp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(Up),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=tD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof bo)this.stateMemento=this.createStateMemento();else if(r instanceof Rr)this.rawUrlTree=i.initialUrl;else if(r instanceof Au){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof So?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Wn&&(r.code===mt.GuardRejected||r.code===mt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Co?this.restoreHistory(i,!0):r instanceof Gn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=gf(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Io=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Io||{});function UP(t,e){t.events.pipe(It(n=>n instanceof Gn||n instanceof Wn||n instanceof Co||n instanceof Rr),ie(n=>n instanceof Gn||n instanceof Rr?Io.COMPLETE:(n instanceof Wn?n.code===mt.Redirect||n.code===mt.SupersededByNewNavigation:!1)?Io.REDIRECTING:Io.FAILED),It(n=>n!==Io.REDIRECTING),pn(1)).subscribe(()=>{e()})}function jP(t){throw t}var BP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$P={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jp=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(pu),this.stateManager=k(mD),this.options=k(Lp,{optional:!0})||{},this.pendingTasks=k(lo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(OP),this.urlSerializer=k(Mp),this.location=k(po),this.urlHandlingStrategy=k(Up),this._events=new Ke,this.errorHandler=this.options.errorHandler||jP,this.navigated=!1,this.routeReuseStrategy=k(FP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Vp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(ku,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=k(me)instanceof me&&me.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Wn&&i.code!==mt.Redirect&&i.code!==mt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Gn)this.navigated=!0;else if(i instanceof Ao){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||kP(s.source)};this.scheduleNavigation(a,Eo,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}qP(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Eo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(kp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=JE(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return ZE(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ui(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Eo,null,i)}navigate(r,i={skipLocationChange:!1}){return HP(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},BP):i===!1?s=L({},$P):s=i,Ui(r))return kE(this.currentUrlTree,r,s);let o=this.parseUrl(r);return kE(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,l=v});let p=this.pendingTasks.add();return UP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HP(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function qP(t){return!(t instanceof So)&&!(t instanceof Ao)}var rz=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Ke,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Gn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Sw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(At(jp),At(Nr),mf("tabindex"),At(hu),At(co),At(Pi))},e.\u0275dir=Zc({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Uf("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Lf("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ut.HasDecoratorInputTransform,"preserveFragment","preserveFragment",fo],skipLocationChange:[Ut.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",fo],replaceUrl:[Ut.HasDecoratorInputTransform,"replaceUrl","replaceUrl",fo],routerLink:"routerLink"},standalone:!0,features:[kf,so]});let t=e;return t})();var zP=new ee("");function iz(t,...e){return $n([{provide:Vp,multi:!0,useValue:t},[],{provide:Nr,useFactory:GP,deps:[jp]},{provide:Bf,multi:!0,useFactory:WP},e.map(n=>n.\u0275providers)])}function GP(t){return t.routerState.root}function yD(t,e){return{\u0275kind:t,\u0275providers:e}}function WP(){let t=k(St);return e=>{let n=t.get(ho);if(e!==n.components[0])return;let r=t.get(jp),i=t.get(KP);t.get(QP)===1&&r.initialNavigation(),t.get(YP,null,ne.Optional)?.setUpPreloading(),t.get(zP,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KP=new ee("",{factory:()=>new Ke}),QP=new ee("",{providedIn:"root",factory:()=>1});var YP=new ee("");function sz(){return yD(8,[UE,{provide:ku,useExisting:UE}])}function oz(t){let e=[{provide:pD,useValue:MP},{provide:gD,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return yD(9,e)}var _D=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ID={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_D(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new $p;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},$p=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ZP=function(t){let e=_D(t);return ID.encodeByteArray(e,!0)},ko=function(t){return ZP(t).replace(/\./g,"")},qp=function(t){try{return ID.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eO=()=>XP().__FIREBASE_DEFAULTS__,tO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&qp(t[1]);return e&&JSON.parse(e)},Vu=()=>{try{return eO()||tO()||nO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wD=t=>{var e,n;return(n=(e=Vu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ED=t=>{let e=wD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zp=()=>{var t;return(t=Vu())===null||t===void 0?void 0:t.config},DD=t=>{var e;return(e=Vu())===null||e===void 0?void 0:e[`_${t}`]};var Lu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function TD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ko(JSON.stringify(n)),ko(JSON.stringify(o)),""].join(".")}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function rO(){var t;let e=(t=Vu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AD(){return!rO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gp(){try{return typeof indexedDB=="object"}catch{return!1}}function RD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var iO="FirebaseError",Nt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}},wn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?sO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Nt(i,a,r)}};function sO(t,e){return t.replace(oO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var oO=/\{\$([^}]+)}/g;function $i(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(vD(s)&&vD(o)){if(!$i(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function vD(t){return t!==null&&typeof t=="object"}function Wp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ND(t,e){let n=new Hp(t,e);return n.subscribe.bind(n)}var Hp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bp),i.error===void 0&&(i.error=Bp),i.complete===void 0&&(i.complete=Bp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function aO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bp(){}var uz=4*60*60*1e3;function Je(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xr="[DEFAULT]";var Kp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Lu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uO(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cO(t){return t===xr?void 0:t}function uO(t){return t.instantiationMode==="EAGER"}var Uu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Kp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var lO=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),dO={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},hO=ce.INFO,fO={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},pO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=fO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qn=class{constructor(e){this.name=e,this._logLevel=hO,this._logHandler=pO,this._userLogHandler=null,lO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var gO=(t,e)=>e.some(n=>t instanceof n),xD,MD;function mO(){return xD||(xD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yO(){return MD||(MD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var PD=new WeakMap,Yp=new WeakMap,OD=new WeakMap,Qp=new WeakMap,Zp=new WeakMap;function vO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PD.set(n,t)}).catch(()=>{}),Zp.set(e,t),e}function _O(t){if(Yp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yp.set(t,e)}var Jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kD(t){Jp=t(Jp)}function IO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ju(this),e,...n);return OD.set(r,e.sort?e.sort():[e]),tn(r)}:yO().includes(t)?function(...e){return t.apply(ju(this),e),tn(PD.get(this))}:function(...e){return tn(t.apply(ju(this),e))}}function wO(t){return typeof t=="function"?IO(t):(t instanceof IDBTransaction&&_O(t),gO(t,mO())?new Proxy(t,Jp):t)}function tn(t){if(t instanceof IDBRequest)return vO(t);if(Qp.has(t))return Qp.get(t);let e=wO(t);return e!==t&&(Qp.set(t,e),Zp.set(e,t)),e}var ju=t=>Zp.get(t);function LD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=tn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tn(o.result),u.oldVersion,u.newVersion,tn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var EO=["get","getKey","getAll","getAllKeys","count"],DO=["put","add","delete","clear"],Xp=new Map;function FD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=DO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EO.includes(n)))return;let s=function(o,...a){return C(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Xp.set(e,s),s}kD(t=>Ee(L({},t),{get:(e,n,r)=>FD(e,n)||t.get(e,n,r),has:(e,n)=>!!FD(e,n)||t.has(e,n)}));var tg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function TO(t){let e=t.getComponent();return e?.type==="VERSION"}var ng="@firebase/app",VD="0.10.8";var Mr=new Qn("@firebase/app"),bO="@firebase/app-compat",CO="@firebase/analytics-compat",SO="@firebase/analytics",AO="@firebase/app-check-compat",RO="@firebase/app-check",NO="@firebase/auth",xO="@firebase/auth-compat",MO="@firebase/database",PO="@firebase/database-compat",OO="@firebase/functions",kO="@firebase/functions-compat",FO="@firebase/installations",LO="@firebase/installations-compat",VO="@firebase/messaging",UO="@firebase/messaging-compat",jO="@firebase/performance",BO="@firebase/performance-compat",$O="@firebase/remote-config",HO="@firebase/remote-config-compat",qO="@firebase/storage",zO="@firebase/storage-compat",GO="@firebase/firestore",WO="@firebase/vertexai-preview",KO="@firebase/firestore-compat",QO="firebase",YO="10.12.5";var rg="[DEFAULT]",JO={[ng]:"fire-core",[bO]:"fire-core-compat",[SO]:"fire-analytics",[CO]:"fire-analytics-compat",[RO]:"fire-app-check",[AO]:"fire-app-check-compat",[NO]:"fire-auth",[xO]:"fire-auth-compat",[MO]:"fire-rtdb",[PO]:"fire-rtdb-compat",[OO]:"fire-fn",[kO]:"fire-fn-compat",[FO]:"fire-iid",[LO]:"fire-iid-compat",[VO]:"fire-fcm",[UO]:"fire-fcm-compat",[jO]:"fire-perf",[BO]:"fire-perf-compat",[$O]:"fire-rc",[HO]:"fire-rc-compat",[qO]:"fire-gcs",[zO]:"fire-gcs-compat",[GO]:"fire-fst",[KO]:"fire-fst-compat",[WO]:"fire-vertex","fire-js":"fire-js",[QO]:"fire-js-all"};var Fo=new Map,ZO=new Map,ig=new Map;function UD(t,e){try{t.container.addComponent(e)}catch(n){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jn(t){let e=t.name;if(ig.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,t);for(let n of Fo.values())UD(n,t);for(let n of ZO.values())UD(n,t);return!0}function cg(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hi(t){return t.settings!==void 0}var XO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new wn("app","Firebase",XO);var sg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}};var qi=YO;function ug(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:rg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yn.create("bad-app-name",{appName:String(i)});if(n||(n=zp()),!n)throw Yn.create("no-options");let s=Fo.get(i);if(s){if($i(n,s.options)&&$i(r,s.config))return s;throw Yn.create("duplicate-app",{appName:i})}let o=new Uu(i);for(let u of ig.values())o.addComponent(u);let a=new sg(n,r,o);return Fo.set(i,a),a}function Vo(t=rg){let e=Fo.get(t);if(!e&&t===rg&&zp())return ug();if(!e)throw Yn.create("no-app",{appName:t});return e}function Bu(){return Array.from(Fo.values())}function Le(t,e,n){var r;let i=(r=JO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(a.join(" "));return}Jn(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ek="firebase-heartbeat-database",tk=1,Lo="firebase-heartbeat-store",eg=null;function HD(){return eg||(eg=LD(ek,tk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yn.create("idb-open",{originalErrorMessage:t.message})})),eg}function nk(t){return C(this,null,function*(){try{let n=(yield HD()).transaction(Lo),r=yield n.objectStore(Lo).get(qD(t));return yield n.done,r}catch(e){if(e instanceof Nt)Mr.warn(e.message);else{let n=Yn.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(n.message)}}})}function jD(t,e){return C(this,null,function*(){try{let r=(yield HD()).transaction(Lo,"readwrite");yield r.objectStore(Lo).put(e,qD(t)),yield r.done}catch(n){if(n instanceof Nt)Mr.warn(n.message);else{let r=Yn.create("idb-set",{originalErrorMessage:n?.message});Mr.warn(r.message)}}})}function qD(t){return`${t.name}!${t.options.appId}`}var rk=1024,ik=30*24*60*60*1e3,og=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ag(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=ik}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return C(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=BD(),{heartbeatsToSend:r,unsentEntries:i}=sk(this._heartbeatsCache.heartbeats),s=ko(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function BD(){return new Date().toISOString().substring(0,10)}function sk(t,e=rk){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$D(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$D(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ag=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return Gp()?RD().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield nk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function $D(t){return ko(JSON.stringify({version:2,heartbeats:t})).length}function ok(t){Jn(new xt("platform-logger",e=>new tg(e),"PRIVATE")),Jn(new xt("heartbeat",e=>new og(e),"PRIVATE")),Le(ng,VD,t),Le(ng,VD,"esm2017"),Le("fire-js","")}ok("");var ak="firebase",ck="10.12.5";Le(ak,ck,"app");var Gi=new Bn("ANGULARFIRE2_VERSION");function dg(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var jo=(t,e)=>{let n=e?[e]:Bu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Uo=class{constructor(){return jo(uk)}},uk="app-check";function zi(){}var $u=class{zone;delegate;constructor(e,n=Nd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},lg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zi,{},zi,zi)),n.pipe(ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new $u(Zone.current)),this.insideAngular=n.run(()=>new $u(Zone.current,Fs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ae(me))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Hu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function lk(t){return Hu().ngZone.runOutsideAngular(()=>t())}function Pr(t){return Hu().ngZone.run(()=>t())}function dk(t){return hk(Hu())(t)}function hk(t){return function(n){return n=n.lift(new lg(t.ngZone)),n.pipe(Pn(t.outsideAngular),Mn(t.insideAngular))}}var fk=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Pr(()=>t.apply(void 0,r))},ot=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Pr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zi,{},zi,zi))),r[s]=fk(r[s],n));let i=lk(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Hu();return i.pipe(Pn(s.outsideAngular),Mn(s.insideAngular))}else return Pr(()=>i);return i instanceof oe?i.pipe(dk):i instanceof Promise?Pr(()=>new Promise((s,o)=>i.then(a=>Pr(()=>s(a)),a=>Pr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Pr(()=>i)};var Or=class{constructor(e){return e}},$o=class{constructor(){return Bu()}};function pk(t){return t&&t.length===1?t[0]:new Or(Vo())}var hg=new ee("angularfire2._apps"),gk={provide:Or,useFactory:pk,deps:[[new Zt,hg]]},mk={provide:$o,deps:[[new Zt,hg]]};function yk(t){return(e,n)=>{let r=n.get(In);Le("angularfire",Gi.full,"core"),Le("angularfire",Gi.full,"app"),Le("angular",dE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Or(i)}}function Qz(t,...e){return $n([gk,mk,{provide:hg,useFactory:yk(t),multi:!0,deps:[me,St,Bo,...e]}])}var Yz=ot(ug,!0);function ZD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XD=ZD,eT=new wn("auth","Firebase",ZD());var Wu=new Qn("@firebase/auth");function _k(t,...e){Wu.logLevel<=ce.WARN&&Wu.warn(`Auth (${qi}): ${t}`,...e)}function zu(t,...e){Wu.logLevel<=ce.ERROR&&Wu.error(`Auth (${qi}): ${t}`,...e)}function zD(t,...e){throw Tg(t,...e)}function Dg(t,...e){return Tg(t,...e)}function tT(t,e,n){let r=Object.assign(Object.assign({},XD()),{[e]:n});return new wn("auth","Firebase",r).create(e,{appName:t.name})}function Gu(t){return tT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eT.create(t,...e)}function fe(t,e,...n){if(!t)throw Tg(e,...n)}function Ho(t){let e="INTERNAL ASSERTION FAILED: "+t;throw zu(e),new Error(e)}function Ku(t,e){t||Ho(e)}function Ik(){return GD()==="http:"||GD()==="https:"}function GD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ik()||CD()||"connection"in navigator)?navigator.onLine:!0}function Ek(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Fr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ku(n>e,"Short delay should be less than long delay!"),this.isMobile=bD()||SD()}get(){return wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Dk(t,e){Ku(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Qu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ho("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ho("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ho("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bk=new Fr(3e4,6e4);function nT(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Xu(s,o,a,u){return C(this,arguments,function*(t,e,n,r,i={}){return rT(t,i,()=>C(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Wp(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),Qu.fetch()(iT(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function rT(t,e,n){return C(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Tk),e);try{let i=new gg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw qu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw qu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw qu(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tT(t,h,l);zD(t,h)}}catch(i){if(i instanceof Nt)throw i;zD(t,"network-request-failed",{message:String(i)})}})}function iT(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Dk(t.config,i):`${t.config.apiScheme}://${i}`}var gg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dg(this.auth,"network-request-failed")),bk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function qu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Dg(t,e,r);return i.customData._tokenResponse=n,i}function Ck(t,e){return C(this,null,function*(){return Xu(t,"POST","/v1/accounts:delete",e)})}function sT(t,e){return C(this,null,function*(){return Xu(t,"POST","/v1/accounts:lookup",e)})}function qo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bg(t,e=!1){return C(this,null,function*(){let n=Je(t),r=yield n.getIdToken(e),i=oT(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qo(fg(i.auth_time)),issuedAtTime:qo(fg(i.iat)),expirationTime:qo(fg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function fg(t){return Number(t)*1e3}function oT(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{let i=qp(n);return i?JSON.parse(i):(zu("Failed to decode base64 JWT payload"),null)}catch(i){return zu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function WD(t){let e=oT(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function mg(t,e,n=!1){return C(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Nt&&Sk(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Sk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var yg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),n)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Go=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qo(this.lastLoginAt),this.creationTime=qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Yu(t){return C(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield mg(t,sT(n,{idToken:r}));fe(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aT(s.providerUserInfo):[],a=Ak(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Go(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Cg(t){return C(this,null,function*(){let e=Je(t);yield Yu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ak(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aT(t){return t.map(e=>{var{providerId:n}=e,r=Id(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Rk(t,e){return C(this,null,function*(){let n=yield rT(t,{},()=>C(this,null,function*(){let r=Wp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=iT(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Qu.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Nk(t,e){return C(this,null,function*(){return Xu(t,"POST","/v2/accounts:revokeToken",nT(t,e))})}var zo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let n=WD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return C(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Rk(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ho("not implemented")}};function Zn(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Wo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Id(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Go(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let n=yield mg(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return bg(this,e)}reload(){return Cg(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Yu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Hi(this.auth.app))return Promise.reject(Gu(this.auth));let e=yield this.getIdToken();return yield mg(this,Ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:j,emailVerified:le,isAnonymous:Te,providerData:Y,stsTokenManager:E}=n;fe(j&&E,e,"internal-error");let y=zo.fromJSON(this.name,E);fe(typeof j=="string",e,"internal-error"),Zn(p,e.name),Zn(m,e.name),fe(typeof le=="boolean",e,"internal-error"),fe(typeof Te=="boolean",e,"internal-error"),Zn(v,e.name),Zn(A,e.name),Zn(x,e.name),Zn(R,e.name),Zn(O,e.name),Zn(q,e.name);let _=new t({uid:j,auth:e,email:m,emailVerified:le,displayName:p,isAnonymous:Te,photoURL:A,phoneNumber:v,tenantId:x,stsTokenManager:y,createdAt:O,lastLoginAt:q});return Y&&Array.isArray(Y)&&(_.providerData=Y.map(w=>Object.assign({},w))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return C(this,null,function*(){let i=new zo;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Yu(s),s})}static _fromGetAccountInfoResponse(e,n,r){return C(this,null,function*(){let i=n.users[0];fe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?aT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new zo;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Go(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var KD=new Map;function kr(t){Ku(t instanceof Function,"Expected a class definition");let e=KD.get(t);return e?(Ku(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KD.set(t,e),e)}var xk=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(n,r){return C(this,null,function*(){this.storage[n]=r})}_get(n){return C(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return C(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),vg=xk;function pg(t,e,n){return`firebase:${t}:${e}:${n}`}var Ju=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pg(this.userKey,i.apiKey,s),this.fullPersistenceKey=pg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Wo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return C(this,null,function*(){if(!n.length)return new t(kr(vg),e,r);let i=(yield Promise.all(n.map(l=>C(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||kr(vg),o=pg(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Wo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>C(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function QD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lk(e))return"Blackberry";if(Vk(e))return"Webos";if(Pk(e))return"Safari";if((e.includes("chrome/")||Ok(e))&&!e.includes("edge/"))return"Chrome";if(Fk(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Mk(t=yt()){return/firefox\//i.test(t)}function Pk(t=yt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ok(t=yt()){return/crios\//i.test(t)}function kk(t=yt()){return/iemobile/i.test(t)}function Fk(t=yt()){return/android/i.test(t)}function Lk(t=yt()){return/blackberry/i.test(t)}function Vk(t=yt()){return/webos/i.test(t)}function cT(t,e=[]){let n;switch(t){case"Browser":n=QD(yt());break;case"Worker":n=`${QD(yt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qi}/${r}`}var _g=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Uk(n){return C(this,arguments,function*(t,e={}){return Xu(t,"GET","/v2/passwordPolicy",nT(t,e))})}var jk=6,Ig=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zu(this),this.idTokenSubscription=new Zu(this),this.beforeStateQueue=new _g(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ju.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let n=yield sT(this,{idToken:e}),r=yield Wo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var n;if(Hi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Yu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ek()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Hi(this.app))return Promise.reject(Gu(this));let n=e?Je(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return C(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Hi(this.app)?Promise.reject(Gu(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Hi(this.app)?Promise.reject(Gu(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(kr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield Uk(this),n=new Ig(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Nk(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&kr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=yield Ju.create(this,[kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return C(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_k(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Bk(t){return Je(t)}var Zu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ND(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $k={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hk(t){$k=t}function qk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function zk(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var c4=qk("rcb"),u4=new Fr(3e4,6e4);var l4=new Fr(2e3,1e4);var d4=10*60*1e3;var h4=new Fr(3e4,6e4);var f4=new Fr(5e3,15e3);var p4=encodeURIComponent("fac");var YD="@firebase/auth",JD="1.7.6";var Eg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Gk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wk(t){Jn(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cT(t)},l=new wg(r,i,s,u);return zk(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new xt("auth-internal",e=>{let n=Bk(e.getProvider("auth").getImmediate());return(r=>new Eg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(YD,JD,Gk(t)),Le(YD,JD,"esm2017")}var Kk=5*60,g4=DD("authIdTokenMaxAge")||Kk;function Qk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hk({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Dg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Qk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wk("Browser");var K1="auth";var el=class{constructor(){return jo(K1)}};var uT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lT={};var Xn,Sg;(function(){var t;function e(E,y){function _(){}_.prototype=y.prototype,E.D=y.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(w,D,b){for(var I=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)I[ln-2]=arguments[ln];return y.prototype[D].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,_){_||(_=0);var w=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)w[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)w[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=E.g[0],_=E.g[1],D=E.g[2];var b=E.g[3],I=y+(b^_&(D^b))+w[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=b+(D^y&(_^D))+w[1]+3905402710&4294967295,b=y+(I<<12&4294967295|I>>>20),I=D+(_^b&(y^_))+w[2]+606105819&4294967295,D=b+(I<<17&4294967295|I>>>15),I=_+(y^D&(b^y))+w[3]+3250441966&4294967295,_=D+(I<<22&4294967295|I>>>10),I=y+(b^_&(D^b))+w[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=b+(D^y&(_^D))+w[5]+1200080426&4294967295,b=y+(I<<12&4294967295|I>>>20),I=D+(_^b&(y^_))+w[6]+2821735955&4294967295,D=b+(I<<17&4294967295|I>>>15),I=_+(y^D&(b^y))+w[7]+4249261313&4294967295,_=D+(I<<22&4294967295|I>>>10),I=y+(b^_&(D^b))+w[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=b+(D^y&(_^D))+w[9]+2336552879&4294967295,b=y+(I<<12&4294967295|I>>>20),I=D+(_^b&(y^_))+w[10]+4294925233&4294967295,D=b+(I<<17&4294967295|I>>>15),I=_+(y^D&(b^y))+w[11]+2304563134&4294967295,_=D+(I<<22&4294967295|I>>>10),I=y+(b^_&(D^b))+w[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=b+(D^y&(_^D))+w[13]+4254626195&4294967295,b=y+(I<<12&4294967295|I>>>20),I=D+(_^b&(y^_))+w[14]+2792965006&4294967295,D=b+(I<<17&4294967295|I>>>15),I=_+(y^D&(b^y))+w[15]+1236535329&4294967295,_=D+(I<<22&4294967295|I>>>10),I=y+(D^b&(_^D))+w[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=b+(_^D&(y^_))+w[6]+3225465664&4294967295,b=y+(I<<9&4294967295|I>>>23),I=D+(y^_&(b^y))+w[11]+643717713&4294967295,D=b+(I<<14&4294967295|I>>>18),I=_+(b^y&(D^b))+w[0]+3921069994&4294967295,_=D+(I<<20&4294967295|I>>>12),I=y+(D^b&(_^D))+w[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=b+(_^D&(y^_))+w[10]+38016083&4294967295,b=y+(I<<9&4294967295|I>>>23),I=D+(y^_&(b^y))+w[15]+3634488961&4294967295,D=b+(I<<14&4294967295|I>>>18),I=_+(b^y&(D^b))+w[4]+3889429448&4294967295,_=D+(I<<20&4294967295|I>>>12),I=y+(D^b&(_^D))+w[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=b+(_^D&(y^_))+w[14]+3275163606&4294967295,b=y+(I<<9&4294967295|I>>>23),I=D+(y^_&(b^y))+w[3]+4107603335&4294967295,D=b+(I<<14&4294967295|I>>>18),I=_+(b^y&(D^b))+w[8]+1163531501&4294967295,_=D+(I<<20&4294967295|I>>>12),I=y+(D^b&(_^D))+w[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=b+(_^D&(y^_))+w[2]+4243563512&4294967295,b=y+(I<<9&4294967295|I>>>23),I=D+(y^_&(b^y))+w[7]+1735328473&4294967295,D=b+(I<<14&4294967295|I>>>18),I=_+(b^y&(D^b))+w[12]+2368359562&4294967295,_=D+(I<<20&4294967295|I>>>12),I=y+(_^D^b)+w[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=b+(y^_^D)+w[8]+2272392833&4294967295,b=y+(I<<11&4294967295|I>>>21),I=D+(b^y^_)+w[11]+1839030562&4294967295,D=b+(I<<16&4294967295|I>>>16),I=_+(D^b^y)+w[14]+4259657740&4294967295,_=D+(I<<23&4294967295|I>>>9),I=y+(_^D^b)+w[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=b+(y^_^D)+w[4]+1272893353&4294967295,b=y+(I<<11&4294967295|I>>>21),I=D+(b^y^_)+w[7]+4139469664&4294967295,D=b+(I<<16&4294967295|I>>>16),I=_+(D^b^y)+w[10]+3200236656&4294967295,_=D+(I<<23&4294967295|I>>>9),I=y+(_^D^b)+w[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=b+(y^_^D)+w[0]+3936430074&4294967295,b=y+(I<<11&4294967295|I>>>21),I=D+(b^y^_)+w[3]+3572445317&4294967295,D=b+(I<<16&4294967295|I>>>16),I=_+(D^b^y)+w[6]+76029189&4294967295,_=D+(I<<23&4294967295|I>>>9),I=y+(_^D^b)+w[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=b+(y^_^D)+w[12]+3873151461&4294967295,b=y+(I<<11&4294967295|I>>>21),I=D+(b^y^_)+w[15]+530742520&4294967295,D=b+(I<<16&4294967295|I>>>16),I=_+(D^b^y)+w[2]+3299628645&4294967295,_=D+(I<<23&4294967295|I>>>9),I=y+(D^(_|~b))+w[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=b+(_^(y|~D))+w[7]+1126891415&4294967295,b=y+(I<<10&4294967295|I>>>22),I=D+(y^(b|~_))+w[14]+2878612391&4294967295,D=b+(I<<15&4294967295|I>>>17),I=_+(b^(D|~y))+w[5]+4237533241&4294967295,_=D+(I<<21&4294967295|I>>>11),I=y+(D^(_|~b))+w[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=b+(_^(y|~D))+w[3]+2399980690&4294967295,b=y+(I<<10&4294967295|I>>>22),I=D+(y^(b|~_))+w[10]+4293915773&4294967295,D=b+(I<<15&4294967295|I>>>17),I=_+(b^(D|~y))+w[1]+2240044497&4294967295,_=D+(I<<21&4294967295|I>>>11),I=y+(D^(_|~b))+w[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=b+(_^(y|~D))+w[15]+4264355552&4294967295,b=y+(I<<10&4294967295|I>>>22),I=D+(y^(b|~_))+w[6]+2734768916&4294967295,D=b+(I<<15&4294967295|I>>>17),I=_+(b^(D|~y))+w[13]+1309151649&4294967295,_=D+(I<<21&4294967295|I>>>11),I=y+(D^(_|~b))+w[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=b+(_^(y|~D))+w[11]+3174756917&4294967295,b=y+(I<<10&4294967295|I>>>22),I=D+(y^(b|~_))+w[2]+718787259&4294967295,D=b+(I<<15&4294967295|I>>>17),I=_+(b^(D|~y))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var _=y-this.blockSize,w=this.B,D=this.h,b=0;b<y;){if(D==0)for(;b<=_;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<y;)if(w[D++]=E.charCodeAt(b++),D==this.blockSize){i(this,w),D=0;break}}else for(;b<y;)if(w[D++]=E[b++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var _=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=_&255,_/=256;for(this.u(E),E=Array(16),y=_=0;4>y;++y)for(var w=0;32>w;w+=8)E[_++]=this.g[y]>>>w&255;return E};function s(E,y){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=y(E)}function o(E,y){this.h=y;for(var _=[],w=!0,D=E.length-1;0<=D;D--){var b=E[D]|0;w&&b==y||(_[D]=b,w=!1)}this.g=_}var a={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var y=[],_=1,w=0;E>=_;w++)y[w]=E/_|0,_*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return R(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),w=p,D=0;D<E.length;D+=8){var b=Math.min(8,E.length-D),I=parseInt(E.substring(D,D+b),y);8>b?(b=l(Math.pow(y,b)),w=w.j(b).add(l(I))):(w=w.j(_),w=w.add(l(I)))}return w}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var E=0,y=1,_=0;_<this.g.length;_++){var w=this.i(_);E+=(0<=w?w:4294967296+w)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A(this))return"0";if(x(this))return"-"+R(this).toString(E);for(var y=l(Math.pow(E,6)),_=this,w="";;){var D=le(_,y).g;_=O(_,D.j(y));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=D,A(_))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function A(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=O(this,E),x(E)?-1:A(E)?0:1};function R(E){for(var y=E.g.length,_=[],w=0;w<y;w++)_[w]=~E.g[w];return new o(_,~E.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],w=0,D=0;D<=y;D++){var b=w+(this.i(D)&65535)+(E.i(D)&65535),I=(b>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);w=I>>>16,b&=65535,I&=65535,_[D]=I<<16|b}return new o(_,_[_.length-1]&-2147483648?-1:0)};function O(E,y){return E.add(R(y))}t.j=function(E){if(A(this)||A(E))return p;if(x(this))return x(E)?R(this).j(R(E)):R(R(this).j(E));if(x(E))return R(this.j(R(E)));if(0>this.l(v)&&0>E.l(v))return l(this.m()*E.m());for(var y=this.g.length+E.g.length,_=[],w=0;w<2*y;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<E.g.length;D++){var b=this.i(w)>>>16,I=this.i(w)&65535,ln=E.i(D)>>>16,gs=E.i(D)&65535;_[2*w+2*D]+=I*gs,q(_,2*w+2*D),_[2*w+2*D+1]+=b*gs,q(_,2*w+2*D+1),_[2*w+2*D+1]+=I*ln,q(_,2*w+2*D+1),_[2*w+2*D+2]+=b*ln,q(_,2*w+2*D+2)}for(w=0;w<y;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=y;w<2*y;w++)_[w]=0;return new o(_,0)};function q(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function j(E,y){this.g=E,this.h=y}function le(E,y){if(A(y))throw Error("division by zero");if(A(E))return new j(p,p);if(x(E))return y=le(R(E),y),new j(R(y.g),R(y.h));if(x(y))return y=le(E,R(y)),new j(R(y.g),y.h);if(30<E.g.length){if(x(E)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,w=y;0>=w.l(E);)_=Te(_),w=Te(w);var D=Y(_,1),b=Y(w,1);for(w=Y(w,2),_=Y(_,2);!A(w);){var I=b.add(w);0>=I.l(E)&&(D=D.add(_),b=I),w=Y(w,1),_=Y(_,1)}return y=O(E,D.j(y)),new j(D,y)}for(D=p;0<=E.l(y);){for(_=Math.max(1,Math.floor(E.m()/y.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=l(_),I=b.j(y);x(I)||0<I.l(E);)_-=w,b=l(_),I=b.j(y);A(b)&&(b=m),D=D.add(b),E=O(E,I)}return new j(D,E)}t.A=function(E){return le(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],w=0;w<y;w++)_[w]=this.i(w)&E.i(w);return new o(_,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],w=0;w<y;w++)_[w]=this.i(w)|E.i(w);return new o(_,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],w=0;w<y;w++)_[w]=this.i(w)^E.i(w);return new o(_,this.h^E.h)};function Te(E){for(var y=E.g.length+1,_=[],w=0;w<y;w++)_[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(_,E.h)}function Y(E,y){var _=y>>5;y%=32;for(var w=E.g.length-_,D=[],b=0;b<w;b++)D[b]=0<y?E.i(b+_)>>>y|E.i(b+_+1)<<32-y:E.i(b+_);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sg=lT.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Xn=lT.Integer=o}).apply(typeof uT<"u"?uT:typeof self<"u"?self:typeof window<"u"?window:{});var tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},En={};var Ag,Rg,Wi,Ng,Ko,nl,xg,Mg,Pg;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof tl=="object"&&tl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,S){for(var P=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)P[ye-2]=arguments[ye];return d.prototype[T].apply(g,P)}}function x(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,S=g.length||0;c.length=T+S;for(let P=0;P<S;P++)c[T+P]=g[P]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function le(c){return le[" "](c),c}le[" "]=function(){};var Te=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function Y(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let S=0;S<_.length;S++)f=_[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Ql;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ln{constructor(){this.h=this.g=null}add(d,f){let g=gs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var gs=new O(()=>new aC,c=>c.reset());class aC{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ms,ys=!1,Ql=new ln,$y=()=>{let c=a.Promise.resolve(void 0);ms=()=>{c.then(cC)}};var cC=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){b(f)}var d=gs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ys=!1};function Sn(){this.s=this.s,this.C=this.C}Sn.prototype.s=!1,Sn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};var uC=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function vs(c,d){if(qe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Te){e:{try{le(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:lC[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&vs.aa.h.call(this)}}A(vs,qe);var lC={2:"touch",3:"pen",4:"mouse"};vs.prototype.h=function(){vs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _s="closure_listenable_"+(1e6*Math.random()|0),dC=0;function hC(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++dC,this.da=this.fa=!1}function Ea(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Da(c){this.src=c,this.g={},this.h=0}Da.prototype.add=function(c,d,f,g,T){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var P=Jl(c,d,g,T);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new hC(d,this.src,S,!!g,T),d.fa=f,c.push(d)),d};function Yl(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(Ea(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Jl(c,d,f,g){for(var T=0;T<c.length;++T){var S=c[T];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return T}return-1}var Zl="closure_lm_"+(1e6*Math.random()|0),Xl={};function Hy(c,d,f,g,T){if(g&&g.once)return zy(c,d,f,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Hy(c,d[S],f,g,T);return null}return f=rd(f),c&&c[_s]?c.K(d,f,l(g)?!!g.capture:!!g,T):qy(c,d,f,!1,g,T)}function qy(c,d,f,g,T,S){if(!d)throw Error("Invalid event type");var P=l(T)?!!T.capture:!!T,ye=td(c);if(ye||(c[Zl]=ye=new Da(c)),f=ye.add(d,f,g,P,S),f.proxy)return f;if(g=fC(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)uC||(T=P),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(Wy(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fC(){function c(f){return d.call(c.src,c.listener,f)}let d=pC;return c}function zy(c,d,f,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)zy(c,d[S],f,g,T);return null}return f=rd(f),c&&c[_s]?c.L(d,f,l(g)?!!g.capture:!!g,T):qy(c,d,f,!0,g,T)}function Gy(c,d,f,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)Gy(c,d[S],f,g,T);else g=l(g)?!!g.capture:!!g,f=rd(f),c&&c[_s]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Jl(S,f,g,T),-1<f&&(Ea(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=td(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Jl(d,f,g,T)),(f=-1<c?d[c]:null)&&ed(f))}function ed(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[_s])Yl(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Wy(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=td(d))?(Yl(f,c),f.h==0&&(f.src=null,d[Zl]=null)):Ea(c)}}}function Wy(c){return c in Xl?Xl[c]:Xl[c]="on"+c}function pC(c,d){if(c.da)c=!0;else{d=new vs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&ed(c),c=f.call(g,d)}return c}function td(c){return c=c[Zl],c instanceof Da?c:null}var nd="__closure_events_fn_"+(1e9*Math.random()>>>0);function rd(c){return typeof c=="function"?c:(c[nd]||(c[nd]=function(d){return c.handleEvent(d)}),c[nd])}function ze(){Sn.call(this),this.i=new Da(this),this.M=this,this.F=null}A(ze,Sn),ze.prototype[_s]=!0,ze.prototype.removeEventListener=function(c,d,f,g){Gy(this,c,d,f,g)};function tt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new qe(d,c);else if(d instanceof qe)d.target=d.target||c;else{var T=d;d=new qe(g,c),w(d,T)}if(T=!0,f)for(var S=f.length-1;0<=S;S--){var P=d.g=f[S];T=Ta(P,g,!0,d)&&T}if(P=d.g=c,T=Ta(P,g,!0,d)&&T,T=Ta(P,g,!1,d)&&T,f)for(S=0;S<f.length;S++)P=d.g=f[S],T=Ta(P,g,!1,d)&&T}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ea(f[g]);delete c.g[d],c.h--}}this.F=null},ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ta(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var P=d[S];if(P&&!P.da&&P.capture==f){var ye=P.listener,Ue=P.ha||P.src;P.fa&&Yl(c.i,P),T=ye.call(Ue,g)!==!1&&T}}return T&&!g.defaultPrevented}function Ky(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Qy(c){c.g=Ky(()=>{c.g=null,c.i&&(c.i=!1,Qy(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class gC extends Sn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Qy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(c){Sn.call(this),this.h=c,this.g={}}A(Is,Sn);var Yy=[];function Jy(c){Y(c.g,function(d,f){this.g.hasOwnProperty(f)&&ed(d)},c),c.g={}}Is.prototype.N=function(){Is.aa.N.call(this),Jy(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var id=a.JSON.stringify,mC=a.JSON.parse,yC=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function sd(){}sd.prototype.h=null;function Zy(c){return c.h||(c.h=c.i())}function Xy(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function od(){qe.call(this,"d")}A(od,qe);function ad(){qe.call(this,"c")}A(ad,qe);var ir={},ev=null;function ba(){return ev=ev||new ze}ir.La="serverreachability";function tv(c){qe.call(this,ir.La,c)}A(tv,qe);function Es(c){let d=ba();tt(d,new tv(d))}ir.STAT_EVENT="statevent";function nv(c,d){qe.call(this,ir.STAT_EVENT,c),this.stat=d}A(nv,qe);function nt(c){let d=ba();tt(d,new nv(d,c))}ir.Ma="timingevent";function rv(c,d){qe.call(this,ir.Ma,c),this.size=d}A(rv,qe);function Ds(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ts(){this.g=!0}Ts.prototype.xa=function(){this.g=!1};function vC(c,d,f,g,T,S){c.info(function(){if(c.g)if(S)for(var P="",ye=S.split("&"),Ue=0;Ue<ye.length;Ue++){var he=ye[Ue].split("=");if(1<he.length){var Ge=he[0];he=he[1];var We=Ge.split("_");P=2<=We.length&&We[1]=="type"?P+(Ge+"="+he+"&"):P+(Ge+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+P})}function _C(c,d,f,g,T,S,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+S+" "+P})}function Yr(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+wC(c,f)+(g?" "+g:"")})}function IC(c,d){c.info(function(){return"TIMEOUT: "+d})}Ts.prototype.info=function(){};function wC(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return id(f)}catch{return d}}var Ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cd;function Sa(){}A(Sa,sd),Sa.prototype.g=function(){return new XMLHttpRequest},Sa.prototype.i=function(){return{}},cd=new Sa;function An(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sv}function sv(){this.i=null,this.g="",this.h=!1}var ov={},ud={};function ld(c,d,f){c.L=1,c.v=xa(dn(d)),c.m=f,c.P=!0,av(c,null)}function av(c,d){c.F=Date.now(),Aa(c),c.A=dn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),wv(f.i,"t",g),c.C=0,f=c.j.J,c.h=new sv,c.g=Uv(c.j,f?d:null,!c.m),0<c.O&&(c.M=new gC(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(Yy[0]=T.toString()),T=Yy);for(var S=0;S<T.length;S++){var P=Hy(f,T[S],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Es(),vC(c.i,c.u,c.A,c.l,c.R,c.m)}An.prototype.ca=function(c){c=c.target;let d=this.M;d&&hn(c)==3?d.j():this.Y(c)},An.prototype.Y=function(c){try{if(c==this.g)e:{let We=hn(this.g);var d=this.g.Ba();let Xr=this.g.Z();if(!(3>We)&&(We!=3||this.g&&(this.h.h||this.g.oa()||Av(this.g)))){this.J||We!=4||d==7||(d==8||0>=Xr?Es(3):Es(2)),dd(this);var f=this.g.Z();this.X=f;t:if(cv(this)){var g=Av(this.g);c="";var T=g.length,S=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),bs(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,_C(this.i,this.u,this.A,this.l,this.R,We,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ue=this.g;if((ye=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ye)){var he=ye;break t}}he=null}if(f=he)Yr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hd(this,f);else{this.o=!1,this.s=3,nt(12),sr(this),bs(this);break e}}if(this.P){f=!0;let Ot;for(;!this.J&&this.C<P.length;)if(Ot=EC(this,P),Ot==ud){We==4&&(this.s=4,nt(14),f=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==ov){this.s=4,nt(15),Yr(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Yr(this.i,this.l,Ot,null),hd(this,Ot);if(cv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||P.length!=0||this.h.h||(this.s=1,nt(16),f=!1),this.o=this.o&&f,!f)Yr(this.i,this.l,P,"[Invalid Chunked Response]"),sr(this),bs(this);else if(0<P.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),vd(Ge),Ge.M=!0,nt(11))}}else Yr(this.i,this.l,P,null),hd(this,P);We==4&&sr(this),this.o&&!this.J&&(We==4?kv(this.j,this):(this.o=!1,Aa(this)))}else UC(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),sr(this),bs(this)}}}catch{}finally{}};function cv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function EC(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?ud:(f=Number(d.substring(f,g)),isNaN(f)?ov:(g+=1,g+f>d.length?ud:(d=d.slice(g,g+f),c.C=g+f,d)))}An.prototype.cancel=function(){this.J=!0,sr(this)};function Aa(c){c.S=Date.now()+c.I,uv(c,c.I)}function uv(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ds(m(c.ba,c),d)}function dd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}An.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(IC(this.i,this.A),this.L!=2&&(Es(),nt(17)),sr(this),this.s=2,bs(this)):uv(this,this.S-c)};function bs(c){c.j.G==0||c.J||kv(c.j,c)}function sr(c){dd(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Jy(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function hd(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||fd(f.h,c))){if(!c.K&&fd(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Fa(f),Oa(f);else break e;yd(f),nt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ds(m(f.Za,f),6e3));if(1>=hv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ar(f,11)}else if((c.K||f.g==c)&&Fa(f),!q(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let he=T[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let Ge=he[3];Ge!=null&&(f.la=Ge,f.j.info("VER="+f.la));let We=he[4];We!=null&&(f.Aa=We,f.j.info("SVER="+f.Aa));let Xr=he[5];Xr!=null&&typeof Xr=="number"&&0<Xr&&(g=1.5*Xr,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ot=c.g;if(Ot){let Va=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var S=g.h;S.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(pd(S,S.h),S.h=null))}if(g.D){let _d=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;_d&&(g.ya=_d,we(g.I,g.D,_d))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=Vv(g,g.J?g.ia:null,g.W),P.K){fv(g.h,P);var ye=P,Ue=g.L;Ue&&(ye.I=Ue),ye.B&&(dd(ye),Aa(ye)),g.g=P}else Pv(g);0<f.i.length&&ka(f)}else he[0]!="stop"&&he[0]!="close"||ar(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?ar(f,7):md(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}Es(4)}catch{}}var DC=class{constructor(c,d){this.g=c,this.map=d}};function lv(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function hv(c){return c.h?1:c.g?c.g.size:0}function fd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function pd(c,d){c.g?c.g.add(d):c.h=d}function fv(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}lv.prototype.cancel=function(){if(this.i=pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function pv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return x(c.i)}function TC(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function bC(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function gv(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=bC(c),g=TC(c),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],f&&f[S],c)}var mv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CC(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var S=c[f].substring(0,g);T=c[f].substring(g+1)}else S=c[f];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function or(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof or){this.h=c.h,Ra(this,c.j),this.o=c.o,this.g=c.g,Na(this,c.s),this.l=c.l;var d=c.i,f=new As;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),yv(this,f),this.m=c.m}else c&&(d=String(c).match(mv))?(this.h=!1,Ra(this,d[1]||"",!0),this.o=Cs(d[2]||""),this.g=Cs(d[3]||"",!0),Na(this,d[4]),this.l=Cs(d[5]||"",!0),yv(this,d[6]||"",!0),this.m=Cs(d[7]||"")):(this.h=!1,this.i=new As(null,this.h))}or.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ss(d,vv,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ss(d,vv,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ss(f,f.charAt(0)=="/"?RC:AC,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ss(f,xC)),c.join("")};function dn(c){return new or(c)}function Ra(c,d,f){c.j=f?Cs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Na(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function yv(c,d,f){d instanceof As?(c.i=d,MC(c.i,c.h)):(f||(d=Ss(d,NC)),c.i=new As(d,c.h))}function we(c,d,f){c.i.set(d,f)}function xa(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ss(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,SC),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function SC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vv=/[#\/\?@]/g,AC=/[#\?:]/g,RC=/[#\?]/g,NC=/[#\?@]/g,xC=/#/g;function As(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Rn(c){c.g||(c.g=new Map,c.h=0,c.i&&CC(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=As.prototype,t.add=function(c,d){Rn(this),this.i=null,c=Jr(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function _v(c,d){Rn(c),d=Jr(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Iv(c,d){return Rn(c),d=Jr(c,d),c.g.has(d)}t.forEach=function(c,d){Rn(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){Rn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let S=0;S<T.length;S++)f.push(d[g])}return f},t.V=function(c){Rn(this);let d=[];if(typeof c=="string")Iv(this,c)&&(d=d.concat(this.g.get(Jr(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Rn(this),this.i=null,c=Jr(this,c),Iv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function wv(c,d,f){_v(c,d),0<f.length&&(c.i=null,c.g.set(Jr(c,d),x(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var T=S;P[g]!==""&&(T+="="+encodeURIComponent(String(P[g]))),c.push(T)}}return this.i=c.join("&")};function Jr(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function MC(c,d){d&&!c.j&&(Rn(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(_v(this,g),wv(this,T,f))},c)),c.j=d}function PC(c,d){let f=new Ts;if(a.Image){let g=new Image;g.onload=v(Nn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Nn,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Nn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Nn,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function OC(c,d){let f=new Ts,g=new AbortController,T=setTimeout(()=>{g.abort(),Nn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?Nn(f,"TestPingServer: ok",!0,d):Nn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Nn(f,"TestPingServer: error",!1,d)})}function Nn(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function kC(){this.g=new yC}function FC(c,d,f){let g=f||"";try{gv(c,function(T,S){let P=T;l(T)&&(P=id(T)),d.push(g+S+"="+encodeURIComponent(P))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Rs(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Rs,sd),Rs.prototype.g=function(){return new Ma(this.l,this.j)},Rs.prototype.i=function(c){return function(){return c}}({});function Ma(c,d){ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ma,ze),t=Ma.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,xs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ev(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ev(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ns(this):xs(this),this.readyState==3&&Ev(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ns(this))},t.Qa=function(c){this.g&&(this.response=c,Ns(this))},t.ga=function(){this.g&&Ns(this)};function Ns(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function xs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Dv(c){let d="";return Y(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function gd(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Dv(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function be(c){ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(be,ze);var LC=/^https?$/i,VC=["POST","PUT"];t=be.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cd.g(),this.v=this.o?Zy(this.o):Zy(cd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Tv(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VC,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of f)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sv(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Tv(this,S)}};function Tv(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,bv(c),Pa(c)}function bv(c){c.A||(c.A=!0,tt(c,"complete"),tt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,tt(this,"complete"),tt(this,"abort"),Pa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pa(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cv(this):this.bb())},t.bb=function(){Cv(this)};function Cv(c){if(c.h&&typeof o<"u"&&(!c.v[1]||hn(c)!=4||c.Z()!=2)){if(c.u&&hn(c)==4)Ky(c.Ea,0,c);else if(tt(c,"readystatechange"),hn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var T=String(c.D).match(mv)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!LC.test(T?T.toLowerCase():"")}f=g}if(f)tt(c,"complete"),tt(c,"success");else{c.m=6;try{var S=2<hn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",bv(c)}}finally{Pa(c)}}}}function Pa(c,d){if(c.g){Sv(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||tt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Sv(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function hn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),mC(d)}};function Av(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function UC(c){let d={};c=(c.g&&2<=hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[T]||[];d[T]=S,S.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Rv(c){this.Aa=0,this.i=[],this.j=new Ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,c),this.cb=Ms("retryDelaySeedMs",1e4,c),this.Wa=Ms("forwardChannelMaxRetries",2,c),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new lv(c&&c.concurrentRequestLimit),this.Da=new kC,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rv.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){nt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Vv(this,null,this.W),ka(this)};function md(c){if(Nv(c),c.G==3){var d=c.U++,f=dn(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),Ps(c,f),d=new An(c,c.j,d),d.L=2,d.v=xa(dn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Uv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Aa(d)}Lv(c)}function Oa(c){c.g&&(vd(c),c.g.cancel(),c.g=null)}function Nv(c){Oa(c),c.u&&(a.clearTimeout(c.u),c.u=null),Fa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ka(c){if(!dv(c.h)&&!c.s){c.s=!0;var d=c.Ga;ms||$y(),ys||(ms(),ys=!0),Ql.add(d,c),c.B=0}}function jC(c,d){return hv(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ds(m(c.Ga,c,d),Fv(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new An(this,this.j,c),S=this.o;if(this.S&&(S?(S=y(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Mv(this,T,d),f=dn(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),Ps(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Dv(S)))+"&"+d:this.m&&gd(f,this.m,S)),pd(this.h,T),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),T.T=!0,ld(T,f,null)):ld(T,f,d),this.G=2}}else this.G==3&&(c?xv(this,c):this.i.length==0||dv(this.h)||xv(this))};function xv(c,d){var f;d?f=d.l:f=c.U++;let g=dn(c.I);we(g,"SID",c.K),we(g,"RID",f),we(g,"AID",c.T),Ps(c,g),c.m&&c.o&&gd(g,c.m,c.o),f=new An(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Mv(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pd(c.h,f),ld(f,g,d)}function Ps(c,d){c.H&&Y(c.H,function(f,g){we(d,g,f)}),c.l&&gv({},function(f,g){we(d,g,f)})}function Mv(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let S=-1;for(;;){let P=["count="+f];S==-1?0<f?(S=T[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let ye=!0;for(let Ue=0;Ue<f;Ue++){let he=T[Ue].g,Ge=T[Ue].map;if(he-=S,0>he)S=Math.max(0,T[Ue].g-100),ye=!1;else try{FC(Ge,P,"req"+he+"_")}catch{g&&g(Ge)}}if(ye){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Pv(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ms||$y(),ys||(ms(),ys=!0),Ql.add(d,c),c.v=0}}function yd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ds(m(c.Fa,c),Fv(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ov(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ds(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Oa(this),Ov(this))};function vd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Ov(c){c.g=new An(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=dn(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),Ps(c,d),c.m&&c.o&&gd(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xa(dn(d)),f.m=null,f.P=!0,av(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Oa(this),yd(this),nt(19))};function Fa(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function kv(c,d){var f=null;if(c.g==d){Fa(c),vd(c),c.g=null;var g=2}else if(fd(c.h,d))f=d.D,fv(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ba(),tt(g,new rv(g,f)),ka(c)}else Pv(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&jC(c,d)||g==2&&yd(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:ar(c,5);break;case 4:ar(c,10);break;case 3:ar(c,6);break;default:ar(c,2)}}}function Fv(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ar(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new or(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ra(g,"https"),xa(g),T?PC(g.toString(),f):OC(g.toString(),f)}else nt(2);c.G=0,c.l&&c.l.sa(d),Lv(c),Nv(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Lv(c){if(c.G=0,c.ka=[],c.l){let d=pv(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function Vv(c,d,f){var g=f instanceof or?dn(f):new or(f);if(g.g!="")d&&(g.g=d+"."+g.g),Na(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new or(null);g&&Ra(S,g),d&&(S.g=d),T&&Na(S,T),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&we(g,f,d),we(g,"VER",c.la),Ps(c,g),g}function Uv(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new be(new Rs({eb:f})):new be(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jv(){}t=jv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(c,d){return new dt(c,d)};function dt(c,d){ze.call(this),this.g=new Rv(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Zr(this)}A(dt,ze),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){md(this.g)},dt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=id(c),c=f);d.i.push(new DC(d.Ya++,c)),d.G==3&&ka(d)},dt.prototype.N=function(){this.g.l=null,delete this.j,md(this.g),delete this.g,dt.aa.N.call(this)};function Bv(c){od.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(Bv,od);function $v(){ad.call(this),this.status=1}A($v,ad);function Zr(c){this.g=c}A(Zr,jv),Zr.prototype.ua=function(){tt(this.g,"a")},Zr.prototype.ta=function(c){tt(this.g,new Bv(c))},Zr.prototype.sa=function(c){tt(this.g,new $v)},Zr.prototype.ra=function(){tt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,Pg=En.createWebChannelTransport=function(){return new La},Mg=En.getStatEventTarget=function(){return ba()},xg=En.Event=ir,nl=En.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ca.NO_ERROR=0,Ca.TIMEOUT=8,Ca.HTTP_ERROR=6,Ko=En.ErrorCode=Ca,iv.COMPLETE="complete",Ng=En.EventType=iv,Xy.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Wi=En.WebChannel=Xy,Rg=En.FetchXmlHttpFactory=Rs,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Ag=En.XhrIo=be}).apply(typeof tl<"u"?tl:typeof self<"u"?self:typeof window<"u"?window:{});var dT="@firebase/firestore";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var fs="10.12.5";var jr=new Qn("@firebase/firestore");function Qo(){return jr.logLevel}function V(t,...e){if(jr.logLevel<=ce.DEBUG){let n=e.map(yy);jr.debug(`Firestore (${fs}): ${t}`,...n)}}function Tn(t,...e){if(jr.logLevel<=ce.ERROR){let n=e.map(yy);jr.error(`Firestore (${fs}): ${t}`,...n)}}function es(t,...e){if(jr.logLevel<=ce.WARN){let n=e.map(yy);jr.warn(`Firestore (${fs}): ${t}`,...n)}}function yy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function H(t="Unexpected state"){let e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function Ie(t,e){t||H()}function G(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Nt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var al=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Vg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},Ug=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},jg=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new al(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Ve(e)}},Bg=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$g=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Bg(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new Hg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Q1(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Q1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function ts(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var He=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new He(0,0))}static max(){return new t(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ul=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},De=class t extends ul{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_t=class t extends ul{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Y1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(De.fromString(e))}static fromName(e){return new t(De.fromString(e).popFirst(5))}static empty(){return new t(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new De(e.slice()))}};var zg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};zg.UNKNOWN_ID=-1;function J1(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Br(i,U.empty(),e)}function Z1(t){return new Br(t.readTime,t.key,-1)}var Br=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),U.empty(),-1)}static max(){return new t(Q.max(),U.empty(),-1)}};function X1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ma(t){return C(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==eF)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function tF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ya(t){return t.name==="IndexedDbTransactionError"}var qT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ul(t){return t==null}function ta(t){return t===0&&1/t==-1/0}function nF(t){return typeof t=="number"&&Number.isInteger(t)&&!ta(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var rF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mG=[...rF,"documentOverlays"],iF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sF=iF,oF=[...sF,"indexConfiguration","indexState","indexEntries"];var yG=[...oF,"globals"];function hT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Se=class t{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ji(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ji(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ji(this.root,e,this.comparator,!0)}},Ji=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class t{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ll(this.data.getIterator())}getIteratorFrom(e){return new ll(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ll=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mt=class t{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new t([])}unionWith(e){let n=new Xe(_t.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ts(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var dl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var aF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(t){if(Ie(!!t),typeof t=="string"){let e=0,n=aF.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function tr(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}function vy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _y(t){let e=t.mapValue.fields.__previous_value__;return vy(e)?_y(e):e}function na(t){let e=bn(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}var Wg=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},hl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vy(t)?4:GT(t)?9007199254740991:10:H()}function an(t,e){if(t===e)return!0;let n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return na(t).isEqual(na(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=bn(i.timestampValue),a=bn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return tr(i.bytesValue).isEqual(tr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ce(i.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ce(i.integerValue)===Ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ce(i.doubleValue),a=Ce(s.doubleValue);return o===a?ta(o)===ta(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ts(t.arrayValue.values||[],e.arrayValue.values||[],an);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hT(o)!==hT(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!an(o[u],a[u])))return!1;return!0}(t,e);default:return H()}}function ra(t,e){return(t.values||[]).find(n=>an(n,e))!==void 0}function ns(t,e){if(t===e)return 0;let n=$r(t),r=$r(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ce(s.integerValue||s.doubleValue),u=Ce(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return fT(t.timestampValue,e.timestampValue);case 4:return fT(na(t),na(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=tr(s),u=tr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(Ce(s.latitude),Ce(o.latitude));return a!==0?a:pe(Ce(s.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let h=ns(a[l],u[l]);if(h)return h}return pe(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===rl.mapValue&&o===rl.mapValue)return 0;if(s===rl.mapValue)return 1;if(o===rl.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=pe(u[p],h[p]);if(m!==0)return m;let v=ns(a[u[p]],l[h[p]]);if(v!==0)return v}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw H()}}function fT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=bn(t),r=bn(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function rs(t){return Kg(t)}function Kg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Kg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Kg(n.fields[o])}`;return i+"}"}(t.mapValue):H()}function pT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qg(t){return!!t&&"integerValue"in t}function Iy(t){return!!t&&"arrayValue"in t}function gT(t){return!!t&&"nullValue"in t}function mT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sl(t){return!!t&&"mapValue"in t}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Kr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Jo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Kr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Jo(this.value))}};function WT(t){let e=[];return Kr(t.fields,(n,r)=>{let i=new _t([n]);if(sl(r)){let s=WT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Mt(e)}var zt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var is=class{constructor(e,n){this.position=e,this.inclusive=n}};function yT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!an(t.position[n],e.position[n]))return!1;return!0}var ss=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function cF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var fl=class{},Pe=class t extends fl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Jg(e,n,r):n==="array-contains"?new em(e,r):n==="in"?new tm(e,r):n==="not-in"?new nm(e,r):n==="array-contains-any"?new rm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Zg(e,r):new Xg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ns(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gt=class t extends fl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return KT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function KT(t){return t.op==="and"}function QT(t){return uF(t)&&KT(t)}function uF(t){for(let e of t.filters)if(e instanceof Gt)return!1;return!0}function Yg(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+rs(t.value);if(QT(t))return t.filters.map(e=>Yg(e)).join(",");{let e=t.filters.map(n=>Yg(n)).join(",");return`${t.op}(${e})`}}function YT(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&an(r.value,i.value)}(t,e):t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&YT(o,i.filters[a]),!0):!1}(t,e):void H()}function JT(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${rs(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(JT).join(" ,")+"}"}(t):"Filter"}var Jg=class extends Pe{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Zg=class extends Pe{constructor(e,n){super(e,"in",n),this.keys=ZT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Xg=class extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=ZT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ZT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var em=class extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Iy(n)&&ra(n.arrayValue,this.value)}},tm=class extends Pe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}},nm=class extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ra(this.value.arrayValue,n)}},rm=class extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ra(this.value.arrayValue,r))}};var im=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function _T(t,e=null,n=[],r=[],i=null,s=null,o=null){return new im(t,e,n,r,i,s,o)}function wy(t){let e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>rs(r)).join(",")),e.ue=n}return e.ue}function Ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vT(t.startAt,e.startAt)&&vT(t.endAt,e.endAt)}function sm(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Hr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function lF(t,e,n,r,i,s,o,a){return new Hr(t,e,n,r,i,s,o,a)}function jl(t){return new Hr(t)}function IT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XT(t){return t.collectionGroup!==null}function Zo(t){let e=G(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xe(_t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ss(s,r))}),n.has(_t.keyField().canonicalString())||e.ce.push(new ss(_t.keyField(),r))}return e.ce}function sn(t){let e=G(t);return e.le||(e.le=dF(e,Zo(t))),e.le}function dF(t,e){if(t.limitType==="F")return _T(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ss(i.field,s)});let n=t.endAt?new is(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new is(t.startAt.position,t.startAt.inclusive):null;return _T(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function om(t,e){let n=t.filters.concat([e]);return new Hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function am(t,e,n){return new Hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bl(t,e){return Ey(sn(t),sn(e))&&t.limitType===e.limitType}function eb(t){return`${wy(sn(t))}|lt:${t.limitType}`}function Ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>JT(i)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>rs(i)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function $l(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Zo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=yT(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Zo(r),i)||r.endAt&&!function(o,a,u){let l=yT(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Zo(r),i))}(t,e)}function hF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tb(t){return(e,n)=>{let r=!1;for(let i of Zo(t)){let s=fF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function fF(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ns(u,l):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return zT(this.inner)}size(){return this.innerSize}};var pF=new Se(U.comparator);function Cn(){return pF}var nb=new Se(U.comparator);function Yo(...t){let e=nb;for(let n of t)e=e.insert(n.key,n);return e}function rb(t){let e=nb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return Xo()}function ib(){return Xo()}function Xo(){return new nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var gF=new Se(U.comparator),mF=new Xe(U.comparator);function ue(...t){let e=mF;for(let n of t)e=e.add(n);return e}var yF=new Xe(pe);function vF(){return yF}function sb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ta(e)?"-0":e}}function ob(t){return{integerValue:""+t}}function _F(t,e){return nF(e)?ob(e):sb(t,e)}var os=class{constructor(){this._=void 0}};function IF(t,e,n){return t instanceof as?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vy(s)&&(s=_y(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof qr?cb(t,e):t instanceof zr?ub(t,e):function(i,s){let o=ab(i,s),a=wT(o)+wT(i.Pe);return Qg(o)&&Qg(i.Pe)?ob(a):sb(i.serializer,a)}(t,e)}function wF(t,e,n){return t instanceof qr?cb(t,e):t instanceof zr?ub(t,e):n}function ab(t,e){return t instanceof cs?function(r){return Qg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var as=class extends os{},qr=class extends os{constructor(e){super(),this.elements=e}};function cb(t,e){let n=lb(e);for(let r of t.elements)n.some(i=>an(i,r))||n.push(r);return{arrayValue:{values:n}}}var zr=class extends os{constructor(e){super(),this.elements=e}};function ub(t,e){let n=lb(e);for(let r of t.elements)n=n.filter(i=>!an(i,r));return{arrayValue:{values:n}}}var cs=class extends os{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function wT(t){return Ce(t.integerValue||t.doubleValue)}function lb(t){return Iy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function EF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qr&&i instanceof qr||r instanceof zr&&i instanceof zr?ts(r.elements,i.elements,an):r instanceof cs&&i instanceof cs?an(r.Pe,i.Pe):r instanceof as&&i instanceof as}(t.transform,e.transform)}var cm=class{constructor(e,n){this.version=e,this.transformResults=n}},Dn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var us=class{};function db(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ia(t.key,Dn.none()):new Gr(t.key,t.data,Dn.none());{let n=t.data,r=vt.empty(),i=new Xe(_t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cn(t.key,r,new Mt(i.toArray()),Dn.none())}}function DF(t,e,n){t instanceof Gr?function(i,s,o){let a=i.value.clone(),u=DT(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof cn?function(i,s,o){if(!ol(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=DT(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(hb(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ea(t,e,n,r){return t instanceof Gr?function(s,o,a,u){if(!ol(s.precondition,o))return a;let l=s.value.clone(),h=TT(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof cn?function(s,o,a,u){if(!ol(s.precondition,o))return a;let l=TT(s.fieldTransforms,u,o),h=o.data;return h.setAll(hb(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return ol(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=ab(r.transform,i||null);s!=null&&(n===null&&(n=vt.empty()),n.set(r.field,s))}return n||null}function ET(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ts(r,i,(s,o)=>EF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Gr=class extends us{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cn=class extends us{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function DT(t,e,n){let r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,wF(o,a,n[i]))}return r}function TT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,IF(s,o,e))}return r}var ia=class extends us{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},um=class extends us{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&DF(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ib();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=db(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ts(this.mutations,e.mutations,(n,r)=>ET(n,r))&&ts(this.baseMutations,e.baseMutations,(n,r)=>ET(n,r))}},dm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return gF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var hm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var xe,de;function bF(t){switch(t){default:return H();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function fb(t){if(t===void 0)return Tn("GRPC error has no .code"),N.UNKNOWN;switch(t){case xe.OK:return N.OK;case xe.CANCELLED:return N.CANCELLED;case xe.UNKNOWN:return N.UNKNOWN;case xe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case xe.INTERNAL:return N.INTERNAL;case xe.UNAVAILABLE:return N.UNAVAILABLE;case xe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case xe.NOT_FOUND:return N.NOT_FOUND;case xe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case xe.ABORTED:return N.ABORTED;case xe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case xe.DATA_LOSS:return N.DATA_LOSS;default:return H()}}(de=xe||(xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var bT=null;function CF(){return new TextEncoder}var SF=new Xn([4294967295,4294967295],0);function CT(t){let e=CF().encode(t),n=new Sg;return n.update(e),new Uint8Array(n.digest())}function ST(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xn([n,r],0),new Xn([i,s],0)]}var pm=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vr(`Invalid padding: ${n}`);if(r<0)throw new Vr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Xn.fromNumber(r)));return i.compare(SF)===1&&(i=new Xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=CT(e),[r,i]=ST(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=CT(e),[r,i]=ST(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Vr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pl=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Q.min(),i,new Se(pe),Cn(),ue())}},sa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var Zi=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},gl=class{constructor(e,n){this.targetId=e,this.me=n}},ml=class{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yl=class{constructor(){this.fe=0,this.ge=RT(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new sa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=RT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},gm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=AT(),this.Qe=new Se(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(sm(s))if(r===0){let o=new U(s.path);this.Ue(n,o,zt.newNoDocument(o,Q.min()))}else Ie(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}bT?.et(function(h,p,m,v,A){var x,R,O,q,j,le;let Te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Y=p.unchangedNames;return Y&&(Te.bloomFilter={applied:A===0,hashCount:(x=Y?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(q=(O=(R=Y?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&q!==void 0?q:0,padding:(le=(j=Y?.bits)===null||j===void 0?void 0:j.padding)!==null&&le!==void 0?le:0,mightContain:E=>{var y;return(y=v?.mightContain(E))!==null&&y!==void 0&&y}}),Te}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=tr(r).toUint8Array()}catch(u){if(u instanceof dl)return es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new pm(o,i,s)}catch(u){return es(u instanceof Vr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&sm(a.target)){let u=new U(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,zt.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=ue();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new pl(e,n,this.Qe,this.ke,r);return this.ke=Cn(),this.qe=AT(),this.Qe=new Se(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function AT(){return new Se(U.comparator)}function RT(){return new Se(U.comparator)}var AF={asc:"ASCENDING",desc:"DESCENDING"},RF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NF={and:"AND",or:"OR"},mm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ym(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function vl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xF(t,e){return vl(t,e.toTimestamp())}function on(t){return Ie(!!t),Q.fromTimestamp(function(n){let r=bn(n);return new He(r.seconds,r.nanos)}(t))}function Dy(t,e){return vm(t,e).canonicalString()}function vm(t,e){let n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gb(t){let e=De.fromString(t);return Ie(Ib(e)),e}function _m(t,e){return Dy(t.databaseId,e.path)}function Og(t,e){let n=gb(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(yb(n))}function mb(t,e){return Dy(t.databaseId,e)}function MF(t){let e=gb(t);return e.length===4?De.emptyPath():yb(e)}function Im(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yb(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NT(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function PF(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?N.UNKNOWN:fb(l.code);return new F(h,l.message||"")}(o);n=new ml(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Og(t,r.document.name),s=on(r.document.updateTime),o=r.document.createTime?on(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=zt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Zi(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Og(t,r.document),s=r.readTime?on(r.readTime):Q.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Og(t,r.document),s=r.removedTargetIds||[];n=new Zi([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new fm(i,s),a=r.targetId;n=new gl(a,o)}}return n}function OF(t,e){let n;if(e instanceof Gr)n={update:NT(t,e.key,e.value)};else if(e instanceof ia)n={delete:_m(t,e.key)};else if(e instanceof cn)n={update:NT(t,e.key,e.data),updateMask:HF(e.fieldMask)};else{if(!(e instanceof um))return H();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof as)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:xF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function kF(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?on(i.updateTime):on(s);return o.isEqual(Q.min())&&(o=on(s)),new cm(o,i.transformResults||[])}(n,e))):[]}function FF(t,e){return{documents:[mb(t,e.path)]}}function LF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mb(t,i);let s=function(l){if(l.length!==0)return _b(Gt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Qi(m.field),direction:jF(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=ym(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function VF(t){let e=MF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ie(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=vb(p);return m instanceof Gt&&QT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new ss(Yi(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ul(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new is(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new is(v,m)}(n.endAt)),lF(e,i,o,s,a,"F",u,l)}function UF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Yi(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yi(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Yi(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Yi(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Yi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>vb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function jF(t){return AF[t]}function BF(t){return RF[t]}function $F(t){return NF[t]}function Qi(t){return{fieldPath:t.canonicalString()}}function Yi(t){return _t.fromServerFormat(t.fieldPath)}function _b(t){return t instanceof Pe?function(n){if(n.op==="=="){if(mT(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NAN"}};if(gT(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mT(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NAN"}};if(gT(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(n.field),op:BF(n.op),value:n.value}}}(t):t instanceof Gt?function(n){let r=n.getFilters().map(i=>_b(i));return r.length===1?r[0]:{compositeFilter:{op:$F(n.op),filters:r}}}(t):H()}function HF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ib(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var oa=class t{constructor(e,n,r,i,s=Q.min(),o=Q.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wm=class{constructor(e){this.ct=e}};function qF(t){let e=VF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?am(e,e.limit,"L"):e}var _l=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ta(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=bn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(tr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?GT(e)?this.dt(n,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.St(e.arrayValue,n),this.ft(n)):H()}Vt(e,n){this.dt(n,25),this.bt(e,n)}bt(e,n){n.Rt(e)}wt(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}St(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),U.fromName(e).path.forEach(r=>{this.dt(n,60),this.bt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};_l.Dt=new _l;var Em=class{constructor(){this.an=new Dm}addToCollectionParentIndex(e,n){return this.an.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Br.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},Dm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(De.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(De.comparator)).toArray()}};var _G=new Uint8Array(0);var nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var aa=class t{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new t(0)}static Bn(){return new t(-1)}};var Tm=class{constructor(){this.changes=new nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Cm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ea(r.mutation,i,Mt.empty(),He.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=Lr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Cn(),o=Xo(),a=function(){return Xo()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof cn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ea(h.mutation,l,h.mutation.getFieldMask(),He.now())):o.set(l.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new bm(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xo(),i=new Se((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Mt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ib();h.forEach(m=>{if(!s.has(m)){let v=db(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Lr()),a=-1,u=s;return o.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:rb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=Yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Yo();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{let l=function(p,m){return new Hr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,zt.newInvalidDocument(h)))});let a=Yo();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&ea(h.mutation,l,Mt.empty(),He.now()),$l(n,l)&&(a=a.insert(u,l))}),a})}};var Sm=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return M.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:on(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:qF(i.bundledQuery),readTime:on(i.readTime)}}(n)),M.resolve()}};var Am=class{constructor(){this.overlays=new Se(U.comparator),this.Pr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Lr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Lr(),s=n.length+1,o=new U(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Se((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Lr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Lr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hm(n,r));let s=this.Pr.get(n);s===void 0&&(s=ue(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}};var Rm=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var ca=class{constructor(){this.Ir=new Xe(Me.Tr),this.Er=new Xe(Me.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){let r=new Me(e,n);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new Me(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){let n=new U(new De([])),r=new Me(n,e),i=new Me(n,e+1),s=[];return this.Er.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let n=new U(new De([])),r=new Me(n,e),i=new Me(n,e+1),s=ue();return this.Er.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Me(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,n){this.key=e,this.yr=n}static Tr(e,n){return U.comparator(e.key,n.key)||pe(e.yr,n.yr)}static dr(e,n){return pe(e.yr,n.yr)||U.comparator(e.key,n.key)}};var Nm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Xe(Me.Tr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lm(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.Sr=this.Sr.add(new Me(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Dr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Me(n,0),i=new Me(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{let a=this.br(o.yr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(pe);return n.forEach(i=>{let s=new Me(i,0),o=new Me(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new Me(new U(s),0),a=new Xe(pe);return this.Sr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.yr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return M.forEach(n.mutations,i=>{let s=new Me(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){let r=new Me(n,0),i=this.Sr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xm=class{constructor(e){this.Fr=e,this.docs=function(){return new Se(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Cn(),o=n.path,a=new U(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||X1(Z1(h),r)<=0||(i.has(h.key)||$l(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Mr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mm(this)}getSize(e){return M.resolve(this.size)}},Mm=class extends Tm{constructor(e){super(),this.ur=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}};var Pm=class{constructor(e){this.persistence=e,this.Or=new nr(n=>wy(n),Ey),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new ca,this.targetCount=0,this.Br=aa.Ln()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),M.resolve()}Qn(e){this.Or.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new aa(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Qn(n),M.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.Or.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Lr.Ar(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Lr.Vr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Lr.mr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Lr.pr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Lr.containsKey(n))}};var Om=class{constructor(e,n){this.kr={},this.overlays={},this.qr=new qT(0),this.Qr=!1,this.Qr=!0,this.Kr=new Rm,this.referenceDelegate=e(this),this.$r=new Pm(this),this.indexManager=new Em,this.remoteDocumentCache=function(i){return new xm(i)}(r=>this.referenceDelegate.Ur(r)),this.serializer=new wm(n),this.Wr=new Sm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Am,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new Nm(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new km(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(s=>this.referenceDelegate.zr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}jr(e,n){return M.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}},km=class extends Gg{constructor(e){super(),this.currentSequenceNumber=e}},Fm=class t{constructor(e){this.persistence=e,this.Hr=new ca,this.Jr=null}static Yr(e){return new t(e)}get Zr(){if(this.Jr)return this.Jr;throw H()}addReference(e,n,r){return this.Hr.addReference(r,n),this.Zr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Hr.removeReference(r,n),this.Zr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Zr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Hr.mr(n.targetId).forEach(i=>this.Zr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Zr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Gr(){this.Jr=new Set}zr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Zr,r=>{let i=U.fromPath(r);return this.Xr(e,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.Jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Xr(e,n).next(r=>{r?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(e){return 0}Xr(e,n){return M.or([()=>M.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.jr(e,n)])}};var Lm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ki=r,this.$i=i}static Ui(e,n){let r=ue(),i=ue();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Vm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Um=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return AD()?8:tF(yt())>0?6:4}()}initialize(e,n){this.Hi=e,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Vm;return this.Zi(e,n,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,n,o,a.size)})}).next(()=>s.result)}Xi(e,n,r,i){return r.documentReadCount<this.zi?(Qo()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),M.resolve()):(Qo()<=ce.DEBUG&&V("QueryEngine","Query:",Ki(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(Qo()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):M.resolve())}Ji(e,n){if(IT(n))return M.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=am(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ue(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.es(n,a);return this.ts(n,l,o,u.readTime)?this.Ji(e,am(n,null,"F")):this.ns(e,l,n,u)}))})))}Yi(e,n,r,i){return IT(n)||i.isEqual(Q.min())?M.resolve(null):this.Hi.getDocuments(e,r).next(s=>{let o=this.es(n,s);return this.ts(n,o,r,i)?M.resolve(null):(Qo()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(n)),this.ns(e,o,n,J1(i,-1)).next(a=>a))})}es(e,n){let r=new Xe(tb(e));return n.forEach((i,s)=>{$l(e,s)&&(r=r.add(s))}),r}ts(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zi(e,n,r){return Qo()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ki(n)),this.Hi.getDocumentsMatchingQuery(e,n,Br.min(),r)}ns(e,n,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var jm=class{constructor(e,n,r,i){this.persistence=e,this.rs=n,this.serializer=i,this.ss=new Se(pe),this.os=new nr(s=>wy(s),Ey),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cm(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ss))}};function zF(t,e,n,r){return new jm(t,e,n,r)}function wb(t,e){return C(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.cs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ue();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ls:l,removedBatchIds:o,addedBatchIds:a}))})})})}function GF(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.us.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=M.resolve();return m.forEach(A=>{v=v.next(()=>h.getEntry(u,A)).next(x=>{let R=l.docVersions.get(A);Ie(R!==null),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Eb(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.$r.getLastRemoteSnapshotVersion(n))}function WF(t,e){let n=G(t),r=e.snapshotVersion,i=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.us.newChangeBuffer({trackRemovals:!0});i=n.ss;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.$r.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.$r.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(et.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(x,R,O){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,v,h)&&a.push(n.$r.updateTargetData(s,v))});let u=Cn(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(KF(s,o,e.documentUpdates).next(h=>{u=h.hs,l=h.Ps})),!r.isEqual(Q.min())){let h=n.$r.getLastRemoteSnapshotVersion(s).next(p=>n.$r.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ss=i,s))}function KF(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Cn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{hs:o,Ps:i}})}function QF(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YF(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.$r.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.$r.allocateTargetId(r).next(o=>(i=new oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ss=n.ss.insert(r.targetId,r),n.os.set(e,r.targetId)),r})}function Bm(t,e,n){return C(this,null,function*(){let r=G(t),i=r.ss.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ya(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)})}function xT(t,e,n){let r=G(t),i=Q.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=G(u),m=p.os.get(h);return m!==void 0?M.resolve(p.ss.get(m)):p.$r.getTargetData(l,h)}(r,o,sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.rs.getDocumentsMatchingQuery(o,e,n?i:Q.min(),n?s:ue())).next(a=>(JF(r,hF(e),a),{documents:a,Is:s})))}function JF(t,e,n){let r=t._s.get(e)||Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t._s.set(e,r)}var Il=class{constructor(){this.activeTargetIds=vF()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $m=class{constructor(){this.io=new Il,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,n,r){this.so[e]=n}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Il,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Hm=class{oo(e){}shutdown(){}};var wl=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var il=null;function kg(){return il===null?il=function(){return 268435456+Math.round(2147483648*Math.random())}():il++,"0x"+il.toString(16)}var ZF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var qm=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var Ze="WebChannelConnection",zm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+n.host,this.Do=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get vo(){return!1}Fo(n,r,i,s,o){let a=kg(),u=this.Mo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(l,s,o),this.Oo(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw es("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}No(n,r,i,s,o,a){return this.Fo(n,r,i,s,o)}xo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Mo(n,r){let i=ZF[n];return`${this.bo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,n,r,i){let s=kg();return new Promise((o,a)=>{let u=new Ag;u.setWithCredentials(!0),u.listenOnce(Ng.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ko.NO_ERROR:let h=u.getResponseJson();V(Ze,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ko.TIMEOUT:V(Ze,`RPC '${e}' ${s} timed out`),a(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:let p=u.getStatus();if(V(Ze,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let A=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(O)>=0?O:N.UNKNOWN}(v.status);a(new F(A,v.message))}else a(new F(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(N.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{V(Ze,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(Ze,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Lo(e,n,r){let i=kg(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pg(),a=Mg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Rg({})),this.xo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(Ze,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,A=new qm({Po:R=>{v?V(Ze,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(Ze,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(Ze,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Io:()=>p.close()}),x=(R,O,q)=>{R.listen(O,j=>{try{q(j)}catch(le){setTimeout(()=>{throw le},0)}})};return x(p,Wi.EventType.OPEN,()=>{v||(V(Ze,`RPC '${e}' stream ${i} transport opened.`),A.po())}),x(p,Wi.EventType.CLOSE,()=>{v||(v=!0,V(Ze,`RPC '${e}' stream ${i} transport closed`),A.wo())}),x(p,Wi.EventType.ERROR,R=>{v||(v=!0,es(Ze,`RPC '${e}' stream ${i} transport errored:`,R),A.wo(new F(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,Wi.EventType.MESSAGE,R=>{var O;if(!v){let q=R.data[0];Ie(!!q);let j=q,le=j.error||((O=j[0])===null||O===void 0?void 0:O.error);if(le){V(Ze,`RPC '${e}' stream ${i} received error:`,le);let Te=le.status,Y=function(_){let w=xe[_];if(w!==void 0)return fb(w)}(Te),E=le.message;Y===void 0&&(Y=N.INTERNAL,E="Unknown error status: "+Te+" with message "+le.message),v=!0,A.wo(new F(Y,E)),p.close()}else V(Ze,`RPC '${e}' stream ${i} received:`,q),A.So(q)}}),x(a,xg.STAT_EVENT,R=>{R.stat===nl.PROXY?V(Ze,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===nl.NOPROXY&&V(Ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.yo()},0),A}};function Fg(){return typeof document<"u"?document:null}function Hl(t){return new mm(t,!0)}var El=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ai=e,this.timerId=n,this.Bo=r,this.ko=i,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let n=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var Dl=class{constructor(e,n,r,i,s,o,a,u){this.ai=e,this.jo=r,this.Ho=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new El(e,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return C(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return C(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,n){return C(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(n)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===n&&this.h_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,n){let r=this.l_(this.Jo);this.stream=this.I_(e,n),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>++this.Xo==1?this.T_(i):this.onNext(i))})}r_(){this.state=5,this.e_.Wo(()=>C(this,null,function*(){this.state=0,this.start()}))}P_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return n=>{this.ai.enqueueAndForget(()=>this.Jo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gm=class extends Dl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}I_(e,n){return this.connection.Lo("Listen",e,n)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let n=PF(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?on(o.readTime):Q.min()}(e);return this.listener.E_(n,r)}d_(e){let n={};n.database=Im(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=sm(u)?{documents:FF(s,u)}:{query:LF(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pb(s,o.resumeToken);let l=ym(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Q.min())>0){a.readTime=vl(s,o.snapshotVersion.toTimestamp());let l=ym(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=UF(this.serializer,e);r&&(n.labels=r),this.__(n)}A_(e){let n={};n.database=Im(this.serializer),n.removeTarget=e,this.__(n)}},Wm=class extends Dl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,n){return this.connection.Lo("Write",e,n)}T_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let n=kF(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.f_(r,n)}g_(){let e={};e.database=Im(this.serializer),this.__(e)}V_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>OF(this.serializer,r))};this.__(n)}};var Km=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,vm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}No(e,n,r,i,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,vm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Qm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Tn(n),this.b_=!1):V("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var Ym=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Qr(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return C(this,null,function*(){let l=G(u);l.N_.add(4),yield va(l),l.k_.set("Unknown"),l.N_.delete(4),yield ql(l)})}(this))}))}),this.k_=new Qm(r,i)}};function ql(t){return C(this,null,function*(){if(Qr(t))for(let e of t.L_)yield e(!0)})}function va(t){return C(this,null,function*(){for(let e of t.L_)yield e(!1)})}function Db(t,e){let n=G(t);n.O_.has(e.targetId)||(n.O_.set(e.targetId,e),Sy(n)?Cy(n):ps(n).n_()&&by(n,e))}function Ty(t,e){let n=G(t),r=ps(n);n.O_.delete(e),r.n_()&&Tb(n,e),n.O_.size===0&&(r.n_()?r.s_():Qr(n)&&n.k_.set("Unknown"))}function by(t,e){if(t.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ps(t).d_(e)}function Tb(t,e){t.q_.xe(e),ps(t).A_(e)}function Cy(t){t.q_=new gm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.O_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ps(t).start(),t.k_.D_()}function Sy(t){return Qr(t)&&!ps(t).t_()&&t.O_.size>0}function Qr(t){return G(t).N_.size===0}function bb(t){t.q_=void 0}function XF(t){return C(this,null,function*(){t.k_.set("Online")})}function eL(t){return C(this,null,function*(){t.O_.forEach((e,n)=>{by(t,e)})})}function tL(t,e){return C(this,null,function*(){bb(t),Sy(t)?(t.k_.F_(e),Cy(t)):t.k_.set("Unknown")})}function nL(t,e,n){return C(this,null,function*(){if(t.k_.set("Online"),e instanceof ml&&e.state===2&&e.cause)try{yield function(i,s){return C(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.O_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.O_.delete(a),i.q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tl(t,r)}else if(e instanceof Zi?t.q_.Ke(e):e instanceof gl?t.q_.He(e):t.q_.We(e),!n.isEqual(Q.min()))try{let r=yield Eb(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.O_.get(l);h&&s.O_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.O_.get(u);if(!h)return;s.O_.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),Tb(s,u);let p=new oa(h.target,u,l,h.sequenceNumber);by(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Tl(t,r)}})}function Tl(t,e,n){return C(this,null,function*(){if(!ya(e))throw e;t.N_.add(1),yield va(t),t.k_.set("Offline"),n||(n=()=>Eb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.N_.delete(1),yield ql(t)}))})}function Cb(t,e){return e().catch(n=>Tl(t,n,e))}function zl(t){return C(this,null,function*(){let e=G(t),n=rr(e),r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;rL(e);)try{let i=yield QF(e.localStore,r);if(i===null){e.x_.length===0&&n.s_();break}r=i.batchId,iL(e,i)}catch(i){yield Tl(e,i)}Sb(e)&&Ab(e)})}function rL(t){return Qr(t)&&t.x_.length<10}function iL(t,e){t.x_.push(e);let n=rr(t);n.n_()&&n.R_&&n.V_(e.mutations)}function Sb(t){return Qr(t)&&!rr(t).t_()&&t.x_.length>0}function Ab(t){rr(t).start()}function sL(t){return C(this,null,function*(){rr(t).g_()})}function oL(t){return C(this,null,function*(){let e=rr(t);for(let n of t.x_)e.V_(n.mutations)})}function aL(t,e,n){return C(this,null,function*(){let r=t.x_.shift(),i=dm.from(r,e,n);yield Cb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield zl(t)})}function cL(t,e){return C(this,null,function*(){e&&rr(t).R_&&(yield function(r,i){return C(this,null,function*(){if(function(o){return bF(o)&&o!==N.ABORTED}(i.code)){let s=r.x_.shift();rr(r).i_(),yield Cb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield zl(r)}})}(t,e)),Sb(t)&&Ab(t)})}function MT(t,e){return C(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Qr(n);n.N_.add(3),yield va(n),r&&n.k_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.N_.delete(3),yield ql(n)})}function uL(t,e){return C(this,null,function*(){let n=G(t);e?(n.N_.delete(2),yield ql(n)):e||(n.N_.add(2),yield va(n),n.k_.set("Unknown"))})}function ps(t){return t.Q_||(t.Q_=function(n,r,i){let s=G(n);return s.y_(),new Gm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{To:XF.bind(null,t),Ao:eL.bind(null,t),Vo:tL.bind(null,t),E_:nL.bind(null,t)}),t.L_.push(e=>C(this,null,function*(){e?(t.Q_.i_(),Sy(t)?Cy(t):t.k_.set("Unknown")):(yield t.Q_.stop(),bb(t))}))),t.Q_}function rr(t){return t.K_||(t.K_=function(n,r,i){let s=G(n);return s.y_(),new Wm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{To:()=>Promise.resolve(),Ao:sL.bind(null,t),Vo:cL.bind(null,t),m_:oL.bind(null,t),f_:aL.bind(null,t)}),t.L_.push(e=>C(this,null,function*(){e?(t.K_.i_(),yield zl(t)):(yield t.K_.stop(),t.x_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.x_.length} pending writes`),t.x_=[]))}))),t.K_}var Jm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ay(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),ya(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var bl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Cl=class{constructor(){this.U_=new Se(U.comparator)}track(e){let n=e.doc.key,r=this.U_.get(n);r?e.type!==0&&r.type===3?this.U_=this.U_.insert(n,e):e.type===3&&r.type!==1?this.U_=this.U_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.U_=this.U_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.U_=this.U_.remove(n):e.type===1&&r.type===2?this.U_=this.U_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.U_=this.U_.insert(n,{type:2,doc:e.doc}):H():this.U_=this.U_.insert(n,e)}W_(){let e=[];return this.U_.inorderTraversal((n,r)=>{e.push(r)}),e}},ls=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,bl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Zm=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},Xm=class{constructor(){this.queries=PT(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,r){let i=G(n),s=i.queries;i.queries=PT(),s.forEach((o,a)=>{for(let u of a.z_)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function PT(){return new nr(t=>eb(t),Bl)}function Ry(t,e){return C(this,null,function*(){let n=G(t),r=3,i=e.query,s=n.queries.get(i);s?!s.j_()&&e.H_()&&(r=2):(s=new Zm,r=e.H_()?0:1);try{switch(r){case 0:s.G_=yield n.onListen(i,!0);break;case 1:s.G_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Ay(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.z_.push(e),e.Y_(n.onlineState),s.G_&&e.Z_(s.G_)&&xy(n)})}function Ny(t,e){return C(this,null,function*(){let n=G(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?i=e.H_()?0:1:!s.j_()&&e.H_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function lL(t,e){let n=G(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.z_)a.Z_(i)&&(r=!0);o.G_=i}}r&&xy(n)}function dL(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let s of i.z_)s.onError(n);r.queries.delete(e)}function xy(t){t.J_.forEach(e=>{e.next()})}var ey,OT;(OT=ey||(ey={})).X_="default",OT.Cache="cache";var ua=class{constructor(e,n,r){this.query=e,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ta?this.ra(e)&&(this.ea.next(e),n=!0):this.ia(e,this.onlineState)&&(this.sa(e),n=!0),this.na=e,n}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let n=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),n=!0),n}ia(e,n){if(!e.fromCache||!this.H_())return!0;let r=n!=="Offline";return(!this.options.oa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let n=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(e){e=ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==ey.Cache}};var Sl=class{constructor(e){this.key=e}},Al=class{constructor(e){this.key=e}},ty=class{constructor(e,n){this.query=e,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ue(),this.mutatedKeys=ue(),this.da=tb(e),this.Aa=new bl(this.da)}get Ra(){return this.Ia}Va(e,n){let r=n?n.ma:new Cl,i=n?n.Aa:this.Aa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=$l(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?A!==x&&(r.track({type:3,doc:v}),R=!0):this.fa(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.da(v,u)>0||l&&this.da(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Aa:o,ma:r,ts:a,mutatedKeys:s}}fa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let o=e.ma.W_();o.sort((h,p)=>function(v,A){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return x(v)-x(A)}(h.type,p.type)||this.da(h.doc,p.doc)),this.ga(r),i=i!=null&&i;let a=n&&!i?this.pa():[],u=this.Ea.size===0&&this.current&&!i?1:0,l=u!==this.Ta;return this.Ta=u,o.length!==0||l?{snapshot:new ls(this.query,e.Aa,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Cl,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=ue(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});let n=[];return e.forEach(r=>{this.Ea.has(r)||n.push(new Al(r))}),this.Ea.forEach(r=>{e.has(r)||n.push(new Sl(r))}),n}Sa(e){this.Ia=e.Is,this.Ea=ue();let n=this.Va(e.documents);return this.applyChanges(n,!0)}ba(){return ls.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},ny=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ry=class{constructor(e){this.key=e,this.Da=!1}},iy=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new nr(a=>eb(a),Bl),this.Fa=new Map,this.Ma=new Set,this.xa=new Se(U.comparator),this.Oa=new Map,this.Na=new ca,this.La={},this.Ba=new Map,this.ka=aa.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function hL(t,e,n=!0){return C(this,null,function*(){let r=Ob(t),i,s=r.va.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=yield Rb(r,e,n,!0),i})}function fL(t,e){return C(this,null,function*(){let n=Ob(t);yield Rb(n,e,!0,!1)})}function Rb(t,e,n,r){return C(this,null,function*(){let i=yield YF(t.localStore,sn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield pL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Db(t.remoteStore,i),a})}function pL(t,e,n,r,i){return C(this,null,function*(){t.Qa=(p,m,v)=>function(x,R,O,q){return C(this,null,function*(){let j=R.view.Va(O);j.ts&&(j=yield xT(x.localStore,R.query,!1).then(({documents:E})=>R.view.Va(E,j)));let le=q&&q.targetChanges.get(R.targetId),Te=q&&q.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(j,x.isPrimaryClient,le,Te);return FT(x,R.targetId,Y.ya),Y.snapshot})}(t,p,m,v);let s=yield xT(t.localStore,e,!0),o=new ty(e,s.Is),a=o.Va(s.documents),u=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);FT(t,n,l.ya);let h=new ny(e,n,o);return t.va.set(e,h),t.Fa.has(n)?t.Fa.get(n).push(e):t.Fa.set(n,[e]),l.snapshot})}function gL(t,e,n){return C(this,null,function*(){let r=G(t),i=r.va.get(e),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter(o=>!Bl(o,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Bm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ty(r.remoteStore,i.targetId),sy(r,i.targetId)}).catch(ma))):(sy(r,i.targetId),yield Bm(r.localStore,i.targetId,!0))})}function mL(t,e){return C(this,null,function*(){let n=G(t),r=n.va.get(e),i=n.Fa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ty(n.remoteStore,r.targetId))})}function yL(t,e,n){return C(this,null,function*(){let r=TL(t);try{let i=yield function(o,a){let u=G(o),l=He.now(),h=a.reduce((v,A)=>v.add(A.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let A=Cn(),x=ue();return u.us.getEntries(v,h).next(R=>{A=R,A.forEach((O,q)=>{q.isValidDocument()||(x=x.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,A)).next(R=>{p=R;let O=[];for(let q of a){let j=TF(q,p.get(q.key).overlayedDocument);j!=null&&O.push(new cn(q.key,j,WT(j.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,O,a)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(v,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:rb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.La[o.currentUser.toKey()];l||(l=new Se(pe)),l=l.insert(a,u),o.La[o.currentUser.toKey()]=l}(r,i.batchId,n),yield _a(r,i.changes),yield zl(r.remoteStore)}catch(i){let s=Ay(i,"Failed to persist write");n.reject(s)}})}function Nb(t,e){return C(this,null,function*(){let n=G(t);try{let r=yield WF(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Oa.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Da=!0:i.modifiedDocuments.size>0?Ie(o.Da):i.removedDocuments.size>0&&(Ie(o.Da),o.Da=!1))}),yield _a(n,r,e)}catch(r){yield ma(r)}})}function kT(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.va.forEach((s,o)=>{let a=o.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=G(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.z_)m.Y_(a)&&(l=!0)}),l&&xy(u)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vL(t,e,n){return C(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Oa.get(e),s=i&&i.key;if(s){let o=new Se(U.comparator);o=o.insert(s,zt.newNoDocument(s,Q.min()));let a=ue().add(s),u=new pl(Q.min(),new Map,new Se(pe),o,a);yield Nb(r,u),r.xa=r.xa.remove(s),r.Oa.delete(e),My(r)}else yield Bm(r.localStore,e,!1).then(()=>sy(r,e,n)).catch(ma)})}function _L(t,e){return C(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield GF(n.localStore,e);Mb(n,r,null),xb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield _a(n,i)}catch(i){yield ma(i)}})}function IL(t,e,n){return C(this,null,function*(){let r=G(t);try{let i=yield function(o,a){let u=G(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Mb(r,e,n),xb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield _a(r,i)}catch(i){yield ma(i)}})}function xb(t,e){(t.Ba.get(e)||[]).forEach(n=>{n.resolve()}),t.Ba.delete(e)}function Mb(t,e,n){let r=G(t),i=r.La[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function sy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Fa.get(e))t.va.delete(r),n&&t.Ca.Ka(r,n);t.Fa.delete(e),t.isPrimaryClient&&t.Na.mr(e).forEach(r=>{t.Na.containsKey(r)||Pb(t,r)})}function Pb(t,e){t.Ma.delete(e.path.canonicalString());let n=t.xa.get(e);n!==null&&(Ty(t.remoteStore,n),t.xa=t.xa.remove(e),t.Oa.delete(n),My(t))}function FT(t,e,n){for(let r of n)r instanceof Sl?(t.Na.addReference(r.key,e),wL(t,r)):r instanceof Al?(V("SyncEngine","Document no longer in limbo: "+r.key),t.Na.removeReference(r.key,e),t.Na.containsKey(r.key)||Pb(t,r.key)):H()}function wL(t,e){let n=e.key,r=n.path.canonicalString();t.xa.get(n)||t.Ma.has(r)||(V("SyncEngine","New document in limbo: "+n),t.Ma.add(r),My(t))}function My(t){for(;t.Ma.size>0&&t.xa.size<t.maxConcurrentLimboResolutions;){let e=t.Ma.values().next().value;t.Ma.delete(e);let n=new U(De.fromString(e)),r=t.ka.next();t.Oa.set(r,new ry(n)),t.xa=t.xa.insert(n,r),Db(t.remoteStore,new oa(sn(jl(n.path)),r,"TargetPurposeLimboResolution",qT.oe))}}function _a(t,e,n){return C(this,null,function*(){let r=G(t),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach((a,u)=>{o.push(r.Qa(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Lm.Ui(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.E_(i),yield function(u,l){return C(this,null,function*(){let h=G(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.Ki,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>M.forEach(m.$i,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ya(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.ss.get(m),A=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(A);h.ss=h.ss.insert(m,x)}}})}(r.localStore,s))})}function EL(t,e){return C(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield wb(n.localStore,e);n.currentUser=e,function(s,o){s.Ba.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,o))})}),s.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _a(n,r.ls)}})}function DL(t,e){let n=G(t),r=n.Oa.get(e);if(r&&r.Da)return ue().add(r.key);{let i=ue(),s=n.Fa.get(e);if(!s)return i;for(let o of s){let a=n.va.get(o);i=i.unionWith(a.view.Ra)}return i}}function Ob(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vL.bind(null,e),e.Ca.E_=lL.bind(null,e.eventManager),e.Ca.Ka=dL.bind(null,e.eventManager),e}function TL(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IL.bind(null,e),e}var Rl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){this.serializer=Hl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return zF(this.persistence,new Um,e.initialUser,this.serializer)}createPersistence(e){return new Om(Fm.Yr,this.serializer)}createSharedClientState(e){return new $m}terminate(){return C(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var oy=class{initialize(e,n){return C(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=EL.bind(null,this.syncEngine),yield uL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Xm}()}createDatastore(e){let n=Hl(e.databaseInfo.databaseId),r=function(s){return new zm(s)}(e.databaseInfo);return function(s,o,a,u){return new Km(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Ym(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kT(this.syncEngine,n,0),function(){return wl.D()?new wl:new Hm}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new iy(i,s,o,a,u,l);return h&&(p.qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return C(this,null,function*(){var e,n;yield function(i){return C(this,null,function*(){let s=G(i);V("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield va(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var la=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var ay=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=cl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>C(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ay(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Lg(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield wb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function LT(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield CL(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>MT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>MT(e.remoteStore,i)),t._onlineComponents=e})}function bL(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function CL(t){return C(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!bL(n))throw n;es("Error using user provided cache. Falling back to memory cache: "+n),yield Lg(t,new Rl)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Lg(t,new Rl);return t._offlineComponents})}function kb(t){return C(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield LT(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield LT(t,new oy))),t._onlineComponents})}function SL(t){return kb(t).then(e=>e.syncEngine)}function Nl(t){return C(this,null,function*(){let e=yield kb(t),n=e.eventManager;return n.onListen=hL.bind(null,e.syncEngine),n.onUnlisten=gL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mL.bind(null,e.syncEngine),n})}function AL(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,a,u,l){let h=new la({next:m=>{o.enqueueAndForget(()=>Ny(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new F(N.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new F(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ua(jl(a.path),h,{includeMetadataChanges:!0,oa:!0});return Ry(s,p)}(yield Nl(t),t.asyncQueue,e,n,r)})),r.promise}function RL(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,a,u,l){let h=new la({next:m=>{o.enqueueAndForget(()=>Ny(s,p)),m.fromCache&&u.source==="server"?l.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ua(a,h,{includeMetadataChanges:!0,oa:!0});return Ry(s,p)}(yield Nl(t),t.asyncQueue,e,n,r)})),r.promise}function Fb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var VT=new Map;function Lb(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NL(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UT(t){if(!U.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jT(t){if(U.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function Pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Gl(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var xl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ds=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vg;switch(r.type){case"firstParty":return new $g(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=VT.get(n);r&&(V("ComponentProvider","Removing Datastore"),VT.delete(n),r.terminate())}(this),Promise.resolve()}};function Vb(t,e,n,r={}){var i;let s=(t=Pt(t,ds))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ve.MOCK_USER;else{a=TD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ve(l)}t._authCredentials=new Ug(new al(a,u))}}var Wr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},at=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},er=class t extends Wr{constructor(e,n,r){super(e,n,jl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ub(t,e,...n){if(t=Je(t),Lb("collection","path",e),t instanceof ds){let r=De.fromString(e,...n);return jT(r),new er(t,null,r)}{if(!(t instanceof at||t instanceof er))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(De.fromString(e,...n));return jT(r),new er(t.firestore,null,r)}}function Py(t,e,...n){if(t=Je(t),arguments.length===1&&(e=cl.newId()),Lb("doc","path",e),t instanceof ds){let r=De.fromString(e,...n);return UT(r),new at(t,null,new U(r))}{if(!(t instanceof at||t instanceof er))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(De.fromString(e,...n));return UT(r),new at(t.firestore,t instanceof er?t.converter:null,new U(r))}}var cy=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new El(this,"async_queue_retry"),this.Tu=()=>{let n=Fg();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};let e=Fg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let n=Fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let n=new qt;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return C(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!ya(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let n=this._u.then(()=>(this.hu=!0,e().catch(r=>{this.lu=r,this.hu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.hu=!1,r))));return this._u=n,n}enqueueAfterDelay(e,n,r){this.Eu(),this.Iu.indexOf(e)>-1&&(n=0);let i=Jm.createAndSchedule(this,e,n,r,s=>this.Ru(s));return this.cu.push(i),i}Eu(){this.lu&&H()}verifyOperationInProgress(){}Vu(){return C(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let n of this.cu)if(n.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.cu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let n=this.cu.indexOf(e);this.cu.splice(n,1)}};function BT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var un=class extends ds{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new cy}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bb(this),this._firestoreClient.terminate()}};function jb(t,e){let n=typeof t=="object"?t:Vo(),r=typeof t=="string"?t:e||"(default)",i=cg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ED("firestore");s&&Vb(i,...s)}return i}function Wl(t){return t._firestoreClient||Bb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Bb(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Wg(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fb(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new ay(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var da=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(et.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ha=class{constructor(e){this._methodName=e}};var fa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var xL=/^__.*__$/,uy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gr(e,this.data,n,this.fieldTransforms)}},Ml=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function $b(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var ly=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Ol(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if($b(this.yu)&&xL.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},dy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hl(e)}Ou(e,n,r,i=!1){return new ly({yu:e,methodName:n,xu:r,path:_t.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oy(t){let e=t._freezeSettings(),n=Hl(t._databaseId);return new dy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ML(t,e,n,r,i,s={}){let o=t.Ou(s.merge||s.mergeFields?2:0,e,n,i);ky("Data must be an object, but it was:",o,r);let a=Hb(r,o),u,l;if(s.merge)u=new Mt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=hy(e,p,n);if(!o.contains(m))throw new F(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zb(h,m)||h.push(m)}u=new Mt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new uy(new vt(a),u,l)}var Pl=class t extends ha{_toFieldTransform(e){if(e.yu!==2)throw e.yu===1?e.Fu(`${this._methodName}() can only appear at the top level of your update data`):e.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function PL(t,e,n,r){let i=t.Ou(1,e,n);ky("Data must be an object, but it was:",i,r);let s=[],o=vt.empty();Kr(r,(u,l)=>{let h=Fy(e,u,n);l=Je(l);let p=i.Cu(h);if(l instanceof Pl)s.push(h);else{let m=Ia(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Mt(s);return new Ml(o,a,i.fieldTransforms)}function OL(t,e,n,r,i,s){let o=t.Ou(1,e,n),a=[hy(e,r,n)],u=[i];if(s.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hy(e,s[m])),u.push(s[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!zb(l,a[m])){let v=a[m],A=u[m];A=Je(A);let x=o.Cu(v);if(A instanceof Pl)l.push(v);else{let R=Ia(A,x);R!=null&&(l.push(v),h.set(v,R))}}let p=new Mt(l);return new Ml(h,p,o.fieldTransforms)}function kL(t,e,n,r=!1){return Ia(n,t.Ou(r?4:3,e))}function Ia(t,e){if(qb(t=Je(t)))return ky("Unsupported field value:",e,t),Hb(t,e);if(t instanceof ha)return function(r,i){if(!$b(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ia(a,i.vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _F(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=He.fromDate(r);return{timestampValue:vl(i.serializer,s)}}if(r instanceof He){let s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vl(i.serializer,s)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:pb(i.serializer,r._byteString)};if(r instanceof at){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Dy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${Gl(r)}`)}(t,e)}function Hb(t,e){let n={};return zT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(t,(r,i)=>{let s=Ia(i,e.Su(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof fa||t instanceof da||t instanceof at||t instanceof ha)}function ky(t,e,n){if(!qb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Gl(n);throw r==="an object"?e.Fu(t+" a custom object"):e.Fu(t+" "+r)}}function hy(t,e,n){if((e=Je(e))instanceof hs)return e._internalPath;if(typeof e=="string")return Fy(t,e);throw Ol("Field path arguments must be of type string or ",t,!1,void 0,n)}var FL=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search(FL)>=0)throw Ol(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hs(...e.split("."))._internalPath}catch{throw Ol(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ol(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+t+u)}function zb(t,e){return t.some(n=>n.isEqual(e))}var kl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},fy=class extends kl{data(){return super.data()}};function Ly(t,e){return typeof e=="string"?Fy(t,e):e instanceof hs?e._internalPath:e._delegate._internalPath}function Gb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pa=class{},py=class extends pa{};function Wb(t,e,...n){let r=[];e instanceof pa&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof gy).length,a=s.filter(u=>u instanceof Fl).length;if(o>1||o>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Fl=class t extends py{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Qb(e._query,n),new Wr(e.firestore,e.converter,om(e._query,n))}_parse(e){let n=Oy(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){HT(p,h);let v=[];for(let A of p)v.push($T(u,s,A));m={arrayValue:{values:v}}}else m=$T(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||HT(p,h),m=kL(a,o,p,h==="in"||h==="not-in");return Pe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Kb(t,e,n){let r=e,i=Ly("where",t);return Fl._create(i,r,n)}var gy=class t extends pa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)Qb(o,u),o=om(o,u)}(e._query,n),new Wr(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function $T(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XT(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(De.fromString(n));if(!U.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pT(t,new U(r))}if(n instanceof at)return pT(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gl(n)}.`)}function HT(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qb(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var my=class{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Kr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new fa(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=_y(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){let n=bn(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=De.fromString(e);Ie(Ib(r));let i=new hl(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function LL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ur=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ll=class extends kl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Xi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Ly("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Xi=class extends Ll{data(e={}){return super.data(e)}},Vl=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ur(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xi(this._firestore,this._userDataWriter,r.key,r,new Ur(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Xi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Xi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ur(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:VL(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function VL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function Yb(t){t=Pt(t,at);let e=Pt(t.firestore,un);return AL(Wl(e),t._key).then(n=>tC(e,t,n))}var ga=class extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}};function Jb(t){t=Pt(t,Wr);let e=Pt(t.firestore,un),n=Wl(e),r=new ga(e);return Gb(t._query),RL(n,t._query).then(i=>new Vl(e,r,t,i))}function Zb(t,e,n,...r){t=Pt(t,at);let i=Pt(t.firestore,un),s=Oy(i),o;return o=typeof(e=Je(e))=="string"||e instanceof hs?OL(s,"updateDoc",t._key,e,n,r):PL(s,"updateDoc",t._key,e),Uy(i,[o.toMutation(t._key,Dn.exists(!0))])}function Xb(t){return Uy(Pt(t.firestore,un),[new ia(t._key,Dn.none())])}function eC(t,e){let n=Pt(t.firestore,un),r=Py(t),i=LL(t.converter,e);return Uy(n,[ML(Oy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}function Vy(t,...e){var n,r,i;t=Je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||BT(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(BT(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof at)l=Pt(t.firestore,un),h=jl(t._key.path),u={next:p=>{e[o]&&e[o](tC(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Pt(t,Wr);l=Pt(p.firestore,un),h=p._query;let m=new ga(l);u={next:v=>{e[o]&&e[o](new Vl(l,m,p,v))},error:e[o+1],complete:e[o+2]},Gb(t._query)}return function(m,v,A,x){let R=new la(x),O=new ua(v,R,A);return m.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return Ry(yield Nl(m),O)})),()=>{R.Ga(),m.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return Ny(yield Nl(m),O)}))}}(Wl(l),h,a,u)}function Uy(t,e){return function(r,i){let s=new qt;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return yL(yield SL(r),i,s)})),s.promise}(Wl(t),e)}function tC(t,e,n){let r=n.docs.get(e._key),i=new ga(t);return new Ll(t,i,e._key,r,new Ur(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){fs=i})(qi),Jn(new xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new un(new jg(r.getProvider("auth-internal")),new qg(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Le(dT,"4.6.5",e),Le(dT,"4.6.5","esm2017")})();var Kl=function(){return Kl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kl.apply(this,arguments)};var BL={includeMetadataChanges:!1};function nC(t,e){return e===void 0&&(e=BL),new oe(function(n){var r=Vy(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function rC(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Kl(Kl({},r),(n={},n[e.idField]=t.id,n))}function iC(t){return nC(t,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function sC(t,e){return e===void 0&&(e={}),iC(t).pipe(ie(function(n){return n.map(function(r){return rC(r,e)})}))}var wa=class{constructor(e){return e}},oC="firestore",jy=class{constructor(){return jo(oC)}};var By=new ee("angularfire2.firestore-instances");function $L(t,e){let n=dg(oC,t,e);return n&&new wa(n)}function HL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new wa(r)}}var qL={provide:jy,deps:[[new Zt,By]]},zL={provide:wa,useFactory:$L,deps:[[new Zt,By],Or]};function G9(t,...e){return Le("angularfire",Gi.full,"fst"),$n([zL,qL,{provide:By,useFactory:HL(t),multi:!0,deps:[me,St,Bo,$o,[new Zt,el],[new Zt,Uo],...e]}])}var W9=ot(sC,!0);var K9=ot(eC,!0);var Q9=ot(Ub,!0);var Y9=ot(Xb,!0);var J9=ot(Py,!0);var Z9=ot(Yb,!0);var X9=ot(Jb,!0);var eW=ot(jb,!0);var tW=ot(Wb,!0);var nW=ot(Zb,!0);var rW=ot(Kb,!0);export{Ne as a,K as b,ie as c,aS as d,cS as e,f_ as f,B as g,dI as h,z as i,Yh as j,ee as k,k as l,Ut as m,bI as n,ef as o,Zc as p,VI as q,so as r,yH as s,vH as t,_H as u,gf as v,ru as w,co as x,Lt as y,IH as z,At as A,hu as B,DH as C,dN as D,Ph as E,RN as F,NN as G,TH as H,bH as I,CH as J,oE as K,aE as L,Vf as M,SH as N,Uf as O,AH as P,RH as Q,ZN as R,cE as S,NH as T,lE as U,xH as V,MH as W,xi as X,PH as Y,Sx as Z,Mi as _,sq as $,xq as aa,xM as ba,jp as ca,rz as da,iz as ea,sz as fa,oz as ga,Qz as ha,Yz as ia,wa as ja,G9 as ka,W9 as la,K9 as ma,Q9 as na,Y9 as oa,J9 as pa,Z9 as qa,X9 as ra,eW as sa,tW as ta,nW as ua,rW as va};
